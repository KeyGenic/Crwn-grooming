/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={364:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".custom-btn{min-width:165px;width:auto;height:50px;letter-spacing:0.5px;line-height:50px;padding:0 35px 0 35px;font-size:15px;background-color:black;color:white;text-transform:uppercase;font-family:'Open Sans Condensed';font-weight:bolder;border:none;cursor:pointer}.custom-btn:hover{background-color:white;color:black;border:1px solid black}.custom-btn.google-sign-in{background-color:#4285f4;color:#fff}.custom-btn.google-sign-in:hover{background-color:#357ae8;border:none}\n",""]);const s=i},31:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".group{position:relative;margin:45px 0}.group .form-input{background:none;background-color:white;color:grey;font-size:18px;padding:10px 10px 10px 5px;display:block;width:100%;border:none;border-radius:0;border-bottom:1px solid grey;margin:25px 0}.group .form-input:focus{outline:none}.group .form-input:focus ~ .form-input-label{top:-14px;font-size:12px;color:#000}.group input[type='password']{letter-spacing:0.3em}.group .form-input-label{color:grey;font-size:16px;font-weight:normal;position:absolute;pointer-events:none;left:5px;top:10px;transition:300ms ease all}.group .form-input-label.shrink{top:-14px;font-size:12px;color:#000}\n",""]);const s=i},732:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".menu{width:100%;display:flex;flex-wrap:wrap;justify-content:space-between;background-size:cover;background-position:center}\n",""]);const s=i},217:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".menu-lists{min-width:30%;height:30vh;flex:1 1 auto;display:flex;align-items:center;justify-content:center;border:1px solid black;margin:0 7.5px 15px;overflow:hidden}.menu-lists:hover{cursor:pointer}.menu-lists:hover .bg-img{transform:scale(1.1);transition:transform 6s cubic-bezier(0.25, 0.45, 0.45, 0.95)}.menu-lists:hover .contents{opacity:0.9}.menu-lists:first-child{margin-right:7.5px}.menu-lists:last-child{margin-left:7.5px}.menu-lists .bg-img{width:100%;height:100%;background-size:cover;background-position:center;transition:0.5s;-webkit-transition:0.5s;-moz-transition:0.5s;-ms-transition:0.5s;-o-transition:0.5s}.menu-lists .contents{position:absolute;background-color:white;opacity:0.7;height:90px;padding:0 25px;display:flex;flex-direction:column;align-items:center;justify-content:center;border:1px solid black;transition:0.5s;-webkit-transition:0.5s;-moz-transition:0.5s;-ms-transition:0.5s;-o-transition:0.5s}.menu-lists .contents .title{font-weight:bold;margin-bottom:6px;font-size:22px;color:#4a4a4a}.menu-lists .contents .sub{font-weight:lighter;font-size:16px}\n",""]);const s=i},394:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".sign-in{width:400px;display:flex;flex-direction:column}.sign-in .btns{display:flex;justify-content:space-between}\n",""]);const s=i},47:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".collection-items{width:22%;display:flex;flex-direction:column;height:350px;align-items:center}.collection-items .img{width:100%;height:95%;background-size:cover;background-position:center;margin-bottom:5px}.collection-items .collection-footer{width:100%;height:5%;display:flex;justify-content:space-between;font-size:18px}.collection-items .collection-footer .name{width:100%;margin-bottom:15px}.collection-items .collection-footer .price{width:50%}\n",""]);const s=i},149:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"header{height:70px;width:100%;display:flex;justify-content:space-between;margin-bottom:25px}header .logo-container{height:100%;width:70px}header .nav{width:50%;height:100%;display:flex;align-items:center;justify-content:flex-end}header .nav .nav-item{padding:10px 15px;color:#141414;font-size:20px}\n",""]);const s=i},10:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".homepage{display:flex;flex-direction:column;align-items:center;padding:20px 80px}\n",""]);const s=i},971:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".prev-collections{display:flex;flex-direction:column;margin-bottom:50px}.prev-collections .title{font-size:28px;margin-bottom:25px}.prev-collections .prev{display:flex;justify-content:space-between}\n",""]);const s=i},499:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"",""]);const s=i},847:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"*{\r\n    padding: 0;\r\n    margin: 0;\r\n    box-sizing: border-box;\r\n}\r\n\r\n\r\nbody{\r\n    font-family: 'Open Sans Condensed', sans-serif;\r\n    padding: 20px 60px;\r\n}\r\n\r\na{\r\n    text-decoration: none;\r\n}",""]);const s=i},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var s=0;s<this.length;s++){var o=this[s][0];null!=o&&(i[o]=!0)}for(var a=0;a<e.length;a++){var u=[].concat(e[a]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),t.push(u))}},t}},679:(e,t,n)=>{"use strict";var r=n(864),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function u(e){return r.isMemo(e)?o:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=o;var l=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var o=c(n);h&&(o=o.concat(h(n)));for(var a=u(t),m=u(n),g=0;g<o.length;++g){var y=o[g];if(!(s[y]||r&&r[y]||m&&m[y]||a&&a[y])){var v=d(n,y);try{l(t,y,v)}catch(e){}}}}return t}},418:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,s){for(var o,a,u=i(e),l=1;l<arguments.length;l++){for(var c in o=Object(arguments[l]))n.call(o,c)&&(u[c]=o[c]);if(t){a=t(o);for(var h=0;h<a.length;h++)r.call(o,a[h])&&(u[a[h]]=o[a[h]])}}return u}},703:(e,t,n)=>{"use strict";var r=n(414);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},697:(e,t,n)=>{e.exports=n(703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},448:(e,t,n)=>{"use strict";var r=n(294),i=n(418),s=n(840);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var a=new Set,u={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)a.add(t[e])}var h=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,p={},m={};function g(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function w(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(m,e)||!f.call(p,e)&&(d.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,w);y[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,w);y[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,w);y[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=60103,I=60106,T=60107,S=60108,k=60114,N=60109,C=60110,x=60112,A=60113,O=60120,R=60115,P=60116,D=60121,L=60128,M=60129,F=60130,U=60131;if("function"==typeof Symbol&&Symbol.for){var j=Symbol.for;E=j("react.element"),I=j("react.portal"),T=j("react.fragment"),S=j("react.strict_mode"),k=j("react.profiler"),N=j("react.provider"),C=j("react.context"),x=j("react.forward_ref"),A=j("react.suspense"),O=j("react.suspense_list"),R=j("react.memo"),P=j("react.lazy"),D=j("react.block"),j("react.scope"),L=j("react.opaque.id"),M=j("react.debug_trace_mode"),F=j("react.offscreen"),U=j("react.legacy_hidden")}var V,z="function"==typeof Symbol&&Symbol.iterator;function B(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=z&&e[z]||e["@@iterator"])?e:null}function q(e){if(void 0===V)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||""}return"\n"+V+e}var $=!1;function K(e,t){if(!e||$)return"";$=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=a);break}}}finally{$=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?q(e):""}function W(e){switch(e.tag){case 5:return q(e.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return K(e.type,!1);case 11:return K(e.type.render,!1);case 22:return K(e.type._render,!1);case 1:return K(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case T:return"Fragment";case I:return"Portal";case k:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case O:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case R:return H(e.type);case D:return H(e._render);case P:t=e._payload,e=e._init;try{return H(e(t))}catch(e){}}return null}function G(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=Q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function se(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function le(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he="http://www.w3.org/1999/xhtml";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var pe,me,ge=(me=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((pe=pe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ve={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ve.hasOwnProperty(e)&&ve[e]?(""+t).trim():t+"px"}function _e(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ve).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ve[t]=ve[e]}))}));var Ee=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(e,t){if(t){if(Ee[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(o(62))}}function Te(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Ne=null,Ce=null;function xe(e){if(e=Zr(e)){if("function"!=typeof ke)throw Error(o(280));var t=e.stateNode;t&&(t=ti(t),ke(e.stateNode,e.type,t))}}function Ae(e){Ne?Ce?Ce.push(e):Ce=[e]:Ne=e}function Oe(){if(Ne){var e=Ne,t=Ce;if(Ce=Ne=null,xe(e),t)for(e=0;e<t.length;e++)xe(t[e])}}function Re(e,t){return e(t)}function Pe(e,t,n,r,i){return e(t,n,r,i)}function De(){}var Le=Re,Me=!1,Fe=!1;function Ue(){null===Ne&&null===Ce||(De(),Oe())}function je(e,t){var n=e.stateNode;if(null===n)return null;var r=ti(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(o(231,t,typeof n));return n}var Ve=!1;if(h)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){Ve=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(me){Ve=!1}function Be(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(e){this.onError(e)}}var qe=!1,$e=null,Ke=!1,We=null,He={onError:function(e){qe=!0,$e=e}};function Ge(e,t,n,r,i,s,o,a,u){qe=!1,$e=null,Be.apply(He,arguments)}function Qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Ye(e){if(Qe(e)!==e)throw Error(o(188))}function Xe(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Qe(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ye(i),e;if(s===r)return Ye(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,u=i.child;u;){if(u===n){a=!0,n=i,r=s;break}if(u===r){a=!0,r=i,n=s;break}u=u.sibling}if(!a){for(u=s.child;u;){if(u===n){a=!0,n=s,r=i;break}if(u===r){a=!0,r=s,n=i;break}u=u.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ze(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var et,tt,nt,rt,it=!1,st=[],ot=null,at=null,ut=null,lt=new Map,ct=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ft(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function pt(e,t){switch(e){case"focusin":case"focusout":ot=null;break;case"dragenter":case"dragleave":at=null;break;case"mouseover":case"mouseout":ut=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ct.delete(t.pointerId)}}function mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e=ft(t,n,r,i,s),null!==t&&null!==(t=Zr(t))&&tt(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function gt(e){var t=Xr(e.target);if(null!==t){var n=Qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Je(n)))return e.blockedOn=t,void rt(e.lanePriority,(function(){s.unstable_runWithPriority(e.priority,(function(){nt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Zr(n))&&tt(t),e.blockedOn=n,!1;t.shift()}return!0}function vt(e,t,n){yt(e)&&n.delete(t)}function wt(){for(it=!1;0<st.length;){var e=st[0];if(null!==e.blockedOn){null!==(e=Zr(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&st.shift()}null!==ot&&yt(ot)&&(ot=null),null!==at&&yt(at)&&(at=null),null!==ut&&yt(ut)&&(ut=null),lt.forEach(vt),ct.forEach(vt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,wt)))}function _t(e){function t(t){return bt(t,e)}if(0<st.length){bt(st[0],e);for(var n=1;n<st.length;n++){var r=st[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ot&&bt(ot,e),null!==at&&bt(at,e),null!==ut&&bt(ut,e),lt.forEach(t),ct.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)gt(n),null===n.blockedOn&&ht.shift()}function Et(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var It={animationend:Et("Animation","AnimationEnd"),animationiteration:Et("Animation","AnimationIteration"),animationstart:Et("Animation","AnimationStart"),transitionend:Et("Transition","TransitionEnd")},Tt={},St={};function kt(e){if(Tt[e])return Tt[e];if(!It[e])return e;var t,n=It[e];for(t in n)if(n.hasOwnProperty(t)&&t in St)return Tt[e]=n[t];return e}h&&(St=document.createElement("div").style,"AnimationEvent"in window||(delete It.animationend.animation,delete It.animationiteration.animation,delete It.animationstart.animation),"TransitionEvent"in window||delete It.transitionend.transition);var Nt=kt("animationend"),Ct=kt("animationiteration"),xt=kt("animationstart"),At=kt("transitionend"),Ot=new Map,Rt=new Map,Pt=["abort","abort",Nt,"animationEnd",Ct,"animationIteration",xt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",At,"transitionEnd","waiting","waiting"];function Dt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Rt.set(r,t),Ot.set(r,i),l(i,[r])}}(0,s.unstable_now)();var Lt=8;function Mt(e){if(0!=(1&e))return Lt=15,1;if(0!=(2&e))return Lt=14,2;if(0!=(4&e))return Lt=13,4;var t=24&e;return 0!==t?(Lt=12,t):0!=(32&e)?(Lt=11,32):0!=(t=192&e)?(Lt=10,t):0!=(256&e)?(Lt=9,256):0!=(t=3584&e)?(Lt=8,t):0!=(4096&e)?(Lt=7,4096):0!=(t=4186112&e)?(Lt=6,t):0!=(t=62914560&e)?(Lt=5,t):67108864&e?(Lt=4,67108864):0!=(134217728&e)?(Lt=3,134217728):0!=(t=805306368&e)?(Lt=2,t):0!=(1073741824&e)?(Lt=1,1073741824):(Lt=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return Lt=0;var r=0,i=0,s=e.expiredLanes,o=e.suspendedLanes,a=e.pingedLanes;if(0!==s)r=s,i=Lt=15;else if(0!=(s=134217727&n)){var u=s&~o;0!==u?(r=Mt(u),i=Lt):0!=(a&=s)&&(r=Mt(a),i=Lt)}else 0!=(s=n&~o)?(r=Mt(s),i=Lt):0!==a&&(r=Mt(a),i=Lt);if(0===r)return 0;if(r=n&((0>(r=31-qt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&o)){if(Mt(t),i<=Lt)return t;Lt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-qt(t)),r|=e[n],t&=~i;return r}function Ut(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function jt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Vt(24&~t))?jt(10,t):e;case 10:return 0===(e=Vt(192&~t))?jt(8,t):e;case 8:return 0===(e=Vt(3584&~t))&&0===(e=Vt(4186112&~t))&&(e=512),e;case 2:return 0===(t=Vt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Vt(e){return e&-e}function zt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Bt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-qt(t)]=n}var qt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-($t(e)/Kt|0)|0},$t=Math.log,Kt=Math.LN2,Wt=s.unstable_UserBlockingPriority,Ht=s.unstable_runWithPriority,Gt=!0;function Qt(e,t,n,r){Me||De();var i=Yt,s=Me;Me=!0;try{Pe(i,e,t,n,r)}finally{(Me=s)||Ue()}}function Jt(e,t,n,r){Ht(Wt,Yt.bind(null,e,t,n,r))}function Yt(e,t,n,r){var i;if(Gt)if((i=0==(4&t))&&0<st.length&&-1<dt.indexOf(e))e=ft(null,e,t,n,r),st.push(e);else{var s=Xt(e,t,n,r);if(null===s)i&&pt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=ft(s,e,t,n,r),void st.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ot=mt(ot,e,t,n,r,i),!0;case"dragenter":return at=mt(at,e,t,n,r,i),!0;case"mouseover":return ut=mt(ut,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return lt.set(s,mt(lt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ct.set(s,mt(ct.get(s)||null,e,t,n,r,i)),!0}return!1}(s,e,t,n,r))return;pt(e,r)}Or(e,t,r,null,n)}}}function Xt(e,t,n,r){var i=Se(r);if(null!==(i=Xr(i))){var s=Qe(i);if(null===s)i=null;else{var o=s.tag;if(13===o){if(null!==(i=Je(s)))return i;i=null}else if(3===o){if(s.stateNode.hydrate)return 3===s.tag?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Or(e,t,r,i,n),null}var Zt=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return tn=i.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function sn(){return!0}function on(){return!1}function an(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?sn:on,this.isPropagationStopped=on,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=sn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=sn)},persist:function(){},isPersistent:sn}),t}var un,ln,cn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(hn),fn=i({},hn,{view:0,detail:0}),pn=an(fn),mn=i({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(un=e.screenX-cn.screenX,ln=e.screenY-cn.screenY):ln=un=0,cn=e),un)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),gn=an(mn),yn=an(i({},mn,{dataTransfer:0})),vn=an(i({},fn,{relatedTarget:0})),wn=an(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=an(i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),_n=an(i({},hn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},In={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function kn(){return Sn}var Nn=an(i({},fn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?In[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Cn=an(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),xn=an(i({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),An=an(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=an(i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Rn=[9,13,27,32],Pn=h&&"CompositionEvent"in window,Dn=null;h&&"documentMode"in document&&(Dn=document.documentMode);var Ln=h&&"TextEvent"in window&&!Dn,Mn=h&&(!Pn||Dn&&8<Dn&&11>=Dn),Fn=String.fromCharCode(32),Un=!1;function jn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1,Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function $n(e,t,n,r){Ae(r),0<(t=Pr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Wn=null;function Hn(e){Sr(e,0)}function Gn(e){if(Y(ei(e)))return e}function Qn(e,t){if("change"===e)return t}var Jn=!1;if(h){var Yn;if(h){var Xn="oninput"in document;if(!Xn){var Zn=document.createElement("div");Zn.setAttribute("oninput","return;"),Xn="function"==typeof Zn.oninput}Yn=Xn}else Yn=!1;Jn=Yn&&(!document.documentMode||9<document.documentMode)}function er(){Kn&&(Kn.detachEvent("onpropertychange",tr),Wn=Kn=null)}function tr(e){if("value"===e.propertyName&&Gn(Wn)){var t=[];if($n(t,Wn,e,Se(e)),e=Hn,Me)e(t);else{Me=!0;try{Re(e,t)}finally{Me=!1,Ue()}}}}function nr(e,t,n){"focusin"===e?(er(),Wn=n,(Kn=t).attachEvent("onpropertychange",tr)):"focusout"===e&&er()}function rr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gn(Wn)}function ir(e,t){if("click"===e)return Gn(t)}function sr(e,t){if("input"===e||"change"===e)return Gn(t)}var or="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},ar=Object.prototype.hasOwnProperty;function ur(e,t){if(or(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ar.call(t,n[r])||!or(e[n[r]],t[n[r]]))return!1;return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var pr=h&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,vr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==mr||mr!==X(r)||(r="selectionStart"in(r=mr)&&fr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Pr(gr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}Dt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Dt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Dt(Pt,2);for(var br="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),_r=0;_r<br.length;_r++)Rt.set(br[_r],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Er="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ir=new Set("cancel close invalid load scroll toggle".split(" ").concat(Er));function Tr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,u,l){if(Ge.apply(this,arguments),qe){if(!qe)throw Error(o(198));var c=$e;qe=!1,$e=null,Ke||(Ke=!0,We=c)}}(r,t,void 0,e),e.currentTarget=null}function Sr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Tr(i,a,l),s=u}else for(o=0;o<r.length;o++){if(u=(a=r[o]).instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Tr(i,a,l),s=u}}}if(Ke)throw e=We,Ke=!1,We=null,e}function kr(e,t){var n=ni(t),r=e+"__bubble";n.has(r)||(Ar(t,e,2,!1),n.add(r))}var Nr="_reactListening"+Math.random().toString(36).slice(2);function Cr(e){e[Nr]||(e[Nr]=!0,a.forEach((function(t){Ir.has(t)||xr(t,!1,e,null),xr(t,!0,e,null)})))}function xr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,s=n;if("selectionchange"===e&&9!==n.nodeType&&(s=n.ownerDocument),null!==r&&!t&&Ir.has(e)){if("scroll"!==e)return;i|=2,s=r}var o=ni(s),a=e+"__"+(t?"capture":"bubble");o.has(a)||(t&&(i|=4),Ar(s,e,i,t),o.add(a))}function Ar(e,t,n,r){var i=Rt.get(t);switch(void 0===i?2:i){case 0:i=Qt;break;case 1:i=Jt;break;default:i=Yt}n=i.bind(null,t,n,e),i=void 0,!Ve||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Or(e,t,n,r,i){var s=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=Xr(a)))return;if(5===(u=o.tag)||6===u){r=s=o;continue e}a=a.parentNode}}r=r.return}!function(e,t,n){if(Fe)return e();Fe=!0;try{Le(e,t,n)}finally{Fe=!1,Ue()}}((function(){var r=s,i=Se(n),o=[];e:{var a=Ot.get(e);if(void 0!==a){var u=dn,l=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":u=Nn;break;case"focusin":l="focus",u=vn;break;case"focusout":l="blur",u=vn;break;case"beforeblur":case"afterblur":u=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=xn;break;case Nt:case Ct:case xt:u=wn;break;case At:u=An;break;case"scroll":u=pn;break;case"wheel":u=On;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Cn}var c=0!=(4&t),h=!c&&"scroll"===e,d=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&null!=(m=je(p,d))&&c.push(Rr(p,m,f))),h)break;p=p.return}0<c.length&&(a=new u(a,l,null,n,i),o.push({event:a,listeners:c}))}}if(0==(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(l=n.relatedTarget||n.fromElement)||!Xr(l)&&!l[Jr])&&(u||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?Xr(l):null)&&(l!==(h=Qe(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=gn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Cn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==u?a:ei(u),f=null==l?a:ei(l),(a=new c(m,p+"leave",u,n,i)).target=h,a.relatedTarget=f,m=null,Xr(i)===r&&((c=new c(d,p+"enter",l,n,i)).target=f,c.relatedTarget=h,m=c),h=m,u&&l)e:{for(d=l,p=0,f=c=u;f;f=Dr(f))p++;for(f=0,m=d;m;m=Dr(m))f++;for(;0<p-f;)c=Dr(c),p--;for(;0<f-p;)d=Dr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Dr(c),d=Dr(d)}c=null}else c=null;null!==u&&Lr(o,a,u,c,!1),null!==l&&null!==h&&Lr(o,h,l,c,!0)}if("select"===(u=(a=r?ei(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===u&&"file"===a.type)var g=Qn;else if(qn(a))if(Jn)g=sr;else{g=rr;var y=nr}else(u=a.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=ir);switch(g&&(g=g(e,r))?$n(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ie(a,"number",a.value)),y=r?ei(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(mr=y,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,wr(o,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":wr(o,n,i)}var v;if(Pn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else zn?jn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Mn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==w?"onCompositionEnd"===w&&zn&&(v=nn()):(en="value"in(Zt=i)?Zt.value:Zt.textContent,zn=!0)),0<(y=Pr(r,w)).length&&(w=new _n(w,e,null,n,i),o.push({event:w,listeners:y}),(v||null!==(v=Vn(n)))&&(w.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Pn&&jn(e,t)?(e=nn(),tn=en=Zt=null,zn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&0<(r=Pr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v)}Sr(o,t)}))}function Rr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Pr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=je(e,n))&&r.unshift(Rr(e,s,i)),null!=(s=je(e,t))&&r.push(Rr(e,s,i))),e=e.return}return r}function Dr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Lr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(null!==u&&u===r)break;5===a.tag&&null!==l&&(a=l,i?null!=(u=je(n,s))&&o.unshift(Rr(n,u,a)):i||null!=(u=je(n,s))&&o.push(Rr(n,u,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Mr(){}var Fr=null,Ur=null;function jr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Vr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var zr="function"==typeof setTimeout?setTimeout:void 0,Br="function"==typeof clearTimeout?clearTimeout:void 0;function qr(e){(1===e.nodeType||9===e.nodeType&&null!=(e=e.body))&&(e.textContent="")}function $r(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Kr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Wr=0,Hr=Math.random().toString(36).slice(2),Gr="__reactFiber$"+Hr,Qr="__reactProps$"+Hr,Jr="__reactContainer$"+Hr,Yr="__reactEvents$"+Hr;function Xr(e){var t=e[Gr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Jr]||n[Gr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Kr(e);null!==e;){if(n=e[Gr])return n;e=Kr(e)}return t}n=(e=n).parentNode}return null}function Zr(e){return!(e=e[Gr]||e[Jr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ei(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ti(e){return e[Qr]||null}function ni(e){var t=e[Yr];return void 0===t&&(t=e[Yr]=new Set),t}var ri=[],ii=-1;function si(e){return{current:e}}function oi(e){0>ii||(e.current=ri[ii],ri[ii]=null,ii--)}function ai(e,t){ii++,ri[ii]=e.current,e.current=t}var ui={},li=si(ui),ci=si(!1),hi=ui;function di(e,t){var n=e.type.contextTypes;if(!n)return ui;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function fi(e){return null!=e.childContextTypes}function pi(){oi(ci),oi(li)}function mi(e,t,n){if(li.current!==ui)throw Error(o(168));ai(li,t),ai(ci,n)}function gi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in e))throw Error(o(108,H(t)||"Unknown",s));return i({},n,r)}function yi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ui,hi=li.current,ai(li,e),ai(ci,ci.current),!0}function vi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=gi(e,t,hi),r.__reactInternalMemoizedMergedChildContext=e,oi(ci),oi(li),ai(li,e)):oi(ci),ai(ci,n)}var wi=null,bi=null,_i=s.unstable_runWithPriority,Ei=s.unstable_scheduleCallback,Ii=s.unstable_cancelCallback,Ti=s.unstable_shouldYield,Si=s.unstable_requestPaint,ki=s.unstable_now,Ni=s.unstable_getCurrentPriorityLevel,Ci=s.unstable_ImmediatePriority,xi=s.unstable_UserBlockingPriority,Ai=s.unstable_NormalPriority,Oi=s.unstable_LowPriority,Ri=s.unstable_IdlePriority,Pi={},Di=void 0!==Si?Si:function(){},Li=null,Mi=null,Fi=!1,Ui=ki(),ji=1e4>Ui?ki:function(){return ki()-Ui};function Vi(){switch(Ni()){case Ci:return 99;case xi:return 98;case Ai:return 97;case Oi:return 96;case Ri:return 95;default:throw Error(o(332))}}function zi(e){switch(e){case 99:return Ci;case 98:return xi;case 97:return Ai;case 96:return Oi;case 95:return Ri;default:throw Error(o(332))}}function Bi(e,t){return e=zi(e),_i(e,t)}function qi(e,t,n){return e=zi(e),Ei(e,t,n)}function $i(){if(null!==Mi){var e=Mi;Mi=null,Ii(e)}Ki()}function Ki(){if(!Fi&&null!==Li){Fi=!0;var e=0;try{var t=Li;Bi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Li=null}catch(t){throw null!==Li&&(Li=Li.slice(e+1)),Ei(Ci,$i),t}finally{Fi=!1}}}var Wi=_.ReactCurrentBatchConfig;function Hi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Gi=si(null),Qi=null,Ji=null,Yi=null;function Xi(){Yi=Ji=Qi=null}function Zi(e){var t=Gi.current;oi(Gi),e.type._context._currentValue=t}function es(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function ts(e,t){Qi=e,Yi=Ji=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Po=!0),e.firstContext=null)}function ns(e,t){if(Yi!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Yi=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Ji){if(null===Qi)throw Error(o(308));Ji=t,Qi.dependencies={lanes:0,firstContext:t,responders:null}}else Ji=Ji.next=t;return e._currentValue}var rs=!1;function is(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ss(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function os(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function as(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function us(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ls(e,t,n,r){var s=e.updateQueue;rs=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,u=s.shared.pending;if(null!==u){s.shared.pending=null;var l=u,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var h=e.alternate;if(null!==h){var d=(h=h.updateQueue).lastBaseUpdate;d!==a&&(null===d?h.firstBaseUpdate=c:d.next=c,h.lastBaseUpdate=l)}}if(null!==o){for(d=s.baseState,a=0,h=c=l=null;;){u=o.lane;var f=o.eventTime;if((r&u)===u){null!==h&&(h=h.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(u=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(f,d,u);break e}d=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null==(u="function"==typeof(p=m.payload)?p.call(f,d,u):p))break e;d=i({},d,u);break e;case 2:rs=!0}}null!==o.callback&&(e.flags|=32,null===(u=s.effects)?s.effects=[o]:u.push(o))}else f={eventTime:f,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(c=h=f,l=d):h=h.next=f,a|=u;if(null===(o=o.next)){if(null===(u=s.shared.pending))break;o=u.next,u.next=null,s.lastBaseUpdate=u,s.shared.pending=null}}null===h&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,La|=a,e.lanes=a,e.memoizedState=d}}function cs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(o(191,i));i.call(r)}}}var hs=(new r.Component).refs;function ds(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fs={isMounted:function(e){return!!(e=e._reactInternals)&&Qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ou(),i=au(e),s=os(r,i);s.payload=t,null!=n&&(s.callback=n),as(e,s),uu(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ou(),i=au(e),s=os(r,i);s.tag=1,s.payload=t,null!=n&&(s.callback=n),as(e,s),uu(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ou(),r=au(e),i=os(n,r);i.tag=2,null!=t&&(i.callback=t),as(e,i),uu(e,r,n)}};function ps(e,t,n,r,i,s,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!(t.prototype&&t.prototype.isPureReactComponent&&ur(n,r)&&ur(i,s))}function ms(e,t,n){var r=!1,i=ui,s=t.contextType;return"object"==typeof s&&null!==s?s=ns(s):(i=fi(t)?hi:li.current,s=(r=null!=(r=t.contextTypes))?di(e,i):ui),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=fs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function gs(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fs.enqueueReplaceState(t,t.state,null)}function ys(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=hs,is(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=ns(s):(s=fi(t)?hi:li.current,i.context=di(e,s)),ls(e,n,i,r),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(ds(e,t,s,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&fs.enqueueReplaceState(i,i.state,null),ls(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}var vs=Array.isArray;function ws(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===hs&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function bs(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function _s(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Vu(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=$u(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=ws(e,t,n),r.return=e,r):((r=zu(n.type,n.key,n.props,null,e.mode,r)).ref=ws(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ku(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Bu(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=$u(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case E:return(n=zu(t.type,t.key,t.props,null,e.mode,n)).ref=ws(e,null,t),n.return=e,n;case I:return(t=Ku(t,e.mode,n)).return=e,t}if(vs(t)||B(t))return(t=Bu(t,e.mode,n,null)).return=e,t;bs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:u(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case E:return n.key===i?n.type===T?h(e,t,n.props.children,r,i):l(e,t,n,r):null;case I:return n.key===i?c(e,t,n,r):null}if(vs(n)||B(n))return null!==i?null:h(e,t,n,r,null);bs(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case E:return e=e.get(null===r.key?n:r.key)||null,r.type===T?h(t,e,r.props.children,i,r.key):l(t,e,r,i);case I:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(vs(r)||B(r))return h(t,e=e.get(n)||null,r,i,null);bs(t,r)}return null}function m(i,o,a,u){for(var l=null,c=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],u);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),o=s(y,o,m),null===c?l=y:c.sibling=y,c=y,h=g}if(m===a.length)return n(i,h),l;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],u))&&(o=s(h,o,m),null===c?l=h:c.sibling=h,c=h);return l}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],u))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===c?l=g:c.sibling=g,c=g);return e&&h.forEach((function(e){return t(i,e)})),l}function g(i,a,u,l){var c=B(u);if("function"!=typeof c)throw Error(o(150));if(null==(u=c.call(u)))throw Error(o(151));for(var h=c=null,m=a,g=a=0,y=null,v=u.next();null!==m&&!v.done;g++,v=u.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,l);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=s(w,a,g),null===h?c=w:h.sibling=w,h=w,m=y}if(v.done)return n(i,m),c;if(null===m){for(;!v.done;g++,v=u.next())null!==(v=d(i,v.value,l))&&(a=s(v,a,g),null===h?c=v:h.sibling=v,h=v);return c}for(m=r(i,m);!v.done;g++,v=u.next())null!==(v=p(m,i,g,v.value,l))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=s(v,a,g),null===h?c=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),c}return function(e,r,s,u){var l="object"==typeof s&&null!==s&&s.type===T&&null===s.key;l&&(s=s.props.children);var c="object"==typeof s&&null!==s;if(c)switch(s.$$typeof){case E:e:{for(c=s.key,l=r;null!==l;){if(l.key===c){switch(l.tag){case 7:if(s.type===T){n(e,l.sibling),(r=i(l,s.props.children)).return=e,e=r;break e}break;default:if(l.elementType===s.type){n(e,l.sibling),(r=i(l,s.props)).ref=ws(e,l,s),r.return=e,e=r;break e}}n(e,l);break}t(e,l),l=l.sibling}s.type===T?((r=Bu(s.props.children,e.mode,u,s.key)).return=e,e=r):((u=zu(s.type,s.key,s.props,null,e.mode,u)).ref=ws(e,r,s),u.return=e,e=u)}return a(e);case I:e:{for(l=s.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===s.containerInfo&&r.stateNode.implementation===s.implementation){n(e,r.sibling),(r=i(r,s.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Ku(s,e.mode,u)).return=e,e=r}return a(e)}if("string"==typeof s||"number"==typeof s)return s=""+s,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,s)).return=e,e=r):(n(e,r),(r=$u(s,e.mode,u)).return=e,e=r),a(e);if(vs(s))return m(e,r,s,u);if(B(s))return g(e,r,s,u);if(c&&bs(e,s),void 0===s&&!l)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,H(e.type)||"Component"))}return n(e,r)}}var Es=_s(!0),Is=_s(!1),Ts={},Ss=si(Ts),ks=si(Ts),Ns=si(Ts);function Cs(e){if(e===Ts)throw Error(o(174));return e}function xs(e,t){switch(ai(Ns,t),ai(ks,e),ai(Ss,Ts),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fe(null,"");break;default:t=fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}oi(Ss),ai(Ss,t)}function As(){oi(Ss),oi(ks),oi(Ns)}function Os(e){Cs(Ns.current);var t=Cs(Ss.current),n=fe(t,e.type);t!==n&&(ai(ks,e),ai(Ss,n))}function Rs(e){ks.current===e&&(oi(Ss),oi(ks))}var Ps=si(0);function Ds(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ls=null,Ms=null,Fs=!1;function Us(e,t){var n=Uu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function js(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Vs(e){if(Fs){var t=Ms;if(t){var n=t;if(!js(e,t)){if(!(t=$r(n.nextSibling))||!js(e,t))return e.flags=-1025&e.flags|2,Fs=!1,void(Ls=e);Us(Ls,n)}Ls=e,Ms=$r(t.firstChild)}else e.flags=-1025&e.flags|2,Fs=!1,Ls=e}}function zs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ls=e}function Bs(e){if(e!==Ls)return!1;if(!Fs)return zs(e),Fs=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Vr(t,e.memoizedProps))for(t=Ms;t;)Us(e,t),t=$r(t.nextSibling);if(zs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ms=$r(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ms=null}}else Ms=Ls?$r(e.stateNode.nextSibling):null;return!0}function qs(){Ms=Ls=null,Fs=!1}var $s=[];function Ks(){for(var e=0;e<$s.length;e++)$s[e]._workInProgressVersionPrimary=null;$s.length=0}var Ws=_.ReactCurrentDispatcher,Hs=_.ReactCurrentBatchConfig,Gs=0,Qs=null,Js=null,Ys=null,Xs=!1,Zs=!1;function eo(){throw Error(o(321))}function to(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function no(e,t,n,r,i,s){if(Gs=s,Qs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ws.current=null===e||null===e.memoizedState?xo:Ao,e=n(r,i),Zs){s=0;do{if(Zs=!1,!(25>s))throw Error(o(301));s+=1,Ys=Js=null,t.updateQueue=null,Ws.current=Oo,e=n(r,i)}while(Zs)}if(Ws.current=Co,t=null!==Js&&null!==Js.next,Gs=0,Ys=Js=Qs=null,Xs=!1,t)throw Error(o(300));return e}function ro(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ys?Qs.memoizedState=Ys=e:Ys=Ys.next=e,Ys}function io(){if(null===Js){var e=Qs.alternate;e=null!==e?e.memoizedState:null}else e=Js.next;var t=null===Ys?Qs.memoizedState:Ys.next;if(null!==t)Ys=t,Js=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Js=e).memoizedState,baseState:Js.baseState,baseQueue:Js.baseQueue,queue:Js.queue,next:null},null===Ys?Qs.memoizedState=Ys=e:Ys=Ys.next=e}return Ys}function so(e,t){return"function"==typeof t?t(e):t}function oo(e){var t=io(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Js,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=a=s=null,l=i;do{var c=l.lane;if((Gs&c)===c)null!==u&&(u=u.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),r=l.eagerReducer===e?l.eagerState:e(r,l.action);else{var h={lane:c,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===u?(a=u=h,s=r):u=u.next=h,Qs.lanes|=c,La|=c}l=l.next}while(null!==l&&l!==i);null===u?s=r:u.next=a,or(r,t.memoizedState)||(Po=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ao(e){var t=io(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);or(s,t.memoizedState)||(Po=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function uo(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Gs&e)===e)&&(t._workInProgressVersionPrimary=r,$s.push(t))),e)return n(t._source);throw $s.push(t),Error(o(350))}function lo(e,t,n,r){var i=Na;if(null===i)throw Error(o(349));var s=t._getVersion,a=s(t._source),u=Ws.current,l=u.useState((function(){return uo(i,t,n)})),c=l[1],h=l[0];l=Ys;var d=e.memoizedState,f=d.refs,p=f.getSnapshot,m=d.source;d=d.subscribe;var g=Qs;return e.memoizedState={refs:f,source:t,subscribe:r},u.useEffect((function(){f.getSnapshot=n,f.setSnapshot=c;var e=s(t._source);if(!or(a,e)){e=n(t._source),or(h,e)||(c(e),e=au(g),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var u=31-qt(o),l=1<<u;r[u]|=e,o&=~l}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=f.getSnapshot,n=f.setSnapshot;try{n(e(t._source));var r=au(g);i.mutableReadLanes|=r&i.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),or(p,n)&&or(m,t)&&or(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:so,lastRenderedState:h}).dispatch=c=No.bind(null,Qs,e),l.queue=e,l.baseQueue=null,h=uo(i,t,n),l.memoizedState=l.baseState=h),h}function co(e,t,n){return lo(io(),e,t,n)}function ho(e){var t=ro();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:so,lastRenderedState:e}).dispatch=No.bind(null,Qs,e),[t.memoizedState,e]}function fo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Qs.updateQueue)?(t={lastEffect:null},Qs.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function po(e){return e={current:e},ro().memoizedState=e}function mo(){return io().memoizedState}function go(e,t,n,r){var i=ro();Qs.flags|=e,i.memoizedState=fo(1|t,n,void 0,void 0===r?null:r)}function yo(e,t,n,r){var i=io();r=void 0===r?null:r;var s=void 0;if(null!==Js){var o=Js.memoizedState;if(s=o.destroy,null!==r&&to(r,o.deps))return void fo(t,n,s,r)}Qs.flags|=e,i.memoizedState=fo(1|t,n,s,r)}function vo(e,t){return go(516,4,e,t)}function wo(e,t){return yo(516,4,e,t)}function bo(e,t){return yo(4,2,e,t)}function _o(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Eo(e,t,n){return n=null!=n?n.concat([e]):null,yo(4,2,_o.bind(null,t,e),n)}function Io(){}function To(e,t){var n=io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&to(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function So(e,t){var n=io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&to(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ko(e,t){var n=Vi();Bi(98>n?98:n,(function(){e(!0)})),Bi(97<n?97:n,(function(){var n=Hs.transition;Hs.transition=1;try{e(!1),t()}finally{Hs.transition=n}}))}function No(e,t,n){var r=ou(),i=au(e),s={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?s.next=s:(s.next=o.next,o.next=s),t.pending=s,o=e.alternate,e===Qs||null!==o&&o===Qs)Zs=Xs=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,u=o(a,n);if(s.eagerReducer=o,s.eagerState=u,or(u,a))return}catch(e){}uu(e,i,r)}}var Co={readContext:ns,useCallback:eo,useContext:eo,useEffect:eo,useImperativeHandle:eo,useLayoutEffect:eo,useMemo:eo,useReducer:eo,useRef:eo,useState:eo,useDebugValue:eo,useDeferredValue:eo,useTransition:eo,useMutableSource:eo,useOpaqueIdentifier:eo,unstable_isNewReconciler:!1},xo={readContext:ns,useCallback:function(e,t){return ro().memoizedState=[e,void 0===t?null:t],e},useContext:ns,useEffect:vo,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,go(4,2,_o.bind(null,t,e),n)},useLayoutEffect:function(e,t){return go(4,2,e,t)},useMemo:function(e,t){var n=ro();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ro();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=No.bind(null,Qs,e),[r.memoizedState,e]},useRef:po,useState:ho,useDebugValue:Io,useDeferredValue:function(e){var t=ho(e),n=t[0],r=t[1];return vo((function(){var t=Hs.transition;Hs.transition=1;try{r(e)}finally{Hs.transition=t}}),[e]),n},useTransition:function(){var e=ho(!1),t=e[0];return po(e=ko.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=ro();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},lo(r,e,t,n)},useOpaqueIdentifier:function(){if(Fs){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Wr++).toString(36))),Error(o(355))})),n=ho(t)[1];return 0==(2&Qs.mode)&&(Qs.flags|=516,fo(5,(function(){n("r:"+(Wr++).toString(36))}),void 0,null)),t}return ho(t="r:"+(Wr++).toString(36)),t},unstable_isNewReconciler:!1},Ao={readContext:ns,useCallback:To,useContext:ns,useEffect:wo,useImperativeHandle:Eo,useLayoutEffect:bo,useMemo:So,useReducer:oo,useRef:mo,useState:function(){return oo(so)},useDebugValue:Io,useDeferredValue:function(e){var t=oo(so),n=t[0],r=t[1];return wo((function(){var t=Hs.transition;Hs.transition=1;try{r(e)}finally{Hs.transition=t}}),[e]),n},useTransition:function(){var e=oo(so)[0];return[mo().current,e]},useMutableSource:co,useOpaqueIdentifier:function(){return oo(so)[0]},unstable_isNewReconciler:!1},Oo={readContext:ns,useCallback:To,useContext:ns,useEffect:wo,useImperativeHandle:Eo,useLayoutEffect:bo,useMemo:So,useReducer:ao,useRef:mo,useState:function(){return ao(so)},useDebugValue:Io,useDeferredValue:function(e){var t=ao(so),n=t[0],r=t[1];return wo((function(){var t=Hs.transition;Hs.transition=1;try{r(e)}finally{Hs.transition=t}}),[e]),n},useTransition:function(){var e=ao(so)[0];return[mo().current,e]},useMutableSource:co,useOpaqueIdentifier:function(){return ao(so)[0]},unstable_isNewReconciler:!1},Ro=_.ReactCurrentOwner,Po=!1;function Do(e,t,n,r){t.child=null===e?Is(t,null,n,r):Es(t,e.child,n,r)}function Lo(e,t,n,r,i){n=n.render;var s=t.ref;return ts(t,i),r=no(e,t,n,r,s,i),null===e||Po?(t.flags|=1,Do(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Zo(e,t,i))}function Mo(e,t,n,r,i,s){if(null===e){var o=n.type;return"function"!=typeof o||ju(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=zu(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Fo(e,t,o,r,i,s))}return o=e.child,0==(i&s)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:ur)(i,r)&&e.ref===t.ref)?Zo(e,t,s):(t.flags|=1,(e=Vu(o,r)).ref=t.ref,e.return=t,t.child=e)}function Fo(e,t,n,r,i,s){if(null!==e&&ur(e.memoizedProps,r)&&e.ref===t.ref){if(Po=!1,0==(s&i))return t.lanes=e.lanes,Zo(e,t,s);0!=(16384&e.flags)&&(Po=!0)}return Vo(e,t,n,r,s)}function Uo(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},gu(0,n);else{if(0==(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},gu(0,e),null;t.memoizedState={baseLanes:0},gu(0,null!==s?s.baseLanes:n)}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,gu(0,r);return Do(e,t,i,n),t.child}function jo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Vo(e,t,n,r,i){var s=fi(n)?hi:li.current;return s=di(t,s),ts(t,i),n=no(e,t,n,r,s,i),null===e||Po?(t.flags|=1,Do(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Zo(e,t,i))}function zo(e,t,n,r,i){if(fi(n)){var s=!0;yi(t)}else s=!1;if(ts(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ms(t,n,r),ys(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;l="object"==typeof l&&null!==l?ns(l):di(t,l=fi(n)?hi:li.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;h||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==r||u!==l)&&gs(t,o,r,l),rs=!1;var d=t.memoizedState;o.state=d,ls(t,r,o,i),u=t.memoizedState,a!==r||d!==u||ci.current||rs?("function"==typeof c&&(ds(t,n,c,r),u=t.memoizedState),(a=rs||ps(t,n,a,r,d,u,l))?(h||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4)):("function"==typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):("function"==typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ss(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:Hi(t.type,a),o.props=l,h=t.pendingProps,d=o.context,u="object"==typeof(u=n.contextType)&&null!==u?ns(u):di(t,u=fi(n)?hi:li.current);var f=n.getDerivedStateFromProps;(c="function"==typeof f||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==h||d!==u)&&gs(t,o,r,u),rs=!1,d=t.memoizedState,o.state=d,ls(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||ci.current||rs?("function"==typeof f&&(ds(t,n,f,r),p=t.memoizedState),(l=rs||ps(t,n,l,r,d,p,u))?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return Bo(e,t,n,r,s,i)}function Bo(e,t,n,r,i,s){jo(e,t);var o=0!=(64&t.flags);if(!r&&!o)return i&&vi(t,n,!1),Zo(e,t,s);r=t.stateNode,Ro.current=t;var a=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Es(t,e.child,null,s),t.child=Es(t,null,a,s)):Do(e,t,a,s),t.memoizedState=r.state,i&&vi(t,n,!0),t.child}function qo(e){var t=e.stateNode;t.pendingContext?mi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&mi(0,t.context,!1),xs(e,t.containerInfo)}var $o,Ko,Wo,Ho={dehydrated:null,retryLane:0};function Go(e,t,n){var r,i=t.pendingProps,s=Ps.current,o=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&s)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(s|=1),ai(Ps,1&s),null===e?(void 0!==i.fallback&&Vs(t),e=i.children,s=i.fallback,o?(e=Qo(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ho,e):"number"==typeof i.unstable_expectedLoadTime?(e=Qo(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ho,t.lanes=33554432,e):((n=qu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=function(e,t,n,r,i){var s=t.mode,o=e.child;e=o.sibling;var a={mode:"hidden",children:n};return 0==(2&s)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=a,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Vu(o,a),null!==e?r=Vu(e,r):(r=Bu(r,s,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}(e,t,i.children,i.fallback,n),o=t.child,s=e.child.memoizedState,o.memoizedState=null===s?{baseLanes:n}:{baseLanes:s.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Ho,i):(n=function(e,t,n,r){var i=e.child;return e=i.sibling,n=Vu(i,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}(e,t,i.children,n),t.memoizedState=null,n))}function Qo(e,t,n,r){var i=e.mode,s=e.child;return t={mode:"hidden",children:t},0==(2&i)&&null!==s?(s.childLanes=0,s.pendingProps=t):s=qu(t,i,0,null),n=Bu(n,i,r,null),s.return=e,n.return=e,s.sibling=n,e.child=s,n}function Jo(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),es(e.return,t)}function Yo(e,t,n,r,i,s){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=s)}function Xo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Do(e,t,r.children,n),0!=(2&(r=Ps.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Jo(e,n);else if(19===e.tag)Jo(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ai(Ps,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ds(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Yo(t,!1,i,n,s,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ds(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Yo(t,!0,n,null,s,t.lastEffect);break;case"together":Yo(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Zo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),La|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Vu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Vu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ea(e,t){if(!Fs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ta(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return fi(t.type)&&pi(),null;case 3:return As(),oi(ci),oi(li),Ks(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Bs(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Rs(t);var s=Cs(Ns.current);if(n=t.type,null!==e&&null!=t.stateNode)Ko(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Cs(Ss.current),Bs(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Gr]=t,r[Qr]=a,n){case"dialog":kr("cancel",r),kr("close",r);break;case"iframe":case"object":case"embed":kr("load",r);break;case"video":case"audio":for(e=0;e<Er.length;e++)kr(Er[e],r);break;case"source":kr("error",r);break;case"img":case"image":case"link":kr("error",r),kr("load",r);break;case"details":kr("toggle",r);break;case"input":ee(r,a),kr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},kr("invalid",r);break;case"textarea":ue(r,a),kr("invalid",r)}for(var l in Ie(n,a),e=null,a)a.hasOwnProperty(l)&&(s=a[l],"children"===l?"string"==typeof s?r.textContent!==s&&(e=["children",s]):"number"==typeof s&&r.textContent!==""+s&&(e=["children",""+s]):u.hasOwnProperty(l)&&null!=s&&"onScroll"===l&&kr("scroll",r));switch(n){case"input":J(r),re(r,a,!0);break;case"textarea":J(r),ce(r);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(r.onclick=Mr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(l=9===s.nodeType?s:s.ownerDocument,e===he&&(e=de(n)),e===he?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Gr]=t,e[Qr]=r,$o(e,t),t.stateNode=e,l=Te(n,r),n){case"dialog":kr("cancel",e),kr("close",e),s=r;break;case"iframe":case"object":case"embed":kr("load",e),s=r;break;case"video":case"audio":for(s=0;s<Er.length;s++)kr(Er[s],e);s=r;break;case"source":kr("error",e),s=r;break;case"img":case"image":case"link":kr("error",e),kr("load",e),s=r;break;case"details":kr("toggle",e),s=r;break;case"input":ee(e,r),s=Z(e,r),kr("invalid",e);break;case"option":s=se(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=i({},r,{value:void 0}),kr("invalid",e);break;case"textarea":ue(e,r),s=ae(e,r),kr("invalid",e);break;default:s=r}Ie(n,s);var c=s;for(a in c)if(c.hasOwnProperty(a)){var h=c[a];"style"===a?_e(e,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&ge(e,h):"children"===a?"string"==typeof h?("textarea"!==n||""!==h)&&ye(e,h):"number"==typeof h&&ye(e,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(u.hasOwnProperty(a)?null!=h&&"onScroll"===a&&kr("scroll",e):null!=h&&b(e,a,h,l))}switch(n){case"input":J(e),re(e,r,!1);break;case"textarea":J(e),ce(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?oe(e,!!r.multiple,a,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof s.onClick&&(e.onclick=Mr)}jr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Wo(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(o(166));n=Cs(Ns.current),Cs(Ss.current),Bs(t)?(r=t.stateNode,n=t.memoizedProps,r[Gr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Gr]=t,t.stateNode=r)}return null;case 13:return oi(Ps),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Bs(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Ps.current)?0===Ra&&(Ra=3):(0!==Ra&&3!==Ra||(Ra=4),null===Na||0==(134217727&La)&&0==(134217727&Ma)||du(Na,xa))),(r||n)&&(t.flags|=4),null);case 4:return As(),null===e&&Cr(t.stateNode.containerInfo),null;case 10:return Zi(t),null;case 17:return fi(t.type)&&pi(),null;case 19:if(oi(Ps),null===(r=t.memoizedState))return null;if(a=0!=(64&t.flags),null===(l=r.rendering))if(a)ea(r,!1);else{if(0!==Ra||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(l=Ds(e))){for(t.flags|=64,ea(r,!1),null!==(a=l.updateQueue)&&(t.updateQueue=a,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ai(Ps,1&Ps.current|2),t.child}e=e.sibling}null!==r.tail&&ji()>Va&&(t.flags|=64,a=!0,ea(r,!1),t.lanes=33554432)}else{if(!a)if(null!==(e=Ds(l))){if(t.flags|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ea(r,!0),null===r.tail&&"hidden"===r.tailMode&&!l.alternate&&!Fs)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*ji()-r.renderingStartTime>Va&&1073741824!==n&&(t.flags|=64,a=!0,ea(r,!1),t.lanes=33554432);r.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=r.last)?n.sibling=l:t.child=l,r.last=l)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=ji(),n.sibling=null,t=Ps.current,ai(Ps,a?1&t|2:1&t),n):null;case 23:case 24:return yu(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function na(e){switch(e.tag){case 1:fi(e.type)&&pi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(As(),oi(ci),oi(li),Ks(),0!=(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Rs(e),null;case 13:return oi(Ps),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return oi(Ps),null;case 4:return As(),null;case 10:return Zi(e),null;case 23:case 24:return yu(),null;default:return null}}function ra(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}function ia(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}$o=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ko=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Cs(Ss.current);var o,a=null;switch(n){case"input":s=Z(e,s),r=Z(e,r),a=[];break;case"option":s=se(e,s),r=se(e,r),a=[];break;case"select":s=i({},s,{value:void 0}),r=i({},r,{value:void 0}),a=[];break;case"textarea":s=ae(e,s),r=ae(e,r),a=[];break;default:"function"!=typeof s.onClick&&"function"==typeof r.onClick&&(e.onclick=Mr)}for(h in Ie(n,r),n=null,s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&null!=s[h])if("style"===h){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(u.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in r){var c=r[h];if(l=null!=s?s[h]:void 0,r.hasOwnProperty(h)&&c!==l&&(null!=c||null!=l))if("style"===h)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(h,n)),n=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(h,c)):"children"===h?"string"!=typeof c&&"number"!=typeof c||(a=a||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(u.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&kr("scroll",e),a||l===c||(a=[])):"object"==typeof c&&null!==c&&c.$$typeof===L?c.toString():(a=a||[]).push(h,c))}n&&(a=a||[]).push("style",n);var h=a;(t.updateQueue=h)&&(t.flags|=4)}},Wo=function(e,t,n,r){n!==r&&(t.flags|=4)};var sa="function"==typeof WeakMap?WeakMap:Map;function oa(e,t,n){(n=os(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$a||($a=!0,Ka=r),ia(0,t)},n}function aa(e,t,n){(n=os(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return ia(0,t),r(i)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Wa?Wa=new Set([this]):Wa.add(this),ia(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ua="function"==typeof WeakSet?WeakSet:Set;function la(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Du(e,t)}else t.current=null}function ca(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Hi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&qr(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(o(163))}function ha(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(Ou(n,e),Au(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Hi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&cs(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}cs(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&jr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&_t(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(o(163))}function da(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function fa(e,t){if(bi&&"function"==typeof bi.onCommitFiberUnmount)try{bi.onCommitFiberUnmount(wi,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!=(4&r))Ou(t,n);else{r=t;try{i()}catch(e){Du(r,e)}}n=n.next}while(n!==e)}break;case 1:if(la(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Du(t,e)}break;case 5:la(t);break;case 4:wa(e,t)}}function pa(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ma(e){return 5===e.tag||3===e.tag||4===e.tag}function ga(e){e:{for(var t=e.return;null!==t;){if(ma(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ma(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?ya(e,n,t):va(e,n,t)}function ya(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Mr));else if(4!==r&&null!==(e=e.child))for(ya(e,t,n),e=e.sibling;null!==e;)ya(e,t,n),e=e.sibling}function va(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(va(e,t,n),e=e.sibling;null!==e;)va(e,t,n),e=e.sibling}function wa(e,t){for(var n,r,i=t,s=!1;;){if(!s){s=i.return;e:for(;;){if(null===s)throw Error(o(160));switch(n=s.stateNode,s.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}s=s.return}s=!0}if(5===i.tag||6===i.tag){e:for(var a=e,u=i,l=u;;)if(fa(a,l),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===u)break e;for(;null===l.sibling;){if(null===l.return||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}r?(a=n,u=i.stateNode,8===a.nodeType?a.parentNode.removeChild(u):a.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(fa(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(s=!1)}i.sibling.return=i.return,i=i.sibling}}function ba(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,null!==s){for(n[Qr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Te(e,i),t=Te(e,r),i=0;i<s.length;i+=2){var a=s[i],u=s[i+1];"style"===a?_e(n,u):"dangerouslySetInnerHTML"===a?ge(n,u):"children"===a?ye(n,u):b(n,a,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":le(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(s=r.value)?oe(n,!!r.multiple,s,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,_t(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(ja=ji(),da(t.child,!0)),void _a(t);case 19:return void _a(t);case 17:return;case 23:case 24:return void da(t,null!==t.memoizedState)}throw Error(o(163))}function _a(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ua),t.forEach((function(t){var r=Mu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ea(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&null!==(t=t.memoizedState)&&null===t.dehydrated}var Ia=Math.ceil,Ta=_.ReactCurrentDispatcher,Sa=_.ReactCurrentOwner,ka=0,Na=null,Ca=null,xa=0,Aa=0,Oa=si(0),Ra=0,Pa=null,Da=0,La=0,Ma=0,Fa=0,Ua=null,ja=0,Va=1/0;function za(){Va=ji()+500}var Ba,qa=null,$a=!1,Ka=null,Wa=null,Ha=!1,Ga=null,Qa=90,Ja=[],Ya=[],Xa=null,Za=0,eu=null,tu=-1,nu=0,ru=0,iu=null,su=!1;function ou(){return 0!=(48&ka)?ji():-1!==tu?tu:tu=ji()}function au(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===Vi()?1:2;if(0===nu&&(nu=Da),0!==Wi.transition){0!==ru&&(ru=null!==Ua?Ua.pendingLanes:0),e=nu;var t=4186112&~ru;return 0==(t&=-t)&&0==(t=(e=4186112&~e)&-e)&&(t=8192),t}return e=Vi(),e=jt(0!=(4&ka)&&98===e?12:e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),nu)}function uu(e,t,n){if(50<Za)throw Za=0,eu=null,Error(o(185));if(null===(e=lu(e,t)))return null;Bt(e,t,n),e===Na&&(Ma|=t,4===Ra&&du(e,xa));var r=Vi();1===t?0!=(8&ka)&&0==(48&ka)?fu(e):(cu(e,n),0===ka&&(za(),$i())):(0==(4&ka)||98!==r&&99!==r||(null===Xa?Xa=new Set([e]):Xa.add(e)),cu(e,n)),Ua=e}function lu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function cu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var u=31-qt(a),l=1<<u,c=s[u];if(-1===c){if(0==(l&r)||0!=(l&i)){c=t,Mt(l);var h=Lt;s[u]=10<=h?c+250:6<=h?c+5e3:-1}}else c<=t&&(e.expiredLanes|=l);a&=~l}if(r=Ft(e,e===Na?xa:0),t=Lt,0===r)null!==n&&(n!==Pi&&Ii(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Pi&&Ii(n)}15===t?(n=fu.bind(null,e),null===Li?(Li=[n],Mi=Ei(Ci,Ki)):Li.push(n),n=Pi):n=14===t?qi(99,fu.bind(null,e)):qi(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),hu.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function hu(e){if(tu=-1,ru=nu=0,0!=(48&ka))throw Error(o(327));var t=e.callbackNode;if(xu()&&e.callbackNode!==t)return null;var n=Ft(e,e===Na?xa:0);if(0===n)return null;var r=n,i=ka;ka|=16;var s=bu();for(Na===e&&xa===r||(za(),vu(e,r));;)try{Iu();break}catch(t){wu(e,t)}if(Xi(),Ta.current=s,ka=i,null!==Ca?r=0:(Na=null,xa=0,r=Ra),0!=(Da&Ma))vu(e,0);else if(0!==r){if(2===r&&(ka|=64,e.hydrate&&(e.hydrate=!1,qr(e.containerInfo)),0!==(n=Ut(e))&&(r=_u(e,n))),1===r)throw t=Pa,vu(e,0),du(e,n),cu(e,ji()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:ku(e);break;case 3:if(du(e,n),(62914560&n)===n&&10<(r=ja+500-ji())){if(0!==Ft(e,0))break;if(((i=e.suspendedLanes)&n)!==n){ou(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=zr(ku.bind(null,e),r);break}ku(e);break;case 4:if(du(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var a=31-qt(n);s=1<<a,(a=r[a])>i&&(i=a),n&=~s}if(n=i,10<(n=(120>(n=ji()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ia(n/1960))-n)){e.timeoutHandle=zr(ku.bind(null,e),n);break}ku(e);break;case 5:ku(e);break;default:throw Error(o(329))}}return cu(e,ji()),e.callbackNode===t?hu.bind(null,e):null}function du(e,t){for(t&=~Fa,t&=~Ma,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-qt(t),r=1<<n;e[n]=-1,t&=~r}}function fu(e){if(0!=(48&ka))throw Error(o(327));if(xu(),e===Na&&0!=(e.expiredLanes&xa)){var t=xa,n=_u(e,t);0!=(Da&Ma)&&(n=_u(e,t=Ft(e,t)))}else n=_u(e,t=Ft(e,0));if(0!==e.tag&&2===n&&(ka|=64,e.hydrate&&(e.hydrate=!1,qr(e.containerInfo)),0!==(t=Ut(e))&&(n=_u(e,t))),1===n)throw n=Pa,vu(e,0),du(e,t),cu(e,ji()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,ku(e),cu(e,ji()),null}function pu(e,t){var n=ka;ka|=1;try{return e(t)}finally{0===(ka=n)&&(za(),$i())}}function mu(e,t){var n=ka;ka&=-2,ka|=8;try{return e(t)}finally{0===(ka=n)&&(za(),$i())}}function gu(e,t){ai(Oa,Aa),Aa|=t,Da|=t}function yu(){Aa=Oa.current,oi(Oa)}function vu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Br(n)),null!==Ca)for(n=Ca.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&pi();break;case 3:As(),oi(ci),oi(li),Ks();break;case 5:Rs(r);break;case 4:As();break;case 13:case 19:oi(Ps);break;case 10:Zi(r);break;case 23:case 24:yu()}n=n.return}Na=e,Ca=Vu(e.current,null),xa=Aa=Da=t,Ra=0,Pa=null,Fa=Ma=La=0}function wu(e,t){for(;;){var n=Ca;try{if(Xi(),Ws.current=Co,Xs){for(var r=Qs.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Xs=!1}if(Gs=0,Ys=Js=Qs=null,Zs=!1,Sa.current=null,null===n||null===n.return){Ra=1,Pa=t,Ca=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=xa,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==u&&"object"==typeof u&&"function"==typeof u.then){var l=u;if(0==(2&a.mode)){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.lanes=c.lanes):(a.updateQueue=null,a.memoizedState=null)}var h=0!=(1&Ps.current),d=o;do{var f;if(f=13===d.tag){var p=d.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var m=d.memoizedProps;f=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(f){var g=d.updateQueue;if(null===g){var y=new Set;y.add(l),d.updateQueue=y}else g.add(l);if(0==(2&d.mode)){if(d.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var v=os(-1,1);v.tag=2,as(a,v)}a.lanes|=1;break e}u=void 0,a=t;var w=s.pingCache;if(null===w?(w=s.pingCache=new sa,u=new Set,w.set(l,u)):void 0===(u=w.get(l))&&(u=new Set,w.set(l,u)),!u.has(a)){u.add(a);var b=Lu.bind(null,s,l,a);l.then(b,b)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);u=Error((H(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ra&&(Ra=2),u=ra(u,a),d=o;do{switch(d.tag){case 3:s=u,d.flags|=4096,t&=-t,d.lanes|=t,us(d,oa(0,s,t));break e;case 1:s=u;var _=d.type,E=d.stateNode;if(0==(64&d.flags)&&("function"==typeof _.getDerivedStateFromError||null!==E&&"function"==typeof E.componentDidCatch&&(null===Wa||!Wa.has(E)))){d.flags|=4096,t&=-t,d.lanes|=t,us(d,aa(d,s,t));break e}}d=d.return}while(null!==d)}Su(n)}catch(e){t=e,Ca===n&&null!==n&&(Ca=n=n.return);continue}break}}function bu(){var e=Ta.current;return Ta.current=Co,null===e?Co:e}function _u(e,t){var n=ka;ka|=16;var r=bu();for(Na===e&&xa===t||vu(e,t);;)try{Eu();break}catch(t){wu(e,t)}if(Xi(),ka=n,Ta.current=r,null!==Ca)throw Error(o(261));return Na=null,xa=0,Ra}function Eu(){for(;null!==Ca;)Tu(Ca)}function Iu(){for(;null!==Ca&&!Ti();)Tu(Ca)}function Tu(e){var t=Ba(e.alternate,e,Aa);e.memoizedProps=e.pendingProps,null===t?Su(e):Ca=t,Sa.current=null}function Su(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=ta(n,t,Aa)))return void(Ca=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&Aa)||0==(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=na(t)))return n.flags&=2047,void(Ca=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ca=t);Ca=t=e}while(null!==t);0===Ra&&(Ra=5)}function ku(e){var t=Vi();return Bi(99,Nu.bind(null,e,t)),null}function Nu(e,t){do{xu()}while(null!==Ga);if(0!=(48&ka))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,s=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var a=e.eventTimes,u=e.expirationTimes;0<s;){var l=31-qt(s),c=1<<l;i[l]=0,a[l]=-1,u[l]=-1,s&=~c}if(null!==Xa&&0==(24&r)&&Xa.has(e)&&Xa.delete(e),e===Na&&(Ca=Na=null,xa=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=ka,ka|=32,Sa.current=null,Fr=Gt,fr(a=dr())){if("selectionStart"in a)u={start:a.selectionStart,end:a.selectionEnd};else e:if(u=(u=a.ownerDocument)&&u.defaultView||window,(c=u.getSelection&&u.getSelection())&&0!==c.rangeCount){u=c.anchorNode,s=c.anchorOffset,l=c.focusNode,c=c.focusOffset;try{u.nodeType,l.nodeType}catch(e){u=null;break e}var h=0,d=-1,f=-1,p=0,m=0,g=a,y=null;t:for(;;){for(var v;g!==u||0!==s&&3!==g.nodeType||(d=h+s),g!==l||0!==c&&3!==g.nodeType||(f=h+c),3===g.nodeType&&(h+=g.nodeValue.length),null!==(v=g.firstChild);)y=g,g=v;for(;;){if(g===a)break t;if(y===u&&++p===s&&(d=h),y===l&&++m===c&&(f=h),null!==(v=g.nextSibling))break;y=(g=y).parentNode}g=v}u=-1===d||-1===f?null:{start:d,end:f}}else u=null;u=u||{start:0,end:0}}else u=null;Ur={focusedElem:a,selectionRange:u},Gt=!1,iu=null,su=!1,qa=r;do{try{Cu()}catch(e){if(null===qa)throw Error(o(330));Du(qa,e),qa=qa.nextEffect}}while(null!==qa);iu=null,qa=r;do{try{for(a=e;null!==qa;){var w=qa.flags;if(16&w&&ye(qa.stateNode,""),128&w){var b=qa.alternate;if(null!==b){var _=b.ref;null!==_&&("function"==typeof _?_(null):_.current=null)}}switch(1038&w){case 2:ga(qa),qa.flags&=-3;break;case 6:ga(qa),qa.flags&=-3,ba(qa.alternate,qa);break;case 1024:qa.flags&=-1025;break;case 1028:qa.flags&=-1025,ba(qa.alternate,qa);break;case 4:ba(qa.alternate,qa);break;case 8:wa(a,u=qa);var E=u.alternate;pa(u),null!==E&&pa(E)}qa=qa.nextEffect}}catch(e){if(null===qa)throw Error(o(330));Du(qa,e),qa=qa.nextEffect}}while(null!==qa);if(_=Ur,b=dr(),w=_.focusedElem,a=_.selectionRange,b!==w&&w&&w.ownerDocument&&hr(w.ownerDocument.documentElement,w)){null!==a&&fr(w)&&(b=a.start,void 0===(_=a.end)&&(_=b),"selectionStart"in w?(w.selectionStart=b,w.selectionEnd=Math.min(_,w.value.length)):(_=(b=w.ownerDocument||document)&&b.defaultView||window).getSelection&&(_=_.getSelection(),u=w.textContent.length,E=Math.min(a.start,u),a=void 0===a.end?E:Math.min(a.end,u),!_.extend&&E>a&&(u=a,a=E,E=u),u=cr(w,E),s=cr(w,a),u&&s&&(1!==_.rangeCount||_.anchorNode!==u.node||_.anchorOffset!==u.offset||_.focusNode!==s.node||_.focusOffset!==s.offset)&&((b=b.createRange()).setStart(u.node,u.offset),_.removeAllRanges(),E>a?(_.addRange(b),_.extend(s.node,s.offset)):(b.setEnd(s.node,s.offset),_.addRange(b))))),b=[];for(_=w;_=_.parentNode;)1===_.nodeType&&b.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"==typeof w.focus&&w.focus(),w=0;w<b.length;w++)(_=b[w]).element.scrollLeft=_.left,_.element.scrollTop=_.top}Gt=!!Fr,Ur=Fr=null,e.current=n,qa=r;do{try{for(w=e;null!==qa;){var I=qa.flags;if(36&I&&ha(w,qa.alternate,qa),128&I){b=void 0;var T=qa.ref;if(null!==T){var S=qa.stateNode;switch(qa.tag){case 5:b=S;break;default:b=S}"function"==typeof T?T(b):T.current=b}}qa=qa.nextEffect}}catch(e){if(null===qa)throw Error(o(330));Du(qa,e),qa=qa.nextEffect}}while(null!==qa);qa=null,Di(),ka=i}else e.current=n;if(Ha)Ha=!1,Ga=e,Qa=t;else for(qa=r;null!==qa;)t=qa.nextEffect,qa.nextEffect=null,8&qa.flags&&((I=qa).sibling=null,I.stateNode=null),qa=t;if(0===(r=e.pendingLanes)&&(Wa=null),1===r?e===eu?Za++:(Za=0,eu=e):Za=0,n=n.stateNode,bi&&"function"==typeof bi.onCommitFiberRoot)try{bi.onCommitFiberRoot(wi,n,void 0,64==(64&n.current.flags))}catch(e){}if(cu(e,ji()),$a)throw $a=!1,e=Ka,Ka=null,e;return 0!=(8&ka)||$i(),null}function Cu(){for(;null!==qa;){var e=qa.alternate;su||null===iu||(0!=(8&qa.flags)?Ze(qa,iu)&&(su=!0):13===qa.tag&&Ea(e,qa)&&Ze(qa,iu)&&(su=!0));var t=qa.flags;0!=(256&t)&&ca(e,qa),0==(512&t)||Ha||(Ha=!0,qi(97,(function(){return xu(),null}))),qa=qa.nextEffect}}function xu(){if(90!==Qa){var e=97<Qa?97:Qa;return Qa=90,Bi(e,Ru)}return!1}function Au(e,t){Ja.push(t,e),Ha||(Ha=!0,qi(97,(function(){return xu(),null})))}function Ou(e,t){Ya.push(t,e),Ha||(Ha=!0,qi(97,(function(){return xu(),null})))}function Ru(){if(null===Ga)return!1;var e=Ga;if(Ga=null,0!=(48&ka))throw Error(o(331));var t=ka;ka|=32;var n=Ya;Ya=[];for(var r=0;r<n.length;r+=2){var i=n[r],s=n[r+1],a=i.destroy;if(i.destroy=void 0,"function"==typeof a)try{a()}catch(e){if(null===s)throw Error(o(330));Du(s,e)}}for(n=Ja,Ja=[],r=0;r<n.length;r+=2){i=n[r],s=n[r+1];try{var u=i.create;i.destroy=u()}catch(e){if(null===s)throw Error(o(330));Du(s,e)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return ka=t,$i(),!0}function Pu(e,t,n){as(e,t=oa(0,t=ra(n,t),1)),t=ou(),null!==(e=lu(e,1))&&(Bt(e,1,t),cu(e,t))}function Du(e,t){if(3===e.tag)Pu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Pu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Wa||!Wa.has(r))){var i=aa(n,e=ra(t,e),1);if(as(n,i),i=ou(),null!==(n=lu(n,1)))Bt(n,1,i),cu(n,i);else if("function"==typeof r.componentDidCatch&&(null===Wa||!Wa.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function Lu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ou(),e.pingedLanes|=e.suspendedLanes&n,Na===e&&(xa&n)===n&&(4===Ra||3===Ra&&(62914560&xa)===xa&&500>ji()-ja?vu(e,0):Fa|=n),cu(e,t)}function Mu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0==(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===Vi()?1:2:(0===nu&&(nu=Da),0===(t=Vt(62914560&~nu))&&(t=4194304))),n=ou(),null!==(e=lu(e,t))&&(Bt(e,t,n),cu(e,n))}function Fu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Uu(e,t,n,r){return new Fu(e,t,n,r)}function ju(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Vu(e,t){var n=e.alternate;return null===n?((n=Uu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function zu(e,t,n,r,i,s){var a=2;if(r=e,"function"==typeof e)ju(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case T:return Bu(n.children,i,s,t);case M:a=8,i|=16;break;case S:a=8,i|=1;break;case k:return(e=Uu(12,n,t,8|i)).elementType=k,e.type=k,e.lanes=s,e;case A:return(e=Uu(13,n,t,i)).type=A,e.elementType=A,e.lanes=s,e;case O:return(e=Uu(19,n,t,i)).elementType=O,e.lanes=s,e;case F:return qu(n,i,s,t);case U:return(e=Uu(24,n,t,i)).elementType=U,e.lanes=s,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case N:a=10;break e;case C:a=9;break e;case x:a=11;break e;case R:a=14;break e;case P:a=16,r=null;break e;case D:a=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Uu(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Bu(e,t,n,r){return(e=Uu(7,e,r,t)).lanes=n,e}function qu(e,t,n,r){return(e=Uu(23,e,r,t)).elementType=F,e.lanes=n,e}function $u(e,t,n){return(e=Uu(6,e,null,t)).lanes=n,e}function Ku(e,t,n){return(t=Uu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wu(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=zt(0),this.expirationTimes=zt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.mutableSourceEagerHydrationData=null}function Hu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:I,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Gu(e,t,n,r){var i=t.current,s=ou(),a=au(i);e:if(n){t:{if(Qe(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(fi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(o(171))}if(1===n.tag){var l=n.type;if(fi(l)){n=gi(n,l,u);break e}}n=u}else n=ui;return null===t.context?t.context=n:t.pendingContext=n,(t=os(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),as(i,t),uu(i,a,s),a}function Qu(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Ju(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yu(e,t){Ju(e,t),(e=e.alternate)&&Ju(e,t)}function Xu(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Wu(e,t,null!=n&&!0===n.hydrate),t=Uu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,is(t),e[Jr]=n.current,Cr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function Zu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function el(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s._internalRoot;if("function"==typeof i){var a=i;i=function(){var e=Qu(o);a.call(e)}}Gu(t,o,e,i)}else{if(s=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Xu(e,0,t?{hydrate:!0}:void 0)}(n,r),o=s._internalRoot,"function"==typeof i){var u=i;i=function(){var e=Qu(o);u.call(e)}}mu((function(){Gu(t,o,e,i)}))}return Qu(o)}function tl(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zu(t))throw Error(o(200));return Hu(e,t,null,n)}Ba=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||ci.current)Po=!0;else{if(0==(n&r)){switch(Po=!1,t.tag){case 3:qo(t),qs();break;case 5:Os(t);break;case 1:fi(t.type)&&yi(t);break;case 4:xs(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;ai(Gi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?Go(e,t,n):(ai(Ps,1&Ps.current),null!==(t=Zo(e,t,n))?t.sibling:null);ai(Ps,1&Ps.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return Xo(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ai(Ps,Ps.current),r)break;return null;case 23:case 24:return t.lanes=0,Uo(e,t,n)}return Zo(e,t,n)}Po=0!=(16384&e.flags)}else Po=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=di(t,li.current),ts(t,n),i=no(null,t,r,e,i,n),t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,fi(r)){var s=!0;yi(t)}else s=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,is(t);var a=r.getDerivedStateFromProps;"function"==typeof a&&ds(t,r,a,e),i.updater=fs,t.stateNode=i,i._reactInternals=t,ys(t,r,e,n),t=Bo(null,t,r,!0,s,n)}else t.tag=0,Do(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(s=i._init)(i._payload),t.type=i,s=t.tag=function(e){if("function"==typeof e)return ju(e)?1:0;if(null!=e){if((e=e.$$typeof)===x)return 11;if(e===R)return 14}return 2}(i),e=Hi(i,e),s){case 0:t=Vo(null,t,i,e,n);break e;case 1:t=zo(null,t,i,e,n);break e;case 11:t=Lo(null,t,i,e,n);break e;case 14:t=Mo(null,t,i,Hi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Vo(e,t,r,i=t.elementType===r?i:Hi(r,i),n);case 1:return r=t.type,i=t.pendingProps,zo(e,t,r,i=t.elementType===r?i:Hi(r,i),n);case 3:if(qo(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ss(e,t),ls(t,r,null,n),(r=t.memoizedState.element)===i)qs(),t=Zo(e,t,n);else{if((s=(i=t.stateNode).hydrate)&&(Ms=$r(t.stateNode.containerInfo.firstChild),Ls=t,s=Fs=!0),s){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(s=e[i])._workInProgressVersionPrimary=e[i+1],$s.push(s);for(n=Is(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Do(e,t,r,n),qs();t=t.child}return t;case 5:return Os(t),null===e&&Vs(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,Vr(r,i)?a=null:null!==s&&Vr(r,s)&&(t.flags|=16),jo(e,t),Do(e,t,a,n),t.child;case 6:return null===e&&Vs(t),null;case 13:return Go(e,t,n);case 4:return xs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Es(t,null,r,n):Do(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Lo(e,t,r,i=t.elementType===r?i:Hi(r,i),n);case 7:return Do(e,t,t.pendingProps,n),t.child;case 8:case 12:return Do(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value;var u=t.type._context;if(ai(Gi,u._currentValue),u._currentValue=s,null!==a)if(u=a.value,0==(s=or(u,s)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(u,s):1073741823))){if(a.children===i.children&&!ci.current){t=Zo(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var l=u.dependencies;if(null!==l){a=u.child;for(var c=l.firstContext;null!==c;){if(c.context===r&&0!=(c.observedBits&s)){1===u.tag&&((c=os(-1,n&-n)).tag=2,as(u,c)),u.lanes|=n,null!==(c=u.alternate)&&(c.lanes|=n),es(u.return,n),l.lanes|=n;break}c=c.next}}else a=10===u.tag&&u.type===t.type?null:u.child;if(null!==a)a.return=u;else for(a=u;null!==a;){if(a===t){a=null;break}if(null!==(u=a.sibling)){u.return=a.return,a=u;break}a=a.return}u=a}Do(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(s=t.pendingProps).children,ts(t,n),r=r(i=ns(i,s.unstable_observedBits)),t.flags|=1,Do(e,t,r,n),t.child;case 14:return s=Hi(i=t.type,t.pendingProps),Mo(e,t,i,s=Hi(i.type,s),r,n);case 15:return Fo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Hi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,fi(r)?(e=!0,yi(t)):e=!1,ts(t,n),ms(t,r,i),ys(t,r,i,n),Bo(null,t,r,!0,e,n);case 19:return Xo(e,t,n);case 23:case 24:return Uo(e,t,n)}throw Error(o(156,t.tag))},Xu.prototype.render=function(e){Gu(e,this._internalRoot,null,null)},Xu.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Gu(null,e,null,(function(){t[Jr]=null}))},et=function(e){13===e.tag&&(uu(e,4,ou()),Yu(e,4))},tt=function(e){13===e.tag&&(uu(e,67108864,ou()),Yu(e,67108864))},nt=function(e){if(13===e.tag){var t=ou(),n=au(e);uu(e,n,t),Yu(e,n)}},rt=function(e,t){return t()},ke=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ti(r);if(!i)throw Error(o(90));Y(r),ne(r,i)}}}break;case"textarea":le(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Re=pu,Pe=function(e,t,n,r,i){var s=ka;ka|=4;try{return Bi(98,e.bind(null,t,n,r,i))}finally{0===(ka=s)&&(za(),$i())}},De=function(){0==(49&ka)&&(function(){if(null!==Xa){var e=Xa;Xa=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,cu(e,ji())}))}$i()}(),xu())},Le=function(e,t){var n=ka;ka|=2;try{return e(t)}finally{0===(ka=n)&&(za(),$i())}};var nl={Events:[Zr,ei,ti,Ae,Oe,xu,{current:!1}]},rl={findFiberByHostInstance:Xr,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},il={bundleType:rl.bundleType,version:rl.version,rendererPackageName:rl.rendererPackageName,rendererConfig:rl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Xe(e))?null:e.stateNode},findFiberByHostInstance:rl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sl.isDisabled&&sl.supportsFiber)try{wi=sl.inject(il),bi=sl}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nl,t.createPortal=tl,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return null===(e=Xe(t))?null:e.stateNode},t.flushSync=function(e,t){var n=ka;if(0!=(48&n))return e(t);ka|=1;try{if(e)return Bi(99,e.bind(null,t))}finally{ka=n,$i()}},t.hydrate=function(e,t,n){if(!Zu(t))throw Error(o(200));return el(null,e,t,!0,n)},t.render=function(e,t,n){if(!Zu(t))throw Error(o(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zu(e))throw Error(o(40));return!!e._reactRootContainer&&(mu((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[Jr]=null}))})),!0)},t.unstable_batchedUpdates=pu,t.unstable_createPortal=function(e,t){return tl(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zu(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return el(e,t,n,!1,r)},t.version="17.0.2"},935:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(448)},921:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,w=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function _(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case h:case s:case a:case o:case f:return e;default:switch(e=e&&e.$$typeof){case l:case d:case g:case m:case u:return e;default:return t}}case i:return t}}}function E(e){return _(e)===h}t.AsyncMode=c,t.ConcurrentMode=h,t.ContextConsumer=l,t.ContextProvider=u,t.Element=r,t.ForwardRef=d,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return E(e)||_(e)===c},t.isConcurrentMode=E,t.isContextConsumer=function(e){return _(e)===l},t.isContextProvider=function(e){return _(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===d},t.isFragment=function(e){return _(e)===s},t.isLazy=function(e){return _(e)===g},t.isMemo=function(e){return _(e)===m},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===a},t.isStrictMode=function(e){return _(e)===o},t.isSuspense=function(e){return _(e)===f},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===h||e===a||e===o||e===f||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===u||e.$$typeof===l||e.$$typeof===d||e.$$typeof===v||e.$$typeof===w||e.$$typeof===b||e.$$typeof===y)},t.typeOf=_},864:(e,t,n)=>{"use strict";e.exports=n(921)},585:e=>{e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},658:(e,t,n)=>{var r=n(585);e.exports=function e(t,n,i){return r(n)||(i=n||i,n=[]),i=i||{},t instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return c(e,t)}(t,n):r(t)?function(t,n,r){for(var i=[],s=0;s<t.length;s++)i.push(e(t[s],n,r).source);return c(new RegExp("(?:"+i.join("|")+")",h(r)),n)}(t,n,i):function(e,t,n){return d(s(e,n),t,n)}(t,n,i)},e.exports.parse=s,e.exports.compile=function(e,t){return a(s(e,t),t)},e.exports.tokensToFunction=a,e.exports.tokensToRegExp=d;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function s(e,t){for(var n,r=[],s=0,o=0,a="",c=t&&t.delimiter||"/";null!=(n=i.exec(e));){var h=n[0],d=n[1],f=n.index;if(a+=e.slice(o,f),o=f+h.length,d)a+=d[1];else{var p=e[o],m=n[2],g=n[3],y=n[4],v=n[5],w=n[6],b=n[7];a&&(r.push(a),a="");var _=null!=m&&null!=p&&p!==m,E="+"===w||"*"===w,I="?"===w||"*"===w,T=n[2]||c,S=y||v;r.push({name:g||s++,prefix:m||"",delimiter:T,optional:I,repeat:E,partial:_,asterisk:!!b,pattern:S?l(S):b?".*":"[^"+u(T)+"]+?"})}}return o<e.length&&(a+=e.substr(o)),a&&r.push(a),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function a(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"==typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",h(t)));return function(t,i){for(var s="",a=t||{},u=(i||{}).pretty?o:encodeURIComponent,l=0;l<e.length;l++){var c=e[l];if("string"!=typeof c){var h,d=a[c.name];if(null==d){if(c.optional){c.partial&&(s+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(r(d)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var f=0;f<d.length;f++){if(h=u(d[f]),!n[l].test(h))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(h)+"`");s+=(0===f?c.prefix:c.delimiter)+h}}else{if(h=c.asterisk?encodeURI(d).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):u(d),!n[l].test(h))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+h+'"');s+=c.prefix+h}}else s+=c}return s}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function c(e,t){return e.keys=t,e}function h(e){return e&&e.sensitive?"":"i"}function d(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,s=!1!==n.end,o="",a=0;a<e.length;a++){var l=e[a];if("string"==typeof l)o+=u(l);else{var d=u(l.prefix),f="(?:"+l.pattern+")";t.push(l),l.repeat&&(f+="(?:"+d+f+")*"),o+=f=l.optional?l.partial?d+"("+f+")?":"(?:"+d+"("+f+"))?":d+"("+f+")"}}var p=u(n.delimiter||"/"),m=o.slice(-p.length)===p;return i||(o=(m?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=s?"$":i&&m?"":"(?="+p+"|$)",c(new RegExp("^"+o,h(n)),t)}},408:(e,t,n)=>{"use strict";var r=n(418),i=60103,s=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,a=60110,u=60112;t.Suspense=60113;var l=60115,c=60116;if("function"==typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),s=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),o=h("react.provider"),a=h("react.context"),u=h("react.forward_ref"),t.Suspense=h("react.suspense"),l=h("react.memo"),c=h("react.lazy")}var d="function"==typeof Symbol&&Symbol.iterator;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var w=v.prototype=new y;w.constructor=v,r(w,g.prototype),w.isPureReactComponent=!0;var b={current:null},_=Object.prototype.hasOwnProperty,E={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,n){var r,s={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,r)&&!E.hasOwnProperty(r)&&(s[r]=t[r]);var u=arguments.length-2;if(1===u)s.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];s.children=l}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===s[r]&&(s[r]=u[r]);return{$$typeof:i,type:e,key:o,ref:a,props:s,_owner:b.current}}function T(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}var S=/\/+/g;function k(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,n,r,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var u=!1;if(null===e)u=!0;else switch(a){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case s:u=!0}}if(u)return o=o(u=e),e=""===r?"."+k(u,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(S,"$&/")+"/"),N(o,t,n,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=r+k(a=e[l],l);u+=N(a,t,n,c,o)}else if("function"==typeof(c=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e)))for(e=c.call(e),l=0;!(a=e.next()).done;)u+=N(a=a.value,t,n,c=r+k(a,l++),o);else if("object"===a)throw t=""+e,Error(f(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function C(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function x(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var A={current:null};function O(){var e=A.current;if(null===e)throw Error(f(321));return e}var R={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error(f(143));return e}},t.Component=g,t.PureComponent=v,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,n){if(null==e)throw Error(f(267,e));var s=r({},e.props),o=e.key,a=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,u=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!E.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];s.children=l}return{$$typeof:i,type:e.type,key:o,ref:a,props:s,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:a,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:x}},t.memo=function(e,t){return{$$typeof:l,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return O().useCallback(e,t)},t.useContext=function(e,t){return O().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return O().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return O().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return O().useLayoutEffect(e,t)},t.useMemo=function(e,t){return O().useMemo(e,t)},t.useReducer=function(e,t,n){return O().useReducer(e,t,n)},t.useRef=function(e){return O().useRef(e)},t.useState=function(e){return O().useState(e)},t.version="17.0.2"},294:(e,t,n)=>{"use strict";e.exports=n(408)},53:(e,t)=>{"use strict";var n,r,i,s;if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var l=null,c=null,h=function(){if(null!==l)try{var e=t.unstable_now();l(!0,e),l=null}catch(e){throw setTimeout(h,0),e}};n=function(e){null!==l?setTimeout(n,0,e):(l=e,setTimeout(h,0))},r=function(e,t){c=setTimeout(e,t)},i=function(){clearTimeout(c)},t.unstable_shouldYield=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,f=window.clearTimeout;if("undefined"!=typeof console){var p=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,y=-1,v=5,w=0;t.unstable_shouldYield=function(){return t.unstable_now()>=w},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,_=b.port2;b.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();w=e+v;try{g(!0,e)?_.postMessage(null):(m=!1,g=null)}catch(e){throw _.postMessage(null),e}}else m=!1},n=function(e){g=e,m||(m=!0,_.postMessage(null))},r=function(e,n){y=d((function(){e(t.unstable_now())}),n)},i=function(){f(y),y=-1}}function E(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<S(i,t)))break e;e[r]=t,e[n]=i,n=r}}function I(e){return void 0===(e=e[0])?null:e}function T(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var s=2*(r+1)-1,o=e[s],a=s+1,u=e[a];if(void 0!==o&&0>S(o,n))void 0!==u&&0>S(u,o)?(e[r]=u,e[a]=n,r=a):(e[r]=o,e[s]=n,r=s);else{if(!(void 0!==u&&0>S(u,n)))break e;e[r]=u,e[a]=n,r=a}}}return t}return null}function S(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var k=[],N=[],C=1,x=null,A=3,O=!1,R=!1,P=!1;function D(e){for(var t=I(N);null!==t;){if(null===t.callback)T(N);else{if(!(t.startTime<=e))break;T(N),t.sortIndex=t.expirationTime,E(k,t)}t=I(N)}}function L(e){if(P=!1,D(e),!R)if(null!==I(k))R=!0,n(M);else{var t=I(N);null!==t&&r(L,t.startTime-e)}}function M(e,n){R=!1,P&&(P=!1,i()),O=!0;var s=A;try{for(D(n),x=I(k);null!==x&&(!(x.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=x.callback;if("function"==typeof o){x.callback=null,A=x.priorityLevel;var a=o(x.expirationTime<=n);n=t.unstable_now(),"function"==typeof a?x.callback=a:x===I(k)&&T(k),D(n)}else T(k);x=I(k)}if(null!==x)var u=!0;else{var l=I(N);null!==l&&r(L,l.startTime-n),u=!1}return u}finally{x=null,A=s,O=!1}}var F=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){R||O||(R=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return I(k)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_scheduleCallback=function(e,s,o){var a=t.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?a+o:a,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:C++,callback:s,priorityLevel:e,startTime:o,expirationTime:u=o+u,sortIndex:-1},o>a?(e.sortIndex=o,E(N,e),null===I(k)&&e===I(N)&&(P?i():P=!0,r(L,o-a))):(e.sortIndex=u,E(k,e),R||O||(R=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}},840:(e,t,n)=>{"use strict";e.exports=n(53)},379:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var s={},o=[],a=0;a<e.length;a++){var u=e[a],l=r.base?u[0]+r.base:u[0],c=s[l]||0,h="".concat(l," ").concat(c);s[l]=c+1;var d=n(h),f={css:u[1],media:u[2],sourceMap:u[3]};-1!==d?(t[d].references++,t[d].updater(f)):t.push({identifier:h,updater:i(f,r),references:1}),o.push(h)}return o}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var s=r(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<s.length;o++){var a=n(s[o]);t[a].references--}for(var u=r(e,i),l=0;l<s.length;l++){var c=n(s[l]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}s=u}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t),t}},565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r=n.css,i=n.media,s=n.sourceMap;i?e.setAttribute("media",i):e.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(r,e)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},657:e=>{e.exports="data:image/svg+xml,%3csvg width='50px' height='39px' viewBox='0 0 50 39' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 53.2 (72643) - https://sketchapp.com --%3e %3ctitle%3eGroup%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cg id='WiP' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='Artboard' transform='translate(-90.000000, -38.000000)'%3e %3cg id='Group' transform='translate(90.000000, 38.000000)'%3e %3cpolygon id='Rectangle' fill='%23808282' points='3 14 25 26.5 47 14 40.855176 39 9.08421785 39'%3e%3c/polygon%3e %3cpolygon id='Triangle' fill-opacity='0.262838724' fill='%23101A1A' points='25 8 40 39 10 39'%3e%3c/polygon%3e %3ccircle id='Oval' fill='%235E6363' cx='2' cy='9' r='2'%3e%3c/circle%3e %3ccircle id='Oval' fill='%235E6363' cx='25' cy='2' r='2'%3e%3c/circle%3e %3ccircle id='Oval' fill='%235E6363' cx='48' cy='9' r='2'%3e%3c/circle%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/svg%3e"}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={id:r,exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>ct,SDK_VERSION:()=>Xt,_DEFAULT_ENTRY_NAME:()=>Vt,_addComponent:()=>$t,_addOrOverwriteComponent:()=>Kt,_apps:()=>Bt,_clearComponents:()=>Qt,_components:()=>qt,_getProvider:()=>Ht,_registerComponent:()=>Wt,_removeServiceInstance:()=>Gt,deleteApp:()=>nn,getApp:()=>en,getApps:()=>tn,initializeApp:()=>Zt,onLog:()=>sn,registerVersion:()=>rn,setLogLevel:()=>on});var t=n(294),r=n(935),i=n(379),s=n.n(i),o=n(795),a=n.n(o),u=n(569),l=n.n(u),c=n(565),h=n.n(c),d=n(216),f=n.n(d),p=n(589),m=n.n(p),g=n(10),y={};y.styleTagTransform=m(),y.setAttributes=h(),y.insert=l().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=f(),s()(g.Z,y),g.Z&&g.Z.locals&&g.Z.locals;var v=n(732),w={};w.styleTagTransform=m(),w.setAttributes=h(),w.insert=l().bind(null,"head"),w.domAPI=a(),w.insertStyleElement=f(),s()(v.Z,w),v.Z&&v.Z.locals&&v.Z.locals;var b=n(217),_={};function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,E(e,t)}_.styleTagTransform=m(),_.setAttributes=h(),_.insert=l().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=f(),s()(b.Z,_),b.Z&&b.Z.locals&&b.Z.locals;var T=n(697),S=n.n(T);function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function N(e){return"/"===e.charAt(0)}function C(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}const x=function(e,t){if(!e)throw new Error("Invariant failed")};function A(e){return"/"===e.charAt(0)?e:"/"+e}function O(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function R(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function P(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function D(e,t,n,r){var i;"string"==typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var s=t.indexOf("?");return-1!==s&&(n=t.substr(s),t=t.substr(0,s)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(i=k({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],s=e&&N(e),o=t&&N(t),a=s||o;if(e&&N(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var u=i[i.length-1];n="."===u||".."===u||""===u}else n=!1;for(var l=0,c=i.length;c>=0;c--){var h=i[c];"."===h?C(i,c):".."===h?(C(i,c),l++):l&&(C(i,c),l--)}if(!a)for(;l--;l)i.unshift("..");!a||""===i[0]||i[0]&&N(i[0])||i.unshift("");var d=i.join("/");return n&&"/"!==d.substr(-1)&&(d+="/"),d}(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function L(){var e=null,t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var s="function"==typeof e?e(t,n):e;"string"==typeof s?"function"==typeof r?r(s,i):i(!0):i(!1!==s)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var M=!("undefined"==typeof window||!window.document||!window.document.createElement);function F(e,t){t(window.confirm(e))}var U="popstate",j="hashchange";function V(){try{return window.history.state||{}}catch(e){return{}}}function z(e){void 0===e&&(e={}),M||x(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,s=i.forceRefresh,o=void 0!==s&&s,a=i.getUserConfirmation,u=void 0===a?F:a,l=i.keyLength,c=void 0===l?6:l,h=e.basename?R(A(e.basename)):"";function d(e){var t=e||{},n=t.key,r=t.state,i=window.location,s=i.pathname+i.search+i.hash;return h&&(s=O(s,h)),D(s,r,n)}function f(){return Math.random().toString(36).substr(2,c)}var p=L();function m(e){k(C,e),C.length=t.length,p.notifyListeners(C.location,C.action)}function g(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||w(d(e.state))}function y(){w(d(V()))}var v=!1;function w(e){v?(v=!1,m()):p.confirmTransitionTo(e,"POP",u,(function(t){t?m({action:"POP",location:e}):function(e){var t=C.location,n=_.indexOf(t.key);-1===n&&(n=0);var r=_.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(v=!0,I(i))}(e)}))}var b=d(V()),_=[b.key];function E(e){return h+P(e)}function I(e){t.go(e)}var T=0;function S(e){1===(T+=e)&&1===e?(window.addEventListener(U,g),r&&window.addEventListener(j,y)):0===T&&(window.removeEventListener(U,g),r&&window.removeEventListener(j,y))}var N=!1,C={length:t.length,action:"POP",location:b,createHref:E,push:function(e,r){var i="PUSH",s=D(e,r,f(),C.location);p.confirmTransitionTo(s,i,u,(function(e){if(e){var r=E(s),a=s.key,u=s.state;if(n)if(t.pushState({key:a,state:u},null,r),o)window.location.href=r;else{var l=_.indexOf(C.location.key),c=_.slice(0,l+1);c.push(s.key),_=c,m({action:i,location:s})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",s=D(e,r,f(),C.location);p.confirmTransitionTo(s,i,u,(function(e){if(e){var r=E(s),a=s.key,u=s.state;if(n)if(t.replaceState({key:a,state:u},null,r),o)window.location.replace(r);else{var l=_.indexOf(C.location.key);-1!==l&&(_[l]=s.key),m({action:i,location:s})}else window.location.replace(r)}}))},go:I,goBack:function(){I(-1)},goForward:function(){I(1)},block:function(e){void 0===e&&(e=!1);var t=p.setPrompt(e);return N||(S(1),N=!0),function(){return N&&(N=!1,S(-1)),t()}},listen:function(e){var t=p.appendListener(e);return S(1),function(){S(-1),t()}}};return C}var B=1073741823,q="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:{};function $(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}const K=t.createContext||function(e,n){var r,i,s,o="__create-react-context-"+((q[s="__global_unique_id__"]=(q[s]||0)+1)+"__"),a=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).emitter=$(t.props.value),t}I(t,e);var r=t.prototype;return r.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(r,i)?(t="function"==typeof n?n(r,i):B,0!=(t|=0)&&this.emitter.set(e.value,t)):t=0}},r.render=function(){return this.props.children},t}(t.Component);a.childContextTypes=((r={})[o]=S().object.isRequired,r);var u=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!=((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}I(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?B:t},r.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?B:e},r.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},r.getValue=function(){return this.context[o]?this.context[o].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(t.Component);return u.contextTypes=((i={})[o]=S().object,i),{Provider:a,Consumer:u}};var W=n(658),H=n.n(W);function G(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n(864);var Q=n(679),J=n.n(Q),Y=function(e){var t=K();return t.displayName=e,t},X=Y("Router-History"),Z=Y("Router"),ee=function(e){function n(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}I(n,e),n.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var r=n.prototype;return r.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},r.render=function(){return t.createElement(Z.Provider,{value:{history:this.props.history,location:this.state.location,match:n.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},t.createElement(X.Provider,{children:this.props.children||null,value:this.props.history}))},n}(t.Component);t.Component,t.Component;var te={},ne=0;function re(e,t){void 0===t&&(t={}),("string"==typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,s=void 0!==i&&i,o=n.strict,a=void 0!==o&&o,u=n.sensitive,l=void 0!==u&&u;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=te[n]||(te[n]={});if(r[e])return r[e];var i=[],s={regexp:H()(e,i,t),keys:i};return ne<1e4&&(r[e]=s,ne++),s}(n,{end:s,strict:a,sensitive:l}),i=r.regexp,o=r.keys,u=i.exec(e);if(!u)return null;var c=u[0],h=u.slice(1),d=e===c;return s&&!d?null:{path:n,url:"/"===n&&""===c?"/":c,isExact:d,params:o.reduce((function(e,t,n){return e[t.name]=h[n],e}),{})}}),null)}var ie=function(e){function n(){return e.apply(this,arguments)||this}return I(n,e),n.prototype.render=function(){var e=this;return t.createElement(Z.Consumer,null,(function(n){n||x(!1);var r=e.props.location||n.location,i=k({},n,{location:r,match:e.props.computedMatch?e.props.computedMatch:e.props.path?re(r.pathname,e.props):n.match}),s=e.props,o=s.children,a=s.component,u=s.render;return Array.isArray(o)&&function(e){return 0===t.Children.count(e)}(o)&&(o=null),t.createElement(Z.Provider,{value:i},i.match?o?"function"==typeof o?o(i):o:a?t.createElement(a,i):u?u(i):null:"function"==typeof o?o(i):null)}))},n}(t.Component);t.Component;var se=function(e){function n(){return e.apply(this,arguments)||this}return I(n,e),n.prototype.render=function(){var e=this;return t.createElement(Z.Consumer,null,(function(n){n||x(!1);var r,i,s=e.props.location||n.location;return t.Children.forEach(e.props.children,(function(e){if(null==i&&t.isValidElement(e)){r=e;var o=e.props.path||e.props.from;i=o?re(s.pathname,k({},e.props,{path:o})):n.match}})),i?t.cloneElement(r,{location:s,computedMatch:i}):null}))},n}(t.Component);t.useContext;const oe=function(e){var n=function(n){var r=n.wrappedComponentRef,i=G(n,["wrappedComponentRef"]);return t.createElement(Z.Consumer,null,(function(n){return n||x(!1),t.createElement(e,k({},i,n,{ref:r}))}))};return n.displayName="withRouter("+(e.displayName||e.name)+")",n.WrappedComponent=e,J()(n,e)}((function(e){var n=e.title,r=e.img,i=e.history,s=e.url,o=e.match;return t.createElement("div",{className:"menu-lists",onClick:function(){i.push("".concat(o.url).concat(s)),console.log(1)}},t.createElement("div",{className:"bg-img",style:{backgroundImage:"url(".concat(r,")")}}),t.createElement("div",{className:"contents"},t.createElement("h1",{className:"title"},n.toUpperCase()),t.createElement("span",{className:"sub"},"Shop Now")))}));function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ue=["id"];function le(){return(le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e,t){if(t&&("object"===ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(a,e);var n,r,i,s,o=(i=a,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=fe(i);if(s){var n=fe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return de(this,e)});function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this)).state={sections:[{title:"Shampoos",img:"https://manilla.lt/img/cms/hair%20shampoo.jpg",id:1,url:"shampoos"},{title:"Shower Gels",img:"https://static5.depositphotos.com/1001001/469/i/600/depositphotos_4696043-stock-photo-bath-amenities.jpg",id:2,url:""},{title:"Deaodorants",img:"https://img.mensxp.com/media/content/2018/Apr/roll-on-deodorants-thatll-ensure-you-never-smell-bad-1400x653-1523615135.jpg",id:3,url:""},{title:"Body Powders",img:"https://blog.fendrihan.com/wp-content/uploads/2017/01/Lifestyle2-4.jpg",id:4,url:""},{title:"Face Scrubs",img:"https://www.apetogentleman.com/wp-content/uploads/2020/05/best-face-scrubs.jpg",id:5,url:""},{title:"Bar Soaps",img:"https://hips.hearstapps.com/vader-prod.s3.amazonaws.com/1579902150-bar-soap-for-men-10-1579902145.jpg",id:6,url:""}]},e}return n=a,(r=[{key:"render",value:function(){return t.createElement("div",{className:"menu"},this.state.sections.map((function(e){var n=e.id,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,ue);return t.createElement(oe,le({key:n},r))})))}}])&&ce(n.prototype,r),a}(t.Component);const me=function(){return t.createElement("div",{className:"homepage"},t.createElement(pe,null))},ge=[{title:"Shampoos",id:1,routeName:"shampoos",items:[{id:1,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/fuzzylogic_2_360x.jpg?v=1573059489",name:"Billy Jealousy Fuzzy Logic Strengthening Shampoo",price:22},{id:2,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/grooming-lounge_2122_2992265_2000x.jpg?v=1574185189",name:"Acqua Di Parma Colonia Hair Shampoo",price:52},{id:3,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/Duke-Cannon-News-Anchor-Shampoo_2000x.jpg?v=1594826249",name:"Duke Cannon News Anchor",price:14},{id:4,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/Jack_Black_All_Over_Wash_10_oz_2000x.png?v=1580742599",name:"Jack Black All-Over Wash",price:21},{id:5,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/8e18iq9nvyo6m_xgfigwccrmplnoz_1mia3plpxfixy_2000x.png?v=1573061733",name:"Brickell Daily Strengthening Shampoo",price:20},{id:6,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/2581912_2000x.jpg?v=1573062467",name:"Billy Jealousy Monsoon Mist Tea Tree Shampoo",price:16},{id:7,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/ms-ds_2000x.jpg?v=1573663040",name:"MenScience Daily Shampoo",price:26},{id:8,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/evergreen_2000x.png?v=1573062245",name:"Brickell All in One Wash for Men",price:26},{id:9,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/BaxterDeepCleanShampoo_2000x.jpg?v=1605735064",name:"Baxter of California Deep Clean Shampoo",price:34}]},{title:"Shower-Gels",id:2,routeName:"ShowerGels",items:[{id:1,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/molton_brown_tobacco_absolute_body_wash_front_2000x.jpg?v=1630504808",name:"Molton Brown Tobacco Shower Gel",price:32},{id:2,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/molton_brown_russian_leather_body_wash_front_2000x.jpg?v=1573062524",name:"Molton Brown Russian  Shower Gel",price:32},{id:3,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/invigoratingmintbodywash_2000x.png?v=1573061721",name:"Brickell Invigorating Mint Body Wash",price:25},{id:4,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/molton_brown_eucalyptus_body_wash_front_2000x.jpg?v=1573058864",name:"Molton Brown Infusing  Shower Gel",price:"Sold out"},{id:5,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/molton_brown_ylang_ylang_body_wash_front_2000x.jpg?v=1573058890",name:"Molton Brown Relaxing Ylang-Ylang Shower Gel",price:23},{id:6,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/11.ultra_clean_shower_gel_front_-700x700_2000x.jpg?v=1573665318",name:"Recipe for Men Ultra Clean Shower Gel",price:20},{id:7,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/DevilsDelightWash_2000x.jpg?v=1628524464",name:"Billy Jealousy Devil's Delight",price:"Sold Out"},{id:8,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/molton_brown_orange_bergamot_body_wash_front_2000x.jpg?v=1573060306",name:"Molton Brown Orange Bergamot Shower Gel",price:32}]},{title:"DEAODORANTS",id:3,routeName:"DEAODORANTS",items:[{id:1,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/brickell_mint_deodorant_2000x.jpg?v=1573063121",name:"Brickell Fresh Mint Deodorant",price:18},{id:2,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/ursa_major_base_layer_deodorant_2000x.jpg?v=1573062263",name:"Ursa Major Base Layer Deodorant",price:15},{id:3,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/CopyofCopyof75661005_600x.png?v=1622568535",name:"Oars + Alps Natural Deodorant",price:14},{id:4,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/Balla-Sprayr-Original_2000x.jpg?v=1582736634",name:"Balla For Men Body Spray",price:22},{id:5,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/61huc5wfj9l._sy355_600x.jpg?v=1573063018",name:"Taylor of Old Bond Street Deodorant Stick",price:"Sold Out"},{id:6,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/kiehlssuperblyefficientantiperspirantdeodorant_2000x.jpg?v=1573662165",name:"Kiehl's Superbly Efficient Deodorant",price:22},{id:7,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/mg_1439_600x.jpg?v=1578935282",name:"Recipe for Men Antiperspirant Deodorant",price:"Sold Out"}]},{title:"BODY POWDERS",id:4,routeName:"Body Powders",items:[{id:1,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/SuperPowder_600x.jpg?v=1627586151",name:"Grooming Lounge Super Powder",price:20},{id:2,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/AnthonyNoSweat_600x.jpg?v=1622743449",name:"Anthony No Sweat Body Defense",price:22},{id:3,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/bodypowder_2000x.png?v=1623781035",name:"Brickell Stay Fresh Body Powder",price:22},{id:4,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/powder_1_600x.jpg?v=1573060063",name:"MenScience Advanced Body Powderr",price:"Sold Out"},{id:5,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/dry_goods_combo_1_600x.jpg?v=1573062834",name:"Dry Goods Combo Pack",price:39},{id:6,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/Grooming_Lounge_Core_Values_Set_1_600x.jpg?v=1627586879",name:"Grooming Lounge Core Values Kit",price:51}]},{title:"FACE SCRUBS",id:5,routeName:"Face Scrubs",items:[{id:1,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/gl_kitbadges-04_2000x.jpg?v=1573061432",name:"Create Your Own Skincare Regimen Kit",price:"Free"},{id:2,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/brcharcoalfacewash_2000x.png?v=1573061706",name:"Brickell Purifying Charcoal Face Wash",price:25},{id:3,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/algae_facial_cleanser_12oz_2000x.jpg?v=1573057646",name:"Anthony Algae Facial Cleanser",price:36},{id:4,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/kiehls-oil-eliminator-cleanser_600x.jpg?v=1573666088",name:"Kiehl's Oil Eliminator Deep Cleansing Exfoliating Face Wash",price:24},{id:5,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/1118117_02_kiehls_agedefender_dualactioncleanser_150ml_rgb_r1_web_2000x.jpg?v=1573062328",name:"Kiehl's Age Defender Dual-Action Exfoliating Cleanser",price:"Sold Out"}]},{title:"BAR SOAPS",id:6,routeName:"Bar Soaps",items:[{id:1,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/Duke-Cannon-Big-Ass-Brick-Of-Soap-VIctory-Front_646e01a9-b65a-430b-a172-e745c6919754_600x.jpg?v=1584040067",name:"Duke Cannon Supply Co. Big Ass Brick of Soap",price:10},{id:2,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/Grooming-Lounge-Bar-Soap-3-Pack_2000x.jpg?v=1604264799",name:"Grooming Lounge Our Body Bar 3-Pack",price:45},{id:3,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/fgjejwejw_2000x.png?v=1573063084",name:"Taylor of Old Bond Street Bath Soap",price:16},{id:4,img:"https://cdn.shopify.com/s/files/1/0176/8397/2150/products/AnthonyExfoliatingandCleansingBarandBox_3_600x.png?v=1612802705",name:"Anthony Exfoliating",price:20}]}];var ye=n(971),ve={};ve.styleTagTransform=m(),ve.setAttributes=h(),ve.insert=l().bind(null,"head"),ve.domAPI=a(),ve.insertStyleElement=f(),s()(ye.Z,ve),ye.Z&&ye.Z.locals&&ye.Z.locals;var we=n(47),be={};be.styleTagTransform=m(),be.setAttributes=h(),be.insert=l().bind(null,"head"),be.domAPI=a(),be.insertStyleElement=f(),s()(we.Z,be),we.Z&&we.Z.locals&&we.Z.locals;const _e=function(e){var n=e.name,r=e.img,i=e.price;return console.log(i),t.createElement("div",{className:"collection-items"},t.createElement("div",{className:"img",style:{backgroundImage:"url(".concat(r,")")}}),Number.isInteger(i)?t.createElement("div",{className:"collection-footer"},t.createElement("span",{className:"name"},n),t.createElement("span",{className:"price"},"$",i)):t.createElement("div",{className:"collection-footer"},t.createElement("span",{className:"name"},n),t.createElement("span",{className:"price"},i)))};var Ee=["id"];function Ie(){return(Ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const Te=function(e){var n=e.title,r=e.items;return t.createElement("div",{className:"prev-collections"},t.createElement("h1",{className:"title"},n),t.createElement("div",{className:"prev"},r.filter((function(e,t){return t<4})).map((function(e){e.id;var n=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,Ee);return t.createElement(_e,Ie({key:r.id},n))}))))};function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ke=["id"];function Ne(){return(Ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ae(e,t){if(t&&("object"===Se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Oe(e){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(a,e);var n,r,i,s,o=(i=a,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Oe(i);if(s){var n=Oe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ae(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={collections:ge},t}return n=a,(r=[{key:"render",value:function(){var e=this.state.collections;return t.createElement("div",{className:"collections-container"},t.createElement("h1",{style:{fontSize:"50px"}},"Collections"),e.map((function(e){var n=e.id,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,ke);return t.createElement(Te,Ne({key:n},r))})))}}])&&Ce(n.prototype,r),a}(t.Component);var Pe=n(149),De={};De.styleTagTransform=m(),De.setAttributes=h(),De.insert=l().bind(null,"head"),De.domAPI=a(),De.insertStyleElement=f(),s()(Pe.Z,De),Pe.Z&&Pe.Z.locals&&Pe.Z.locals;var Le=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=z(t.props),t}return I(n,e),n.prototype.render=function(){return t.createElement(ee,{history:this.history,children:this.props.children})},n}(t.Component);t.Component;var Me=function(e,t){return"function"==typeof e?e(t):e},Fe=function(e,t){return"string"==typeof e?D(e,null,null,t):e},Ue=function(e){return e},je=t.forwardRef;void 0===je&&(je=Ue);var Ve=je((function(e,n){var r=e.innerRef,i=e.navigate,s=e.onClick,o=G(e,["innerRef","navigate","onClick"]),a=o.target,u=k({},o,{onClick:function(e){try{s&&s(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||a&&"_self"!==a||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return u.ref=Ue!==je&&n||r,t.createElement("a",u)})),ze=je((function(e,n){var r=e.component,i=void 0===r?Ve:r,s=e.replace,o=e.to,a=e.innerRef,u=G(e,["component","replace","to","innerRef"]);return t.createElement(Z.Consumer,null,(function(e){e||x(!1);var r=e.history,l=Fe(Me(o,e.location),e.location),c=l?r.createHref(l):"",h=k({},u,{href:c,navigate:function(){var t=Me(o,e.location),n=P(e.location)===P(Fe(t));(s||n?r.replace:r.push)(t)}});return Ue!==je?h.ref=n||a:h.innerRef=a,t.createElement(i,h)}))})),Be=function(e){return e},qe=t.forwardRef;void 0===qe&&(qe=Be),qe((function(e,n){var r=e["aria-current"],i=void 0===r?"page":r,s=e.activeClassName,o=void 0===s?"active":s,a=e.activeStyle,u=e.className,l=e.exact,c=e.isActive,h=e.location,d=e.sensitive,f=e.strict,p=e.style,m=e.to,g=e.innerRef,y=G(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return t.createElement(Z.Consumer,null,(function(e){e||x(!1);var r=h||e.location,s=Fe(Me(m,r),r),v=s.pathname,w=v&&v.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),b=w?re(r.pathname,{path:w,exact:l,sensitive:d,strict:f}):null,_=!!(c?c(b,r):b),E="function"==typeof u?u(_):u,I="function"==typeof p?p(_):p;_&&(E=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(E,o),I=k({},I,a));var T=k({"aria-current":_&&i||null,className:E,style:I,to:s},y);return Be!==qe?T.ref=n||g:T.innerRef=g,t.createElement(ze,T)}))}));var $e=n(657),Ke=n.n($e),We=function(e,t){return(We=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},He=function(){return(He=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Ge(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function Qe(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Je(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function Ye(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create,Object.create;var Xe=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ze={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,h=(3&s)<<4|a>>4,d=(15&a)<<2|l>>6,f=63&l;u||(f=64,o||(d=64)),r.push(n[c],n[h],n[d],n[f])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Xe(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){var o=((7&i)<<18|(63&(s=e[n++]))<<12|(63&(a=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{s=e[n++];var a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var s=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,a=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==s||null==o||null==a||null==u)throw Error();var l=s<<2|o>>4;if(r.push(l),64!==a){var c=o<<4&240|a>>2;if(r.push(c),64!==u){var h=a<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},et=function(e){return function(e){var t=Xe(e);return Ze.encodeByteArray(t,!0)}(e).replace(/\./g,"")};function tt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=tt(e[n],t[n]));return e}var nt=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();function rt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function it(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rt())}function st(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function ot(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function at(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ut(){var e=rt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function lt(){return"indexedDB"in self&&null!=indexedDB}var ct=function(e){function t(n,r,i){var s=e.call(this,r)||this;return s.code=n,s.customData=i,s.name="FirebaseError",Object.setPrototypeOf(s,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,ht.prototype.create),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}We(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(Error),ht=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},i=this.service+"/"+e,s=this.errors[e],o=s?dt(s,r):"Error",a=this.serviceName+": "+o+" ("+i+").",u=new ct(i,a,r);return u},e}();function dt(e,t){return e.replace(ft,(function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"}))}var ft=/\{\$([^}]+)}/g;function pt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function mt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,s=n;i<s.length;i++){var o=s[i];if(!r.includes(o))return!1;var a=e[o],u=t[o];if(gt(a)&&gt(u)){if(!mt(a,u))return!1}else if(a!==u)return!1}for(var l=0,c=r;l<c.length;l++)if(o=c[l],!n.includes(o))return!1;return!0}function gt(e){return null!==e&&"object"==typeof e}function yt(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var s=i[r];n(s[0],s[1])}return t.length?"&"+t.join("&"):""}function vt(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("="),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function wt(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function bt(e,t){var n=new _t(e,t);return n.subscribe.bind(n)}!function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var s,o,a=this.chain_[0],u=this.chain_[1],l=this.chain_[2],c=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(s=c^u&(l^c),o=1518500249):(s=u^l^c,o=1859775393):r<60?(s=u&l|c&(u|l),o=2400959708):(s=u^l^c,o=3395469782),i=(a<<5|a>>>27)+s+h+o+n[r]&4294967295,h=c,c=l,l=4294967295&(u<<30|u>>>2),u=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,s=this.inbuf_;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++r,++s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++r,++s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e}}();var _t=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=Et),void 0===r.error&&(r.error=Et),void 0===r.complete&&(r.complete=Et);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),s},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function Et(){}function It(e){return e&&e._delegate?e._delegate:e}var Tt,St=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),kt="[DEFAULT]",Nt=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new nt;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:kt})}catch(e){}try{for(var r=Qe(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var s=Je(i.value,2),o=s[0],a=s[1],u=this.normalizeInstanceIdentifier(o);try{var l=this.getOrInitializeService({instanceIdentifier:u});a.resolve(l)}catch(e){}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=kt),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var e;return function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(Ye(Ye([],Je(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))),Je(e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=kt),this.instances.has(e)},e.prototype.getOptions=function(e){return void 0===e&&(e=kt),this.instancesOptions.get(e)||{}},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var r=e.options,i=void 0===r?{}:r,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var o=this.getOrInitializeService({instanceIdentifier:s,options:i});try{for(var a=Qe(this.instancesDeferred.entries()),u=a.next();!u.done;u=a.next()){var l=Je(u.value,2),c=l[0],h=l[1];s===this.normalizeInstanceIdentifier(c)&&h.resolve(o)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var s=this.instances.get(r);return s&&e(s,r),function(){i.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,r,i=this.onInitCallbacks.get(t);if(i)try{for(var s=Qe(i),o=s.next();!o.done;o=s.next()){var a=o.value;try{a(e,t)}catch(e){}}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===kt?void 0:t),options:i}),this.instances.set(n,s),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(e){}return s||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=kt),this.component?this.component.multipleInstances?e:kt:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}(),Ct=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Nt(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();function xt(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var At,Ot=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(At||(At={}));var Rt={debug:At.DEBUG,verbose:At.VERBOSE,info:At.INFO,warn:At.WARN,error:At.ERROR,silent:At.SILENT},Pt=At.INFO,Dt=((Tt={})[At.DEBUG]="log",Tt[At.VERBOSE]="log",Tt[At.INFO]="info",Tt[At.WARN]="warn",Tt[At.ERROR]="error",Tt),Lt=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=(new Date).toISOString(),s=Dt[t];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[s].apply(console,xt(["["+i+"]  "+e.name+":"],n))}},Mt=function(){function e(e){this.name=e,this._logLevel=Pt,this._logHandler=Lt,this._userLogHandler=null,Ot.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in At))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?Rt[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,xt([this,At.DEBUG],e)),this._logHandler.apply(this,xt([this,At.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,xt([this,At.VERBOSE],e)),this._logHandler.apply(this,xt([this,At.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,xt([this,At.INFO],e)),this._logHandler.apply(this,xt([this,At.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,xt([this,At.WARN],e)),this._logHandler.apply(this,xt([this,At.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,xt([this,At.ERROR],e)),this._logHandler.apply(this,xt([this,At.ERROR],e))},e}();class Ft{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Ut="@firebase/app",jt=new Mt("@firebase/app"),Vt="[DEFAULT]",zt={[Ut]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Bt=new Map,qt=new Map;function $t(e,t){try{e.container.addComponent(t)}catch(n){jt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Kt(e,t){e.container.addOrOverwriteComponent(t)}function Wt(e){const t=e.name;if(qt.has(t))return jt.debug(`There were multiple attempts to register component ${t}.`),!1;qt.set(t,e);for(const t of Bt.values())$t(t,e);return!0}function Ht(e,t){return e.container.getProvider(t)}function Gt(e,t,n=Vt){Ht(e,t).clearInstance(n)}function Qt(){qt.clear()}const Jt=new ht("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Yt{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new St("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jt.create("app-deleted",{appName:this._name})}}const Xt="9.0.0";function Zt(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:Vt,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw Jt.create("bad-app-name",{appName:String(r)});const i=Bt.get(r);if(i){if(mt(e,i.options)&&mt(n,i.config))return i;throw Jt.create("duplicate-app",{appName:r})}const s=new Ct(r);for(const e of qt.values())s.addComponent(e);const o=new Yt(e,n,s);return Bt.set(r,o),o}function en(e=Vt){const t=Bt.get(e);if(!t)throw Jt.create("no-app",{appName:e});return t}function tn(){return Array.from(Bt.values())}async function nn(e){const t=e.name;Bt.has(t)&&(Bt.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function rn(e,t,n){var r;let i=null!==(r=zt[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void jt.warn(e.join(" "))}Wt(new St(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}function sn(e,t){if(null!==e&&"function"!=typeof e)throw Jt.create("invalid-log-argument");!function(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=Rt[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var o=i.map((function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((function(e){return e})).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:At[n].toLowerCase(),message:o,args:i,type:t.name})}},r=0,i=Ot;r<i.length;r++)n(i[r])}(e,t)}function on(e){var t;t=e,Ot.forEach((function(e){e.setLogLevel(t)}))}Wt(new St("platform-logger",(e=>new Ft(e)),"PRIVATE")),rn(Ut,"0.7.0",undefined),rn("fire-js","");class an{constructor(e,t){this._delegate=e,this.firebase=t,$t(e,new St("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),nn(this._delegate))))}_getService(e,t=Vt){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=Vt){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){$t(this._delegate,e)}_addOrOverwriteComponent(e){Kt(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const un=new ht("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ln=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e,i={}){const s=Zt(e,i);if(pt(n,s.name))return n[s.name];const o=new t(s,r);return n[s.name]=o,o},app:i,registerVersion:rn,setLogLevel:on,onLog:sn,apps:null,SDK_VERSION:Xt,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(Wt(e)&&"PUBLIC"===e.type){const o=(e=i())=>{if("function"!=typeof e[s])throw un.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&tt(o,e.serviceProps),r[s]=o,t.prototype[s]=function(...t){return this._getService.bind(this,n).apply(this,e.multipleInstances?t:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!pt(n,e=e||Vt))throw un.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(an);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){tt(n,e)},createSubscribe:bt,ErrorFactory:ht,deepExtend:tt}),n}(),cn=new Mt("@firebase/app-compat");if("object"==typeof self&&self.self===self&&void 0!==self.firebase){cn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&cn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const hn=ln;rn("@firebase/app-compat","0.1.1",void 0);const dn=hn;dn.registerVersion("firebase","9.0.1","app-compat");const fn=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},pn=new ht("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),mn=new Mt("@firebase/auth");function gn(e,...t){mn.logLevel<=At.ERROR&&mn.error(`Auth (${Xt}): ${e}`,...t)}function yn(e,...t){throw wn(e,...t)}function vn(e,...t){return wn(e,...t)}function wn(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return pn.create(e,...t)}function bn(e,t,...n){if(!e)throw wn(t,...n)}function _n(e){const t="INTERNAL ASSERTION FAILED: "+e;throw gn(t),new Error(t)}function En(e,t){e||_n(t)}const In=new Map;function Tn(e){En(e instanceof Function,"Expected a class definition");let t=In.get(e);return t?(En(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,In.set(e,t),t)}function Sn(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function kn(){return"http:"===Nn()||"https:"===Nn()}function Nn(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Cn{constructor(e,t){this.shortDelay=e,this.longDelay=t,En(t>e,"Short delay should be less than long delay!"),this.isMobile=it()||at()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(kn()||ot()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function xn(e,t){En(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class An{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void _n("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void _n("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void _n("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const On={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded"},Rn=new Cn(3e4,6e4);function Pn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Dn(e,t,n,r,i={}){return Ln(e,i,(()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=yt(Object.assign({key:e.config.apiKey},s)).slice(1),a=new(An.headers());return a.set("Content-Type","application/json"),a.set("X-Client-Version",e._getSdkClientVersion()),e.languageCode&&a.set("X-Firebase-Locale",e.languageCode),An.fetch()(Fn(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Ln(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},On),t);try{const t=new Un(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw jn(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=(i.ok?s.errorMessage:s.error.message).split(" : ")[0];if("FEDERATED_USER_ID_ALREADY_LINKED"===t)throw jn(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===t)throw jn(e,"email-already-in-use",s);yn(e,r[t]||t.toLowerCase().replace(/[_\s]+/g,"-"))}}catch(t){if(t instanceof ct)throw t;yn(e,"network-request-failed")}}async function Mn(e,t,n,r,i={}){const s=await Dn(e,t,n,r,i);return"mfaPendingCredential"in s&&yn(e,"multi-factor-auth-required",{serverResponse:s}),s}function Fn(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?xn(e.config,i):`${e.config.apiScheme}://${i}`}class Un{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(vn(this.auth,"timeout"))),Rn.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function jn(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=vn(e,t,r);return i.customData._tokenResponse=n,i}function Vn(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function zn(e){return 1e3*Number(e)}function Bn(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return gn("JWT malformed, contained fewer than 3 sections"),null;try{const e=function(e){try{return Ze.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(n);return e?JSON.parse(e):(gn("Failed to decode base64 JWT payload"),null)}catch(e){return gn("Caught error parsing JWT payload as JSON",e),null}}async function qn(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof ct&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class $n{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e.code&&this.schedule(!0))}this.schedule()}}class Kn{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vn(this.lastLoginAt),this.creationTime=Vn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Wn(e){var t;const n=e.auth,r=await e.getIdToken(),i=await qn(e,async function(e,t){return Dn(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));bn(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=Ge(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],a=(u=e.providerData,l=o,[...u.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var u,l;const c=e.isAnonymous,h=!(e.email&&s.passwordHash||(null==a?void 0:a.length)),d=!!c&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Kn(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class Hn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){bn(e.idToken,"internal-error"),bn(void 0!==e.idToken,"internal-error"),bn(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Bn(e);return bn(t,"internal-error"),bn(void 0!==t.exp,"internal-error"),bn(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return bn(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Ln(e,{},(()=>{const n=yt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Fn(e,r,"/v1/token",`key=${i}`);return An.fetch()(s,{method:"POST",headers:{"X-Client-Version":e._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Hn;return n&&(bn("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(bn("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(bn("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Hn,this.toJSON())}_performRefresh(){return _n("not implemented")}}function Gn(e,t){bn("string"==typeof e||void 0===e,"internal-error",{appName:t})}class Qn{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Ge(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new $n(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.metadata=new Kn(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await qn(this,this.stsTokenManager.getToken(this.auth,e));return bn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=It(e),r=await n.getIdToken(t),i=Bn(r);bn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Vn(zn(i.auth_time)),issuedAtTime:Vn(zn(i.iat)),expirationTime:Vn(zn(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=It(e);await Wn(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(bn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Qn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){bn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Wn(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await qn(this,async function(e,t){return Dn(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,u,l;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(u=t.createdAt)&&void 0!==u?u:void 0,y=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=t;bn(v&&E,e,"internal-error");const I=Hn.fromJSON(this.name,E);bn("string"==typeof v,e,"internal-error"),Gn(c,e.name),Gn(h,e.name),bn("boolean"==typeof w,e,"internal-error"),bn("boolean"==typeof b,e,"internal-error"),Gn(d,e.name),Gn(f,e.name),Gn(p,e.name),Gn(m,e.name),Gn(g,e.name),Gn(y,e.name);const T=new Qn({uid:v,auth:e,email:h,emailVerified:w,displayName:c,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(T.providerData=_.map((e=>Object.assign({},e)))),m&&(T._redirectEventId=m),T}static async _fromIdTokenResponse(e,t,n=!1){const r=new Hn;r.updateFromServerResponse(t);const i=new Qn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Wn(i),i}}class Jn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Jn.type="NONE";const Yn=Jn;function Xn(e,t,n){return`firebase:${e}:${t}:${n}`}class Zn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Xn(this.userKey,r.apiKey,i),this.fullPersistenceKey=Xn("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Qn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Zn(Tn(Yn),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Tn(Yn);const s=Xn(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(s);if(t){const r=Qn._fromJSON(e,t);n!==i&&(o=r),i=n;break}}catch(e){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(e){}}))),new Zn(i,e,n)):new Zn(i,e,n)}}function er(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ir(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(tr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(or(t))return"Blackberry";if(ar(t))return"Webos";if(nr(t))return"Safari";if((t.includes("chrome/")||rr(t))&&!t.includes("edge/"))return"Chrome";if(sr(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function tr(e=rt()){return/firefox\//i.test(e)}function nr(e=rt()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function rr(e=rt()){return/crios\//i.test(e)}function ir(e=rt()){return/iemobile/i.test(e)}function sr(e=rt()){return/android/i.test(e)}function or(e=rt()){return/blackberry/i.test(e)}function ar(e=rt()){return/webos/i.test(e)}function ur(e=rt()){return/iphone|ipad|ipod/i.test(e)}function lr(e=rt()){return ur(e)||sr(e)||ar(e)||or(e)||/windows phone/i.test(e)||ir(e)}function cr(e,t=[]){let n;switch(e){case"Browser":n=er(rt());break;case"Worker":n=`${er(rt())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xt}/${r}`}class hr{constructor(e,t){this.app=e,this.config=t,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fr(this),this.idTokenSubscription=new fr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=t.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Tn(t)),this._initializationPromise=this.queue((async()=>{var n;this._deleted||(this.persistenceManager=await Zn.create(this,e),this._deleted||((null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)&&await this._popupRedirectResolver._initialize(this),await this.initializeCurrentUser(t),this._deleted||(this._isInitialized=!0)))})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e):void 0}async initializeCurrentUser(e){var t;let n=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null==n?void 0:n._redirectEventId,s=await this.tryRedirectSignIn(e);r&&r!==i||!(null==s?void 0:s.user)||(n=s.user)}return n?n._redirectEventId?(bn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Wn(e)}catch(e){if("auth/network-request-failed"!==e.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?It(e):null;return t&&bn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&bn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Tn(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ht("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Tn(e)||this._popupRedirectResolver;bn(t,this,"argument-error"),this.redirectPersistenceManager=await Zn.create(this,[Tn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return bn(s,this,"internal-error"),s.then((()=>i(this.currentUser))),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return bn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function dr(e){return It(e)}class fr{constructor(e){this.auth=e,this.observer=null,this.addObserver=bt((e=>this.observer=e))}get next(){return bn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function pr(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function mr(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class gr{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _n("not implemented")}_getIdTokenResponse(e){return _n("not implemented")}_linkToIdToken(e,t){return _n("not implemented")}_getReauthenticationResolver(e){return _n("not implemented")}}async function yr(e,t){return Dn(e,"POST","/v1/accounts:resetPassword",Pn(e,t))}async function vr(e,t){return Dn(e,"POST","/v1/accounts:update",t)}async function wr(e,t){return Dn(e,"POST","/v1/accounts:sendOobCode",Pn(e,t))}class br extends gr{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new br(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new br(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return async function(e,t){return Mn(e,"POST","/v1/accounts:signInWithPassword",Pn(e,t))}(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return Mn(e,"POST","/v1/accounts:signInWithEmailLink",Pn(e,t))}(e,{email:this._email,oobCode:this._password});default:yn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return vr(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return Mn(e,"POST","/v1/accounts:signInWithEmailLink",Pn(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:yn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function _r(e,t){return Mn(e,"POST","/v1/accounts:signInWithIdp",Pn(e,t))}class Er extends gr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Er(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):yn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Ge(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Er(n,r);return Object.assign(s,i),s}_getIdTokenResponse(e){return _r(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,_r(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,_r(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=yt(t)}return e}}const Ir={USER_NOT_FOUND:"user-not-found"};class Tr extends gr{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Tr({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Tr({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Mn(e,"POST","/v1/accounts:signInWithPhoneNumber",Pn(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Mn(e,"POST","/v1/accounts:signInWithPhoneNumber",Pn(e,t));if(n.temporaryProof)throw jn(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Mn(e,"POST","/v1/accounts:signInWithPhoneNumber",Pn(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Ir)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Tr({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Sr{constructor(e){var t,n,r,i,s,o;const a=vt(wt(e)),u=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);bn(u&&l&&c,"argument-error"),this.apiKey=u,this.operation=c,this.code=l,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=vt(wt(e)).link,n=t?vt(wt(t)).deep_link_id:null,r=vt(wt(e)).deep_link_id;return(r?vt(wt(r)).link:null)||r||n||t||e}(e);try{return new Sr(t)}catch(e){return null}}}class kr{constructor(){this.providerId=kr.PROVIDER_ID}static credential(e,t){return br._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Sr.parseLink(t);return bn(n,"argument-error"),br._fromEmailAndCode(e,n.code,n.tenantId)}}kr.PROVIDER_ID="password",kr.EMAIL_PASSWORD_SIGN_IN_METHOD="password",kr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Nr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Cr extends Nr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class xr extends Cr{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return bn("providerId"in t&&"signInMethod"in t,"argument-error"),Er._fromParams(t)}credential(e){return this._credential(e)}_credential(e){return bn(e.idToken||e.accessToken,"argument-error"),Er._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return xr.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return xr.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:s,providerId:o}=e;if(!(n||r||t||i))return null;if(!o)return null;try{return new xr(o)._credential({idToken:t,accessToken:n,rawNonce:s,pendingToken:i})}catch(e){return null}}}class Ar extends Cr{constructor(){super("facebook.com")}static credential(e){return Er._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Ar.credential(e.oauthAccessToken)}catch(e){return null}}}Ar.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ar.PROVIDER_ID="facebook.com";class Or extends Cr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Er._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Or.credential(t,n)}catch(e){return null}}}Or.GOOGLE_SIGN_IN_METHOD="google.com",Or.PROVIDER_ID="google.com";class Rr extends Cr{constructor(){super("github.com")}static credential(e){return Er._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Rr.credential(e.oauthAccessToken)}catch(e){return null}}}Rr.GITHUB_SIGN_IN_METHOD="github.com",Rr.PROVIDER_ID="github.com";class Pr extends gr{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return _r(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,_r(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,_r(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new Pr(n,i):null}static _create(e,t){return new Pr(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Dr extends Cr{constructor(){super("twitter.com")}static credential(e,t){return Er._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Dr.credential(t,n)}catch(e){return null}}}async function Lr(e,t){return Mn(e,"POST","/v1/accounts:signUp",Pn(e,t))}Dr.TWITTER_SIGN_IN_METHOD="twitter.com",Dr.PROVIDER_ID="twitter.com";class Mr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await Qn._fromIdTokenResponse(e,n,r),s=Fr(n);return new Mr({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Fr(n);return new Mr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Fr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Ur extends ct{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,this.name="FirebaseError",Object.setPrototypeOf(this,Ur.prototype),this.appName=e.name,this.code=t.code,this.tenantId=null!==(i=e.tenantId)&&void 0!==i?i:void 0,this.serverResponse=t.customData.serverResponse}static _fromErrorAndOperation(e,t,n,r){return new Ur(e,t,n,r)}}function jr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Ur._fromErrorAndOperation(e,n,t,r);throw n}))}function Vr(e){return new Set(e.map((({providerId:e})=>e)).filter((e=>!!e)))}async function zr(e,t,n=!1){const r=await qn(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Mr._forOperation(e,"link",r)}async function Br(e,t,n){await Wn(t);const r=!1===e?"provider-already-linked":"no-such-provider";bn(Vr(t.providerData).has(n)===e,t.auth,r)}async function qr(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=await qn(e,jr(r,i,t,e),n);bn(s.idToken,r,"internal-error");const o=Bn(s.idToken);bn(o,r,"internal-error");const{sub:a}=o;return bn(e.uid===a,r,"user-mismatch"),Mr._forOperation(e,i,s)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&yn(r,"user-mismatch"),e}}async function $r(e,t,n=!1){const r="signIn",i=await jr(e,r,t),s=await Mr._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Kr(e,t){return $r(dr(e),t)}async function Wr(e,t){const n=It(e);return await Br(!1,n,t.providerId),zr(n,t)}async function Hr(e,t){return qr(It(e),t)}class Gr{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Qr._fromServerResponse(e,t):yn(e,"internal-error")}}class Qr extends Gr{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Qr(t)}}function Jr(e,t,n){var r;bn((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),bn(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(bn(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iosBundleId=n.iOS.bundleId),n.android&&(bn(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Yr(e,t){const n=It(e),r=await yr(n,{oobCode:t}),i=r.requestType;switch(bn(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":bn(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":bn(r.mfaInfo,n,"internal-error");default:bn(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Gr._fromServerResponse(dr(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function Xr(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await qn(e,vr(r,i));await e._updateTokensIfNecessary(s,!0)}class Zr{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class ei extends Zr{constructor(e,t,n,r){super(e,t,n),this.username=r}}class ti extends Zr{constructor(e,t){super(e,"facebook.com",t)}}class ni extends ei{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class ri extends Zr{constructor(e,t){super(e,"google.com",t)}}class ii extends ei{constructor(e,t,n){super(e,"twitter.com",t,n)}}function si(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=Bn(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new Zr(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new ti(s,i);case"github.com":return new ni(s,i);case"google.com":return new ri(s,i);case"twitter.com":return new ii(s,i,e.screenName||null);case"custom":case"anonymous":return new Zr(s,null);default:return new Zr(s,r,i)}}(n)}class oi{constructor(e,t){this.type=e,this.credential=t}static _fromIdtoken(e){return new oi("enroll",e)}static _fromMfaPendingCredential(e){return new oi("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return oi._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return oi._fromIdtoken(e.multiFactorSession.idToken)}return null}}class ai{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=dr(e),r=(t.serverResponse.mfaInfo||[]).map((e=>Gr._fromServerResponse(n,e)));bn(t.serverResponse.mfaPendingCredential,n,"internal-error");const i=oi._fromMfaPendingCredential(t.serverResponse.mfaPendingCredential);return new ai(i,r,(async e=>{const r=await e._process(n,i);delete t.serverResponse.mfaInfo,delete t.serverResponse.mfaPendingCredential;const s=Object.assign(Object.assign({},t.serverResponse),{idToken:r.idToken,refreshToken:r.refreshToken});switch(t.operationType){case"signIn":const e=await Mr._fromIdTokenResponse(n,t.operationType,s);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return bn(t.user,n,"internal-error"),Mr._forOperation(t.user,t.operationType,s);default:yn(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class ui{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>Gr._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new ui(e)}async getSession(){return oi._fromIdtoken(await this.user.getIdToken())}async enroll(e,t){const n=e,r=await this.getSession(),i=await qn(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"==typeof e?e:e.uid,n=await this.user.getIdToken(),r=await qn(this.user,function(e,t){return Dn(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Object.assign({tenantId:e.tenantId},t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((({uid:e})=>e!==t)),await this.user._updateTokensIfNecessary(r);try{await this.user.reload()}catch(e){if("auth/user-token-expired"!==e.code)throw e}}}const li=new WeakMap,ci="__sak";class hi{constructor(e,t){this.storage=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ci,"1"),this.storage.removeItem(ci),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}}class di extends hi{constructor(){super(window.localStorage,"LOCAL"),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=rt();return nr(e)||ur(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=lr(),this._shouldAllowMigration=!0,this.boundEventHandler=this.onStorageEvent.bind(this)}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);ut()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}di.type="LOCAL";const fi=di;class pi extends hi{constructor(){super(window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}pi.type="SESSION";const mi=pi;class gi{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new gi(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function yi(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}gi.receivers=[];class vi{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const u=yi("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===u)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function wi(){return window}function bi(){return void 0!==wi().WorkerGlobalScope&&"function"==typeof wi().importScripts}const _i="firebaseLocalStorageDb",Ei="firebaseLocalStorage",Ii="fbase_key";class Ti{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Si(e,t){return e.transaction([Ei],t?"readwrite":"readonly").objectStore(Ei)}function ki(){const e=indexedDB.open(_i,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Ei,{keyPath:Ii})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Ei)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(_i);return new Ti(e).toPromise()}(),t(await ki()))}))}))}async function Ni(e,t,n){const r=Si(e,!0).put({[Ii]:t,value:n});return new Ti(r).toPromise()}function Ci(e,t){const n=Si(e,!0).delete(t);return new Ti(n).toPromise()}class xi{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await ki()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bi()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gi._getInstance(bi()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new vi(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ki();return await Ni(e,ci,"1"),await Ci(e,ci),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Ni(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Si(e,!1).get(t),r=await new Ti(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Ci(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Si(e,!1).getAll();return new Ti(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}xi.type="LOCAL";const Ai=xi;function Oi(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=vn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Ri(e){return`__${e}${Math.floor(1e6*Math.random())}`}const Pi=1e12;class Di{constructor(e){this.auth=e,this.counter=Pi,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Li(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Pi;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Pi;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Pi;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Li{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;bn(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let e=0;e<50;e++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}();const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(e){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(e){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Mi=Ri("rcb"),Fi=new Cn(3e4,6e4);class Ui{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!wi().grecaptcha}load(e,t=""){return bn(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)?Promise.resolve(wi().grecaptcha):new Promise(((n,r)=>{const i=wi().setTimeout((()=>{r(vn(e,"network-request-failed"))}),Fi.get());wi()[Mi]=()=>{wi().clearTimeout(i),delete wi()[Mi];const s=wi().grecaptcha;if(!s)return void r(vn(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)},Oi(`https://www.google.com/recaptcha/api.js??${yt({onload:Mi,render:"explicit",hl:t})}`).catch((()=>{clearTimeout(i),r(vn(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!wi().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ji{async load(e){return new Di(e)}clearedOneInstance(){}}const Vi="recaptcha",zi={theme:"light",type:"image"};class Bi{constructor(e,t=Object.assign({},zi),n){this.parameters=t,this.type=Vi,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=dr(n),this.isInvisible="invisible"===this.parameters.size,bn("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof e?document.getElementById(e):e;bn(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ji:new Ui,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha();return t.getResponse(e)||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){bn(!this.parameters.sitekey,this.auth,"argument-error"),bn(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),bn("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"==typeof e)e(t);else if("string"==typeof e){const n=wi()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){bn(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){bn(kn()&&!bi(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await Dn(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);bn(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return bn(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class qi{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Tr._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function $i(e,t,n){var r;const i=await n.verify();try{let s;if(bn("string"==typeof i,e,"argument-error"),bn(n.type===Vi,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s)return bn("enroll"===t.type,e,"internal-error"),(await function(e,t){return Dn(e,"POST","/v2/accounts/mfaEnrollment:start",Object.assign({tenantId:e.tenantId},t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{bn("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;return bn(n,e,"missing-multi-factor-info"),(await function(e,t){return Dn(e,"POST","/v2/accounts/mfaSignIn:start",Object.assign({tenantId:e.tenantId},t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Dn(e,"POST","/v1/accounts:sendVerificationCode",Pn(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Ki{constructor(e){this.providerId=Ki.PROVIDER_ID,this.auth=dr(e)}verifyPhoneNumber(e,t){return $i(this.auth,e,It(t))}static credential(e,t){return Tr._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ki.credentialFromTaggedObject(t)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Tr._fromTokenResponse(t,n):null}}function Wi(e,t){return t?Tn(t):(bn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ki.PROVIDER_ID="phone",Ki.PHONE_SIGN_IN_METHOD="phone";class Hi extends gr{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _r(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _r(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _r(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Gi(e){return $r(e.auth,new Hi(e),e.bypassAuthState)}function Qi(e){const{auth:t,user:n}=e;return bn(n,t,"internal-error"),qr(n,new Hi(e),e.bypassAuthState)}async function Ji(e){const{auth:t,user:n}=e;return bn(n,t,"internal-error"),zr(n,new Hi(e),e.bypassAuthState)}class Yi{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Gi;case"linkViaPopup":case"linkViaRedirect":return Ji;case"reauthViaPopup":case"reauthViaRedirect":return Qi;default:yn(this.auth,"internal-error")}}resolve(e){En(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){En(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Xi=new Cn(2e3,1e4);class Zi extends Yi{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Zi.currentPopupAction&&Zi.currentPopupAction.cancel(),Zi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return bn(e,this.auth,"internal-error"),e}async onExecution(){En(1===this.filter.length,"Popup operations only handle one event");const e=yi();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(vn(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(vn(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(e,Xi.get())};e()}}Zi.currentPopupAction=null;const es=new Map;class ts extends Yi{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=es.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=is(t),r="true"===await rs(e)._get(n);return await rs(e)._remove(n),r}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}es.set(this.auth._key(),e)}return e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function ns(e,t){return rs(e)._set(is(t),"true")}function rs(e){return Tn(e._redirectPersistence)}function is(e){return Xn("pendingRedirect",e.config.apiKey,e.name)}async function ss(e,t,n=!1){const r=dr(e),i=Wi(r,t),s=new ts(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function os(e){const t=yi(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class as{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ls(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!ls(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(vn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(us(e))}saveEventToCache(e){this.cachedEventUids.add(us(e)),this.lastProcessedEventTime=Date.now()}}function us(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function ls({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}async function cs(e,t={}){return Dn(e,"GET","/v1/projects",t)}const hs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ds=/^https?/;function fs(e){const t=Sn(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!ds.test(n))return!1;if(hs.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const ps=new Cn(3e4,6e4);function ms(){const e=wi().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}let gs=null;function ys(e){return gs=gs||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){ms(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ms(),n(vn(e,"network-request-failed"))},timeout:ps.get()})}if(null===(i=null===(r=wi().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=wi().gapi)||void 0===s?void 0:s.load)){const t=Ri("iframefcb");return wi()[t]=()=>{gapi.load?o():n(vn(e,"network-request-failed"))},Oi(`https://apis.google.com/js/api.js?onload=${t}`)}o()}})).catch((e=>{throw gs=null,e}))}(e),gs}const vs=new Cn(5e3,15e3),ws={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},bs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _s(e){const t=e.config;bn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?xn(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:Xt},i=bs.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${yt(r).slice(1)}`}const Es={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Is{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Ts(e,t,n,r,i,s){bn(e.config.authDomain,e,"auth-domain-config-required"),bn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Xt,eventId:i};if(t instanceof Nr){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Cr){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const e of Object.keys(a))void 0===a[e]&&delete a[e];return`${function({config:e}){return e.emulator?xn(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${yt(a).slice(1)}`}const Ss="webStorageSupport";class ks extends class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return _n("unexpected MultiFactorSessionType")}}}{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new ks(e)}_finalizeEnroll(e,t,n){return function(e,t){return Dn(e,"POST","/v2/accounts/mfaEnrollment:finalize",Object.assign({tenantId:e.tenantId},t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return Dn(e,"POST","/v2/accounts/mfaSignIn:finalize",Object.assign({tenantId:e.tenantId},t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}var Ns;class Cs{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){bn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function xs(){return window}Ns="Browser",Wt(new St("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),{apiKey:r,authDomain:i}=n.options;return(e=>{bn(r&&!r.includes(":"),"invalid-api-key",{appName:e.name}),bn(!(null==i?void 0:i.includes(":")),"argument-error",{appName:e.name});const n={apiKey:r,authDomain:i,clientPlatform:Ns,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cr(Ns)},s=new hr(e,n);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Tn);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(s,t),s})(n)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Wt(new St("auth-internal",(e=>(e=>new Cs(e))(dr(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),rn("@firebase/auth","0.17.1",void 0);class As extends as{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function Os(e){const t=await Ps()._get(Ds(e));return t&&await Ps()._remove(Ds(e)),t}function Rs(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}function Ps(){return Tn(fi)}function Ds(e){return Xn("authEvent",e.config.apiKey,e.name)}function Ls(e){if(!(null==e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return vt(n.join("?"))}function Ms(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:vn("no-auth-event")}}function Fs(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Us(e=rt()){return!("file:"!==Fs()&&"ionic:"!==Fs()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function js(){try{const e=self.localStorage,t=yi();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(e=rt()){return ut()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(e=rt()){return/Edge\/\d+/.test(e)}(e)}()||lt()}catch(e){return Vs()&&lt()}return!1}function Vs(){return void 0!==n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function zs(){return("http:"===Fs()||"https:"===Fs()||ot()||Us())&&!(at()||st())&&js()&&!Vs()}function Bs(){return Us()&&"undefined"!=typeof document}const qs={LOCAL:"local",NONE:"none",SESSION:"session"},$s=bn,Ks="persistence";async function Ws(e){await e._initializationPromise;const t=Hs(),n=Xn(Ks,e.config.apiKey,e.name);(null==t?void 0:t.sessionStorage)&&t.sessionStorage.setItem(n,e._getPersistence())}function Hs(){return"undefined"!=typeof window?window:null}const Gs=bn;class Qs{constructor(){this.browserResolver=Tn(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mi,this._completeRedirectFn=ss}async _openPopup(e,t,n,r){var i;return En(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()"),function(e,t,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},Es),{width:r.toString(),height:i.toString(),top:s,left:o}),l=rt().toLowerCase();n&&(a=rr(l)?"_blank":n),tr(l)&&(t=t||"http://localhost",u.scrollbars="yes");const c=Object.entries(u).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=rt()){var t;return ur(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Is(null);const h=window.open(t||"",a,c);bn(h,e,"popup-blocked");try{h.focus()}catch(e){}return new Is(h)}(e,Ts(e,t,n,Sn(),r),yi())}async _openRedirect(e,t,n,r){var i;return await this._originValidation(e),i=Ts(e,t,n,Sn(),r),wi().location.href=i,new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(En(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n}async initAndGetManager(e){const t=await async function(e){const t=await ys(e),n=wi().gapi;return bn(n,e,"internal-error"),t.open({where:document.body,url:_s(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ws,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=vn(e,"network-request-failed"),s=wi().setTimeout((()=>{r(i)}),vs.get());function o(){wi().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new as(e);return t.register("authEvent",(t=>(bn(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ss,{type:Ss},(n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),yn(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await cs(e);for(const e of t)try{if(fs(e))return}catch(e){}yn(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return lr()||nr()||ur()}}),this.cordovaResolver=Tn(class{constructor(){this._redirectPersistence=mi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ss}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new As(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){yn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,u,l,c;const h=xs();bn("function"==typeof(null===(t=null==h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),bn(void 0!==(null===(n=null==h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),bn("function"==typeof(null===(s=null===(i=null===(r=null==h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),bn("function"==typeof(null===(u=null===(a=null===(o=null==h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),bn("function"==typeof(null===(c=null===(l=null==h?void 0:h.cordova)||void 0===l?void 0:l.InAppBrowser)||void 0===c?void 0:c.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),es.clear(),await this._originValidation(e);const s=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:Rs(),postBody:null,tenantId:e.tenantId,error:vn(e,"no-auth-event")}}(e,n,r);await function(e,t){return Ps()._set(Ds(e),t)}(e,s);const o=await async function(e,t,n){var r;const{BuildInfo:i}=xs();En(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(En(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return ur()?o.ibi=i.packageName:sr()?o.apn=i.packageName:yn(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Ts(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}(e,s,t);return async function(e,t,n){const{cordova:r}=xs();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function u(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function l(){a||(a=window.setTimeout((()=>{o(vn(e,"redirect-cancelled-by-user"))}),2e3))}function c(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&l()}t.addPassiveListener(u),document.addEventListener("resume",l,!1),sr()&&document.addEventListener("visibilitychange",c,!1),i=()=>{t.removePassiveListener(u),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",c,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await function(e){const{cordova:t}=xs();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(e=rt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=xs(),n={};ur()?n.iosBundleId=t.packageName:sr()?n.androidPackageName=t.packageName:yn(e,"operation-not-supported-in-this-environment"),await cs(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=xs(),s=setTimeout((async()=>{await Os(e),t.onEvent(Ms())}),500),o=async n=>{clearTimeout(s);const r=await Os(e);let i=null;r&&(null==n?void 0:n.url)&&(i=function(e,t){var n,r;const i=function(e){const t=Ls(e),n=t.link?decodeURIComponent(t.link):void 0,r=Ls(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Ls(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=Ls(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(e){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null==s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?vn(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}(r,n.url)),t.onEvent(i||Ms())};void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,o);const a=r,u=`${i.packageName.toLowerCase()}://`;xs().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(u)&&o({url:e}),"function"==typeof a)try{a(e)}catch(e){console.error(e)}}}}),this.underlyingResolver=null,this._redirectPersistence=mi,this._completeRedirectFn=ss}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Bs()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Gs(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!Bs()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function Js(e){return e.unwrap()}function Ys(e){const{_tokenResponse:t}=e instanceof ct?e.customData:e;if(!t)return null;if(!(e instanceof ct)&&"temporaryProof"in t&&"phoneNumber"in t)return Ki.credentialFromResult(e);const n=t.providerId;if(!n||"password"===n)return null;let r;switch(n){case"google.com":r=Or;break;case"facebook.com":r=Ar;break;case"github.com":r=Rr;break;case"twitter.com":r=Dr;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?Pr._create(n,o):Er._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new xr(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof ct?r.credentialFromError(e):r.credentialFromResult(e)}async function Xs(e,t){let n;try{n=await t}catch(t){throw t instanceof ct&&function(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new eo(e,function(e,t){var n;const r=It(e),i=t;return bn(t.operationType,r,"argument-error"),bn(null===(n=i.serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ai._fromError(r,i)}(e,t));else if(r){const e=Ys(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}(e,t),t}const{operationType:r,user:i}=n;return{operationType:r,credential:(s=n,Ys(s)),additionalUserInfo:si(n),user:to.getOrCreate(i)};var s}async function Zs(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>Xs(e,n.confirm(t))}}class eo{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Xs(Js(this.auth),this.resolver.resolveSignIn(e))}}class to{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=It(e);return li.has(t)||li.set(t,ui._fromUser(t)),li.get(t)}(e)}static getOrCreate(e){return to.USER_MAP.has(e)||to.USER_MAP.set(e,new to(e)),to.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Xs(this.auth,Wr(this._delegate,e))}async linkWithPhoneNumber(e,t){return Zs(this.auth,async function(e,t,n){const r=It(e);await Br(!1,r,"phone");const i=await $i(r.auth,t,It(n));return new qi(i,(e=>Wr(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return Xs(this.auth,async function(e,t,n){const r=It(e);bn(t instanceof Nr,r.auth,"argument-error");const i=Wi(r.auth,n);return new Zi(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Qs))}async linkWithRedirect(e){return await Ws(dr(this.auth)),function(e,t,n){return async function(e,t,n){const r=It(e);bn(t instanceof Nr,r.auth,"argument-error");const i=Wi(r.auth,n);await Br(!1,r,t.providerId),await ns(i,r.auth);const s=await os(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}(this._delegate,e,Qs)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Xs(this.auth,Hr(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Zs(this.auth,async function(e,t,n){const r=It(e),i=await $i(r.auth,t,It(n));return new qi(i,(e=>Hr(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return Xs(this.auth,async function(e,t,n){const r=It(e);bn(t instanceof Nr,r.auth,"argument-error");const i=Wi(r.auth,n);return new Zi(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Qs))}async reauthenticateWithRedirect(e){return await Ws(dr(this.auth)),function(e,t,n){return async function(e,t,n){const r=It(e);bn(t instanceof Nr,r.auth,"argument-error");const i=Wi(r.auth,n);await ns(i,r.auth);const s=await os(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}(this._delegate,e,Qs)}sendEmailVerification(e){return async function(e,t){const n=It(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Jr(n.auth,r,t);const{email:i}=await async function(e,t){return wr(e,t)}(n.auth,r);i!==e.email&&await e.reload()}(this._delegate,e)}async unlink(e){return await async function(e,t){const n=It(e);await Br(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return Dn(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=Vr(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}(this._delegate,e),this}updateEmail(e){return function(e,t){return Xr(It(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return Xr(It(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await zr(It(e),t)}(this._delegate,e)}updateProfile(e){return async function(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const r=It(e),i={idToken:await r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},s=await qn(r,async function(e,t){return Dn(e,"POST","/v1/accounts:update",t)}(r.auth,i));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const o=r.providerData.find((({providerId:e})=>"password"===e));o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return async function(e,t,n){const r=It(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&Jr(r.auth,i,n);const{email:s}=await async function(e,t){return wr(e,t)}(r.auth,i);s!==e.email&&await e.reload()}(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}to.USER_MAP=new WeakMap;const no=bn;class ro{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;no(n,"invalid-api-key",{appName:e.name});let r=[Yn];if("undefined"!=typeof window){r=function(e,t){const n=Hs();if(!(null==n?void 0:n.sessionStorage))return[];const r=Xn(Ks,e,t);switch(n.sessionStorage.getItem(r)){case qs.NONE:return[Yn];case qs.LOCAL:return[Ai,mi];case qs.SESSION:return[mi];default:return[]}}(n,e.name);for(const e of[Ai,fi,mi])r.includes(e)||r.push(e)}no(n,"invalid-api-key",{appName:e.name});const i="undefined"!=typeof window?Qs:void 0;this._delegate=t.initialize({options:{persistence:r,popupRedirectResolver:i}}),this._delegate._updateErrorMap(fn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?to.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){!function(e,t,n){const r=dr(e);bn(r._canInitEmulator,r,"emulator-config-failed"),bn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=pr(t),{host:o,port:a}=function(e){const t=pr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:mr(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:mr(t)}}}(t),u=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),function(e){function t(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"==typeof window||"undefined"==typeof document||e||("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}(i)}(this._delegate,e,t)}applyActionCode(e){return async function(e,t){await async function(e,t){return Dn(e,"POST","/v1/accounts:update",Pn(e,t))}(It(e),{oobCode:t})}(this._delegate,e)}checkActionCode(e){return Yr(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await yr(It(e),{oobCode:t,newPassword:n})}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Xs(this._delegate,async function(e,t,n){const r=dr(e),i=await Lr(r,{returnSecureToken:!0,email:t,password:n}),s=await Mr._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(s.user),s}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return async function(e,t){const n={identifier:t,continueUri:kn()?Sn():"http://localhost"},{signinMethods:r}=await async function(e,t){return Dn(e,"POST","/v1/accounts:createAuthUri",Pn(e,t))}(It(e),n);return r||[]}(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=Sr.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){no(zs(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await dr(e)._initializationPromise,ss(e,t,!1)}(this._delegate,Qs);return e?Xs(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){dr(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=io(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=io(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=It(e),i={requestType:"EMAIL_SIGNIN",email:t};bn(n.handleCodeInApp,r,"argument-error"),n&&Jr(r,i,n),await async function(e,t){return wr(e,t)}(r,i)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=It(e),i={requestType:"PASSWORD_RESET",email:t};n&&Jr(r,i,n),await async function(e,t){return wr(e,t)}(r,i)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){$s(Object.values(qs).includes(t),e,"invalid-persistence-type"),at()?$s(t!==qs.SESSION,e,"unsupported-persistence-type"):st()?$s(t===qs.NONE,e,"unsupported-persistence-type"):Vs()?$s(t===qs.NONE||t===qs.LOCAL&&lt(),e,"unsupported-persistence-type"):$s(t===qs.NONE||js(),e,"unsupported-persistence-type")}(this._delegate,e),e){case qs.SESSION:t=mi;break;case qs.LOCAL:t=await Tn(Ai)._isAvailable()?Ai:fi;break;case qs.NONE:t=Yn;break;default:return yn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Xs(this._delegate,async function(e){var t;const n=dr(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Mr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Lr(n,{returnSecureToken:!0}),i=await Mr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return Xs(this._delegate,Kr(this._delegate,e))}signInWithCustomToken(e){return Xs(this._delegate,async function(e,t){const n=dr(e),r=await async function(e,t){return Mn(e,"POST","/v1/accounts:signInWithCustomToken",Pn(e,t))}(n,{token:t,returnSecureToken:!0}),i=await Mr._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}(this._delegate,e))}signInWithEmailAndPassword(e,t){return Xs(this._delegate,function(e,t,n){return Kr(It(e),kr.credential(t,n))}(this._delegate,e,t))}signInWithEmailLink(e,t){return Xs(this._delegate,async function(e,t,n){const r=It(e),i=kr.credentialWithLink(t,n||Sn());return bn(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Kr(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Zs(this._delegate,async function(e,t,n){const r=dr(e),i=await $i(r,t,It(n));return new qi(i,(e=>Kr(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return no(zs(),this._delegate,"operation-not-supported-in-this-environment"),Xs(this._delegate,async function(e,t,n){const r=dr(e);bn(t instanceof Nr,e,"argument-error");const i=Wi(r,n);return new Zi(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,Qs))}async signInWithRedirect(e){return no(zs(),this._delegate,"operation-not-supported-in-this-environment"),await Ws(this._delegate),function(e,t,n){return async function(e,t,n){const r=dr(e);bn(t instanceof Nr,e,"argument-error");const i=Wi(r,n);return await ns(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}(this._delegate,e,Qs)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await Yr(It(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function io(e,t,n){let r=e;"function"!=typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&to.getOrCreate(e)),error:t,complete:n}}ro.Persistence=qs;class so{constructor(){this.providerId="phone",this._delegate=new Ki(Js(dn.auth()))}static credential(e,t){return Ki.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}so.PHONE_SIGN_IN_METHOD=Ki.PHONE_SIGN_IN_METHOD,so.PROVIDER_ID=Ki.PROVIDER_ID;const oo=bn;var ao;(ao=dn).INTERNAL.registerComponent(new St("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new ro(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:kr,FacebookAuthProvider:Ar,GithubAuthProvider:Rr,GoogleAuthProvider:Or,OAuthProvider:xr,PhoneAuthProvider:so,PhoneMultiFactorGenerator:class{constructor(){}static assertion(e){return ks._fromCredential(e)}},RecaptchaVerifier:class{constructor(e,t,n=dn.app()){var r;oo(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new Bi(e,t,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:Dr,Auth:ro,AuthCredential:gr,Error:ct}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ao.registerVersion("@firebase/auth-compat","0.1.1");var uo=function(e,t){return(uo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function lo(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var co,ho="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},fo=fo||{},po=ho||self;function mo(){}function go(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function yo(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var vo="closure_uid_"+(1e9*Math.random()>>>0),wo=0;function bo(e,t,n){return e.call.apply(e.bind,arguments)}function _o(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Eo(e,t,n){return(Eo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?bo:_o).apply(null,arguments)}function Io(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function To(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function So(){this.s=this.s,this.o=this.o}var ko={};So.prototype.s=!1,So.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,vo)&&e[vo]||(e[vo]=++wo)}(this);delete ko[e]}},So.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var No=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Co=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};function xo(e){return Array.prototype.concat.apply([],arguments)}function Ao(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Oo(e){return/^[\s\xa0]*$/.test(e)}var Ro,Po=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Do(e,t){return-1!=e.indexOf(t)}function Lo(e,t){return e<t?-1:e>t?1:0}e:{var Mo=po.navigator;if(Mo){var Fo=Mo.userAgent;if(Fo){Ro=Fo;break e}}Ro=""}function Uo(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function jo(e){var t={};for(var n in e)t[n]=e[n];return t}var Vo="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zo(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var s=0;s<Vo.length;s++)n=Vo[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Bo(e){return Bo[" "](e),e}Bo[" "]=mo;var qo,$o,Ko=Do(Ro,"Opera"),Wo=Do(Ro,"Trident")||Do(Ro,"MSIE"),Ho=Do(Ro,"Edge"),Go=Ho||Wo,Qo=Do(Ro,"Gecko")&&!(Do(Ro.toLowerCase(),"webkit")&&!Do(Ro,"Edge"))&&!(Do(Ro,"Trident")||Do(Ro,"MSIE"))&&!Do(Ro,"Edge"),Jo=Do(Ro.toLowerCase(),"webkit")&&!Do(Ro,"Edge");function Yo(){var e=po.document;return e?e.documentMode:void 0}e:{var Xo="",Zo=($o=Ro,Qo?/rv:([^\);]+)(\)|;)/.exec($o):Ho?/Edge\/([\d\.]+)/.exec($o):Wo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec($o):Jo?/WebKit\/(\S+)/.exec($o):Ko?/(?:Version)[ \/]?(\S+)/.exec($o):void 0);if(Zo&&(Xo=Zo?Zo[1]:""),Wo){var ea=Yo();if(null!=ea&&ea>parseFloat(Xo)){qo=String(ea);break e}}qo=Xo}var ta,na={};function ra(){return e=na,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){for(var e=0,t=Po(String(qo)).split("."),n=Po("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var s=t[i]||"",o=n[i]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==s[0].length&&0==o[0].length)break;e=Lo(0==s[1].length?0:parseInt(s[1],10),0==o[1].length?0:parseInt(o[1],10))||Lo(0==s[2].length,0==o[2].length)||Lo(s[2],o[2]),s=s[3],o=o[3]}while(0==e)}return 0<=e}();var e}po.document&&Wo?ta=Yo()||parseInt(qo,10)||void 0:ta=void 0;var ia=ta,sa=function(){if(!po.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{po.addEventListener("test",mo,t),po.removeEventListener("test",mo,t)}catch(e){}return e}();function oa(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function aa(e,t){if(oa.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Qo){e:{try{Bo(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:ua[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&aa.Z.h.call(this)}}oa.prototype.h=function(){this.defaultPrevented=!0},To(aa,oa);var ua={2:"touch",3:"pen",4:"mouse"};aa.prototype.h=function(){aa.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var la="closure_listenable_"+(1e6*Math.random()|0),ca=0;function ha(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++ca,this.ca=this.fa=!1}function da(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function fa(e){this.src=e,this.g={},this.h=0}function pa(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=No(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(da(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ma(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==r)return i}return-1}fa.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=ma(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new ha(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var ga="closure_lm_"+(1e6*Math.random()|0),ya={};function va(e,t,n,r,i){if(r&&r.once)return ba(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)va(e,t[s],n,r,i);return null}return n=Na(n),e&&e[la]?e.N(t,n,yo(r)?!!r.capture:!!r,i):wa(e,t,n,!1,r,i)}function wa(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=yo(i)?!!i.capture:!!i,a=Sa(e);if(a||(e[ga]=a=new fa(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){var e=Ta;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)sa||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ia(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ba(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)ba(e,t[s],n,r,i);return null}return n=Na(n),e&&e[la]?e.O(t,n,yo(r)?!!r.capture:!!r,i):wa(e,t,n,!0,r,i)}function _a(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)_a(e,t[s],n,r,i);else r=yo(r)?!!r.capture:!!r,n=Na(n),e&&e[la]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=ma(s=e.g[t],n,r,i))&&(da(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=Sa(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ma(t,n,r,i)),(n=-1<e?t[e]:null)&&Ea(n))}function Ea(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[la])pa(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ia(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Sa(t))?(pa(n,e),0==n.h&&(n.src=null,t[ga]=null)):da(e)}}}function Ia(e){return e in ya?ya[e]:ya[e]="on"+e}function Ta(e,t){if(e.ca)e=!0;else{t=new aa(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Ea(e),e=n.call(r,t)}return e}function Sa(e){return(e=e[ga])instanceof fa?e:null}var ka="__closure_events_fn_"+(1e9*Math.random()>>>0);function Na(e){return"function"==typeof e?e:(e[ka]||(e[ka]=function(t){return e.handleEvent(t)}),e[ka])}function Ca(){So.call(this),this.i=new fa(this),this.P=this,this.I=null}function xa(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new oa(t,e);else if(t instanceof oa)t.target=t.target||e;else{var i=t;zo(t=new oa(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Aa(o,r,!0,t)&&i}if(i=Aa(o=t.g=e,r,!0,t)&&i,i=Aa(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Aa(o=t.g=n[s],r,!1,t)&&i}function Aa(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,u=o.ia||o.src;o.fa&&pa(e.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}To(Ca,So),Ca.prototype[la]=!0,Ca.prototype.removeEventListener=function(e,t,n,r){_a(this,e,t,n,r)},Ca.prototype.M=function(){if(Ca.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)da(n[r]);delete t.g[e],t.h--}}this.I=null},Ca.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ca.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Oa=po.JSON.stringify;function Ra(){var e=Va,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Pa,Da=function(){function e(){this.h=this.g=null}return e.prototype.add=function(e,t){var n=La.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n},e}(),La=new(function(){function e(e,t){this.i=e,this.j=t,this.h=0,this.g=null}return e.prototype.get=function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e},e}())((function(){return new Ma}),(function(e){return e.reset()})),Ma=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(e,t){this.h=e,this.g=t,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function Fa(e){po.setTimeout((function(){throw e}),0)}function Ua(e,t){Pa||function(){var e=po.Promise.resolve(void 0);Pa=function(){e.then(za)}}(),ja||(Pa(),ja=!0),Va.add(e,t)}var ja=!1,Va=new Da;function za(){for(var e;e=Ra();){try{e.h.call(e.g)}catch(e){Fa(e)}var t=La;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ja=!1}function Ba(e,t){Ca.call(this),this.h=e||1,this.g=t||po,this.j=Eo(this.kb,this),this.l=Date.now()}function qa(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function $a(e,t,n){if("function"==typeof e)n&&(e=Eo(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Eo(e.handleEvent,e)}return 2147483647<Number(t)?-1:po.setTimeout(e,t||0)}function Ka(e){e.g=$a((function(){e.g=null,e.i&&(e.i=!1,Ka(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}To(Ba,Ca),(co=Ba.prototype).da=!1,co.S=null,co.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),xa(this,"tick"),this.da&&(qa(this),this.start()))}},co.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},co.M=function(){Ba.Z.M.call(this),qa(this),delete this.g};var Wa=function(e){function t(t,n){var r=e.call(this)||this;return r.m=t,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}uo(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.l=function(e){this.h=arguments,this.g?this.i=!0:Ka(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(po.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(So);function Ha(e){So.call(this),this.h=e,this.g={}}To(Ha,So);var Ga=[];function Qa(e,t,n,r){Array.isArray(n)||(n&&(Ga[0]=n.toString()),n=Ga);for(var i=0;i<n.length;i++){var s=va(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Ja(e){Uo(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Ea(e)}),e),e.g={}}function Ya(){this.g=!0}function Xa(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Oa(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}Ha.prototype.M=function(){Ha.Z.M.call(this),Ja(this)},Ha.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ya.prototype.Aa=function(){this.g=!1},Ya.prototype.info=function(){};var Za={},eu=null;function tu(){return eu=eu||new Ca}function nu(e){oa.call(this,Za.Ma,e)}function ru(e){var t=tu();xa(t,new nu(t,e))}function iu(e,t){oa.call(this,Za.STAT_EVENT,e),this.stat=t}function su(e){var t=tu();xa(t,new iu(t,e))}function ou(e,t){oa.call(this,Za.Na,e),this.size=t}function au(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return po.setTimeout((function(){e()}),t)}Za.Ma="serverreachability",To(nu,oa),Za.STAT_EVENT="statevent",To(iu,oa),Za.Na="timingevent",To(ou,oa);var uu={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},lu={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function cu(){}function hu(e){return e.h||(e.h=e.i())}function du(){}cu.prototype.h=null;var fu,pu={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function mu(){oa.call(this,"d")}function gu(){oa.call(this,"c")}function yu(){}function vu(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Ha(this),this.P=bu,e=Go?125:void 0,this.W=new Ba(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new wu}function wu(){this.i=null,this.g="",this.h=!1}To(mu,oa),To(gu,oa),To(yu,cu),yu.prototype.g=function(){return new XMLHttpRequest},yu.prototype.i=function(){return{}},fu=new yu;var bu=45e3,_u={},Eu={};function Iu(e,t,n){e.K=1,e.v=Wu(Vu(t)),e.s=n,e.U=!0,Tu(e,null)}function Tu(e,t){e.F=Date.now(),Cu(e),e.A=Vu(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),sl(n.h,"t",r),e.C=0,n=e.l.H,e.h=new wu,e.g=oc(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Wa(Eo(e.Ia,e,e.g),e.O)),Qa(e.V,e.g,"readystatechange",e.gb),t=e.H?jo(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ru(1),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+l+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Su(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function ku(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Nu(e,n))==Eu){4==t&&(e.o=4,su(14),i=!1),Xa(e.j,e.m,null,"[Incomplete Response]");break}if(r==_u){e.o=4,su(15),Xa(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Xa(e.j,e.m,r,null),Pu(e,r)}Su(e)&&r!=Eu&&r!=_u&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,su(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Xl(t),t.L=!0,su(11))):(Xa(e.j,e.m,n,"[Invalid Chunked Response]"),Ru(e),Ou(e))}function Nu(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Eu:(n=Number(t.substring(n,r)),isNaN(n)?_u:(r+=1)+n>t.length?Eu:(t=t.substr(r,n),e.C=r+n,t))}function Cu(e){e.Y=Date.now()+e.P,xu(e,e.P)}function xu(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=au(Eo(e.eb,e),t)}function Au(e){e.B&&(po.clearTimeout(e.B),e.B=null)}function Ou(e){0==e.l.G||e.I||tc(e.l,e)}function Ru(e){Au(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,qa(e.W),Ja(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Pu(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||dl(n.i,e)))if(n.I=e.N,!e.J&&dl(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(s){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;ec(n),ql(n)}Yl(n),su(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=au(Eo(n.ab,n),6e3));if(1>=hl(n.i)&&n.ka){try{n.ka()}catch(s){}n.ka=void 0}}else rc(n,11)}else if((e.J||n.g==e)&&ec(n),!Oo(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var s=i[t];if(n.U=s[0],s=s[1],2==n.G)if("c"==s[0]){n.J=s[1],n.la=s[2];var o=s[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var a=s[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=s[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var l=e.g;if(l){var c=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var h=r.i;!h.g&&(Do(c,"spdy")||Do(c,"quic")||Do(c,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(fl(h,h.h),h.h=null))}if(r.D){var d=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(r.sa=d,Ku(r.F,r.D,d))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var f=e;if((r=n).oa=sc(r,r.H?r.la:null,r.W),f.J){pl(r.i,f);var p=f,m=r.K;m&&p.setTimeout(m),p.B&&(Au(p),Cu(p)),r.g=f}else Jl(r);0<n.l.length&&Wl(n)}else"stop"!=s[0]&&"close"!=s[0]||rc(n,7);else 3==n.G&&("stop"==s[0]||"close"==s[0]?"stop"==s[0]?rc(n,7):Bl(n):"noop"!=s[0]&&n.j&&n.j.wa(s),n.A=0)}ru(4)}catch(s){}}function Du(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(go(e)||"string"==typeof e)Co(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(go(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(go(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function Lu(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Lu)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Mu(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Fu(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Fu(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Fu(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(co=vu.prototype).setTimeout=function(e){this.P=e},co.gb=function(e){e=e.target;var t=this.L;t&&3==Fl(e)?t.l():this.Ia(e)},co.Ia=function(e){try{if(e==this.g)e:{var t=Fl(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Go||this.g&&(this.h.h||this.g.ga()||Ul(this.g)))){this.I||4!=t||7==n||ru(8==n||0>=r?3:2),Au(this);var i=this.g.ba();this.N=i;t:if(Su(this)){var s=Ul(this.g);e="";var o=s.length,a=4==Fl(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ru(this),Ou(this);var u="";break t}this.h.i=new po.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(s[n],{stream:a&&n==o-1});s.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Oo(l)){var h=l;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,su(12),Ru(this),Ou(this);break e}Xa(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Pu(this,i)}this.U?(ku(this,t,u),Go&&this.i&&3==t&&(Qa(this.V,this.W,"tick",this.fb),this.W.start())):(Xa(this.j,this.m,u,null),Pu(this,u)),4==t&&Ru(this),this.i&&!this.I&&(4==t?tc(this.l,this):(this.i=!1,Cu(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,su(12)):(this.o=0,su(13)),Ru(this),Ou(this)}}}catch(t){}},co.fb=function(){if(this.g){var e=Fl(this.g),t=this.g.ga();this.C<t.length&&(Au(this),ku(this,e,t),this.i&&4!=e&&Cu(this))}},co.cancel=function(){this.I=!0,Ru(this)},co.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(ru(3),su(17)),Ru(this),this.o=2,Ou(this)):xu(this,this.Y-e)},(co=Lu.prototype).R=function(){Mu(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},co.T=function(){return Mu(this),this.g.concat()},co.get=function(e,t){return Fu(this.h,e)?this.h[e]:t},co.set=function(e,t){Fu(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},co.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};var Uu=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ju(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof ju){this.g=void 0!==t?t:e.g,zu(this,e.j),this.s=e.s,Bu(this,e.i),qu(this,e.m),this.l=e.l,t=e.h;var n=new tl;n.i=t.i,t.g&&(n.g=new Lu(t.g),n.h=t.h),$u(this,n),this.o=e.o}else e&&(n=String(e).match(Uu))?(this.g=!!t,zu(this,n[1]||"",!0),this.s=Hu(n[2]||""),Bu(this,n[3]||"",!0),qu(this,n[4]),this.l=Hu(n[5]||"",!0),$u(this,n[6]||"",!0),this.o=Hu(n[7]||"")):(this.g=!!t,this.h=new tl(null,this.g))}function Vu(e){return new ju(e)}function zu(e,t,n){e.j=n?Hu(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Bu(e,t,n){e.i=n?Hu(t,!0):t}function qu(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function $u(e,t,n){t instanceof tl?(e.h=t,function(e,t){t&&!e.j&&(nl(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(rl(this,t),sl(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Gu(t,Zu)),e.h=new tl(t,e.g))}function Ku(e,t,n){e.h.set(t,n)}function Wu(e){return Ku(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Hu(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Gu(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Qu),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Qu(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ju.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Gu(t,Ju,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Gu(t,Ju,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Gu(n,"/"==n.charAt(0)?Xu:Yu,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Gu(n,el)),e.join("")};var Ju=/[#\/\?@]/g,Yu=/[#\?:]/g,Xu=/[#\?]/g,Zu=/[#\?@]/g,el=/#/g;function tl(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function nl(e){e.g||(e.g=new Lu,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function rl(e,t){nl(e),t=ol(e,t),Fu(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Fu((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Mu(e)))}function il(e,t){return nl(e),t=ol(e,t),Fu(e.g.h,t)}function sl(e,t,n){rl(e,t),0<n.length&&(e.i=null,e.g.set(ol(e,t),Ao(n)),e.h+=n.length)}function ol(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(co=tl.prototype).add=function(e,t){nl(this),this.i=null,e=ol(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},co.forEach=function(e,t){nl(this),this.g.forEach((function(n,r){Co(n,(function(n){e.call(t,n,r,this)}),this)}),this)},co.T=function(){nl(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n},co.R=function(e){nl(this);var t=[];if("string"==typeof e)il(this,e)&&(t=xo(t,this.g.get(ol(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=xo(t,e[n])}return t},co.set=function(e,t){return nl(this),this.i=null,il(this,e=ol(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},co.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},co.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),e.push(o)}}return this.i=e.join("&")};var al=function(e,t){this.h=e,this.g=t};function ul(e){this.l=e||ll,e=po.PerformanceNavigationTiming?0<(e=po.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(po.g&&po.g.Ea&&po.g.Ea()&&po.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ll=10;function cl(e){return!!e.h||!!e.g&&e.g.size>=e.j}function hl(e){return e.h?1:e.g?e.g.size:0}function dl(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function fl(e,t){e.g?e.g.add(t):e.h=t}function pl(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ml(e){var t,n;if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var r=e.i;try{for(var i=lo(e.g.values()),s=i.next();!s.done;s=i.next()){var o=s.value;r=r.concat(o.D)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return Ao(e.i)}function gl(){}function yl(){this.g=new gl}function vl(e,t,n){var r=n||"";try{Du(e,(function(e,n){var i=e;yo(e)&&(i=Oa(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function wl(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function bl(e){this.l=e.$b||null,this.j=e.ib||!1}function _l(e,t){Ca.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=El,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ul.prototype.cancel=function(){var e,t;if(this.i=ml(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=lo(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}},gl.prototype.stringify=function(e){return po.JSON.stringify(e,void 0)},gl.prototype.parse=function(e){return po.JSON.parse(e,void 0)},To(bl,cu),bl.prototype.g=function(){return new _l(this.l,this.j)},bl.prototype.i=function(e){return function(){return e}}({}),To(_l,Ca);var El=0;function Il(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Tl(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Sl(e)}function Sl(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(co=_l.prototype).open=function(e,t){if(this.readyState!=El)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Sl(this)},co.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||po).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},co.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Tl(this)),this.readyState=El},co.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Sl(this)),this.g&&(this.readyState=3,Sl(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==po.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Il(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},co.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Tl(this):Sl(this),3==this.readyState&&Il(this)}},co.Ua=function(e){this.g&&(this.response=this.responseText=e,Tl(this))},co.Ta=function(e){this.g&&(this.response=e,Tl(this))},co.ha=function(){this.g&&Tl(this)},co.setRequestHeader=function(e,t){this.v.append(e,t)},co.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},co.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(_l.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var kl=po.JSON.parse;function Nl(e){Ca.call(this),this.headers=new Lu,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Cl,this.K=this.L=!1}To(Nl,Ca);var Cl="",xl=/^https?$/i,Al=["POST","PUT"];function Ol(e){return"content-type"==e.toLowerCase()}function Rl(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Pl(e),Ll(e)}function Pl(e){e.D||(e.D=!0,xa(e,"complete"),xa(e,"error"))}function Dl(e){if(e.h&&void 0!==fo&&(!e.C[1]||4!=Fl(e)||2!=e.ba()))if(e.v&&4==Fl(e))$a(e.Fa,0,e);else if(xa(e,"readystatechange"),4==Fl(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var s=String(e.H).match(Uu)[1]||null;if(!s&&po.self&&po.self.location){var o=po.self.location.protocol;s=o.substr(0,o.length-1)}i=!xl.test(s?s.toLowerCase():"")}t=i}if(t)xa(e,"complete"),xa(e,"success");else{e.m=6;try{var a=2<Fl(e)?e.g.statusText:""}catch(e){a=""}e.j=a+" ["+e.ba()+"]",Pl(e)}}finally{Ll(e)}}}function Ll(e,t){if(e.g){Ml(e);var n=e.g,r=e.C[0]?mo:null;e.g=null,e.C=null,t||xa(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function Ml(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(po.clearTimeout(e.A),e.A=null)}function Fl(e){return e.g?e.g.readyState:0}function Ul(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Cl:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function jl(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Uo(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Ku(e,t,n))}function Vl(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function zl(e){this.za=0,this.l=[],this.h=new Ya,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Vl("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Vl("baseRetryDelayMs",5e3,e),this.$a=Vl("retryDelaySeedMs",1e4,e),this.Ya=Vl("forwardChannelMaxRetries",2,e),this.ra=Vl("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new ul(e&&e.concurrentRequestLimit),this.Ca=new yl,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Bl(e){if($l(e),3==e.G){var t=e.V++,n=Vu(e.F);Ku(n,"SID",e.J),Ku(n,"RID",t),Ku(n,"TYPE","terminate"),Gl(e,n),(t=new vu(e,e.h,t,void 0)).K=2,t.v=Wu(Vu(n)),n=!1,po.navigator&&po.navigator.sendBeacon&&(n=po.navigator.sendBeacon(t.v.toString(),"")),!n&&po.Image&&((new Image).src=t.v,n=!0),n||(t.g=oc(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Cu(t)}ic(e)}function ql(e){e.g&&(Xl(e),e.g.cancel(),e.g=null)}function $l(e){ql(e),e.u&&(po.clearTimeout(e.u),e.u=null),ec(e),e.i.cancel(),e.m&&("number"==typeof e.m&&po.clearTimeout(e.m),e.m=null)}function Kl(e,t){e.l.push(new al(e.Za++,t)),3==e.G&&Wl(e)}function Wl(e){cl(e.i)||e.m||(e.m=!0,Ua(e.Ha,e),e.C=0)}function Hl(e,t){var n;n=t?t.m:e.V++;var r=Vu(e.F);Ku(r,"SID",e.J),Ku(r,"RID",n),Ku(r,"AID",e.U),Gl(e,r),e.o&&e.s&&jl(r,e.o,e.s),n=new vu(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Ql(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),fl(e.i,n),Iu(n,r,t)}function Gl(e,t){e.j&&Du({},(function(e,n){Ku(t,n,e)}))}function Ql(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Eo(e.j.Oa,e.j,e):null;e:for(var i=e.l,s=-1;;){var o=["count="+n];-1==s?0<n?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);for(var a=!0,u=0;u<n;u++){var l=i[u].h,c=i[u].g;if(0>(l-=s))s=Math.max(0,i[u].h-100),a=!1;else try{vl(c,o,"req"+l+"_")}catch(e){r&&r(c)}}if(a){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Jl(e){e.g||e.u||(e.Y=1,Ua(e.Ga,e),e.A=0)}function Yl(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=au(Eo(e.Ga,e),nc(e,e.A)),e.A++,0))}function Xl(e){null!=e.B&&(po.clearTimeout(e.B),e.B=null)}function Zl(e){e.g=new vu(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Vu(e.oa);Ku(t,"RID","rpc"),Ku(t,"SID",e.J),Ku(t,"CI",e.N?"0":"1"),Ku(t,"AID",e.U),Gl(e,t),Ku(t,"TYPE","xmlhttp"),e.o&&e.s&&jl(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Wu(Vu(t)),n.s=null,n.U=!0,Tu(n,e)}function ec(e){null!=e.v&&(po.clearTimeout(e.v),e.v=null)}function tc(e,t){var n=null;if(e.g==t){ec(e),Xl(e),e.g=null;var r=2}else{if(!dl(e.i,t))return;n=t.D,pl(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;xa(r=tu(),new ou(r,n,t,i)),Wl(e)}else Jl(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(hl(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=au(Eo(e.Ha,e,t),nc(e,e.C)),e.C++,0)))}(e,t)||2==r&&Yl(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:rc(e,5);break;case 4:rc(e,10);break;case 3:rc(e,6);break;default:rc(e,2)}}function nc(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function rc(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Eo(e.jb,e);n||(n=new ju("//www.google.com/images/cleardot.gif"),po.location&&"http"==po.location.protocol||zu(n,"https"),Wu(n)),function(e,t){var n=new Ya;if(po.Image){var r=new Image;r.onload=Io(wl,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Io(wl,n,r,"TestLoadImage: error",!1,t),r.onabort=Io(wl,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Io(wl,n,r,"TestLoadImage: timeout",!1,t),po.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else su(2);e.G=0,e.j&&e.j.va(t),ic(e),$l(e)}function ic(e){e.G=0,e.I=-1,e.j&&(0==ml(e.i).length&&0==e.l.length||(e.i.i.length=0,Ao(e.l),e.l.length=0),e.j.ua())}function sc(e,t,n){var r=function(e){return e instanceof ju?Vu(e):new ju(e,void 0)}(n);if(""!=r.i)t&&Bu(r,t+"."+r.i),qu(r,r.m);else{var i=po.location;r=function(e,t,n,r){var i=new ju(null,void 0);return e&&zu(i,e),t&&Bu(i,t),n&&qu(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Uo(e.aa,(function(e,t){Ku(r,t,e)})),t=e.D,n=e.sa,t&&n&&Ku(r,t,n),Ku(r,"VER",e.ma),Gl(e,r),r}function oc(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Nl(new bl({ib:!0})):new Nl(e.qa)).L=e.H,t}function ac(){}function uc(){if(Wo&&!(10<=Number(ia)))throw Error("Environmental error: no available transport.")}function lc(e,t){Ca.call(this),this.g=new zl(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Oo(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Oo(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new dc(this)}function cc(e){mu.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function hc(){gu.call(this),this.status=1}function dc(e){this.g=e}(co=Nl.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():fu.g(),this.C=this.u?hu(this.u):hu(fu),this.g.onreadystatechange=Eo(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(e){return void Rl(this,e)}e=n||"";var i=new Lu(this.headers);r&&Du(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Ol,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=po.FormData&&e instanceof po.FormData,!(0<=No(Al,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ml(this),0<this.B&&((this.K=function(e){return Wo&&ra()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Eo(this.pa,this)):this.A=$a(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){Rl(this,e)}},co.pa=function(){void 0!==fo&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,xa(this,"timeout"),this.abort(8))},co.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,xa(this,"complete"),xa(this,"abort"),Ll(this))},co.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ll(this,!0)),Nl.Z.M.call(this)},co.Fa=function(){this.s||(this.F||this.v||this.l?Dl(this):this.cb())},co.cb=function(){Dl(this)},co.ba=function(){try{return 2<Fl(this)?this.g.status:-1}catch(e){return-1}},co.ga=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},co.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),kl(t)}},co.Da=function(){return this.m},co.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(co=zl.prototype).ma=8,co.G=1,co.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(e){}},co.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new vu(this,this.h,e,void 0),n=this.s;if(this.P&&(n?zo(n=jo(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var s=this.l[i];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(r+=s)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Ql(this,t,r),Ku(i=Vu(this.F),"RID",e),Ku(i,"CVER",22),this.D&&Ku(i,"X-HTTP-Session-Id",this.D),Gl(this,i),this.o&&n&&jl(i,this.o,n),fl(this.i,t),this.Ra&&Ku(i,"TYPE","init"),this.ja?(Ku(i,"$req",r),Ku(i,"SID","null"),t.$=!0,Iu(t,i,null)):Iu(t,i,r),this.G=2}}else 3==this.G&&(e?Hl(this,e):0==this.l.length||cl(this.i)||Hl(this))},co.Ga=function(){if(this.u=null,Zl(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=au(Eo(this.bb,this),e)}},co.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,su(10),ql(this),Zl(this))},co.ab=function(){null!=this.v&&(this.v=null,ql(this),Yl(this),su(19))},co.jb=function(e){e?(this.h.info("Successfully pinged google.com"),su(2)):(this.h.info("Failed to ping google.com"),su(1))},(co=ac.prototype).xa=function(){},co.wa=function(){},co.va=function(){},co.ua=function(){},co.Oa=function(){},uc.prototype.g=function(e,t){return new lc(e,t)},To(lc,Ca),lc.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Ua(Eo(e.hb,e,t))),su(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=sc(e,null,e.W),Wl(e)},lc.prototype.close=function(){Bl(this.g)},lc.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,Kl(this.g,t)}else this.v?((t={}).__data__=Oa(e),Kl(this.g,t)):Kl(this.g,e)},lc.prototype.M=function(){this.g.j=null,delete this.j,Bl(this.g),delete this.g,lc.Z.M.call(this)},To(cc,mu),To(hc,gu),To(dc,ac),dc.prototype.xa=function(){xa(this.g,"a")},dc.prototype.wa=function(e){xa(this.g,new cc(e))},dc.prototype.va=function(e){xa(this.g,new hc(e))},dc.prototype.ua=function(){xa(this.g,"b")},uc.prototype.createWebChannel=uc.prototype.g,lc.prototype.send=lc.prototype.u,lc.prototype.open=lc.prototype.m,lc.prototype.close=lc.prototype.close,uu.NO_ERROR=0,uu.TIMEOUT=8,uu.HTTP_ERROR=6,lu.COMPLETE="complete",du.EventType=pu,pu.OPEN="a",pu.CLOSE="b",pu.ERROR="c",pu.MESSAGE="d",Ca.prototype.listen=Ca.prototype.N,Nl.prototype.listenOnce=Nl.prototype.O,Nl.prototype.getLastError=Nl.prototype.La,Nl.prototype.getLastErrorCode=Nl.prototype.Da,Nl.prototype.getStatus=Nl.prototype.ba,Nl.prototype.getResponseJson=Nl.prototype.Qa,Nl.prototype.getResponseText=Nl.prototype.ga,Nl.prototype.send=Nl.prototype.ea;var fc=uu,pc=lu,mc=Za,gc=10,yc=11,vc=bl,wc=du,bc=Nl;class _c{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_c.UNAUTHENTICATED=new _c(null),_c.GOOGLE_CREDENTIALS=new _c("google-credentials-uid"),_c.FIRST_PARTY=new _c("first-party-uid"),_c.MOCK_USER=new _c("mock-user");let Ec="9.0.1";const Ic=new Mt("@firebase/firestore");function Tc(){return Ic.logLevel}function Sc(e,...t){if(Ic.logLevel<=At.DEBUG){const n=t.map(Cc);Ic.debug(`Firestore (${Ec}): ${e}`,...n)}}function kc(e,...t){if(Ic.logLevel<=At.ERROR){const n=t.map(Cc);Ic.error(`Firestore (${Ec}): ${e}`,...n)}}function Nc(e,...t){if(Ic.logLevel<=At.WARN){const n=t.map(Cc);Ic.warn(`Firestore (${Ec}): ${e}`,...n)}}function Cc(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function xc(e="Unexpected state"){const t=`FIRESTORE (${Ec}) INTERNAL ASSERTION FAILED: `+e;throw kc(t),new Error(t)}function Ac(e,t){e||xc()}function Oc(e,t){return e}const Rc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pc extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Dc{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Lc{constructor(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class Mc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(_c.UNAUTHENTICATED)))}shutdown(){}}class Fc{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Uc{constructor(e){this.t=e,this.currentUser=_c.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Dc;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Dc,e.enqueueRetryable((()=>r(this.currentUser)))};const s=t=>{e.enqueueRetryable((async()=>{Sc("FirebaseCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),await i.promise,await r(this.currentUser)}))};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(Sc("FirebaseCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Dc)}}),0),e.enqueueRetryable((async()=>{0===this.i&&(await i.promise,await r(this.currentUser))}))}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Sc("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ac("string"==typeof t.accessToken),new Lc(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ac(null===e||"string"==typeof e),new _c(e)}}class jc{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=_c.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},t=this.h.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class Vc{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new jc(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(_c.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class zc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.g(e),this.p=e=>t.writeSequenceNumber(e))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}function Bc(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}zc.T=-1;class qc{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=Bc(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function $c(e,t){return e<t?-1:e>t?1:0}function Kc(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Wc(e){return e+"\0"}class Hc{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pc(Rc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pc(Rc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pc(Rc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pc(Rc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Hc.fromMillis(Date.now())}static fromDate(e){return Hc.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Hc(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$c(this.nanoseconds,e.nanoseconds):$c(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Gc{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Gc(e)}static min(){return new Gc(new Hc(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Qc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Jc(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Yc(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Xc{constructor(e,t,n){void 0===t?t=0:t>e.length&&xc(),void 0===n?n=e.length-t:n>e.length-t&&xc(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Xc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xc?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Zc extends Xc{construct(e,t,n){return new Zc(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Pc(Rc.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new Zc(t)}static emptyPath(){return new Zc([])}}const eh=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class th extends Xc{construct(e,t,n){return new th(e,t,n)}static isValidIdentifier(e){return eh.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),th.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new th(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Pc(Rc.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Pc(Rc.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Pc(Rc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Pc(Rc.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new th(t)}static emptyPath(){return new th([])}}class nh{constructor(e){this.fields=e,e.sort(th.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Kc(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class rh{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new rh(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new rh(t)}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $c(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rh.EMPTY_BYTE_STRING=new rh("");const ih=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sh(e){if(Ac(!!e),"string"==typeof e){let t=0;const n=ih.exec(e);if(Ac(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:oh(e.seconds),nanos:oh(e.nanos)}}function oh(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ah(e){return"string"==typeof e?rh.fromBase64String(e):rh.fromUint8Array(e)}function uh(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function lh(e){const t=e.mapValue.fields.__previous_value__;return uh(t)?lh(t):t}function ch(e){const t=sh(e.mapValue.fields.__local_write_time__.timestampValue);return new Hc(t.seconds,t.nanos)}function hh(e){return null==e}function dh(e){return 0===e&&1/e==-1/0}function fh(e){return"number"==typeof e&&Number.isInteger(e)&&!dh(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}class ph{constructor(e){this.path=e}static fromPath(e){return new ph(Zc.fromString(e))}static fromName(e){return new ph(Zc.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===Zc.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Zc.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ph(new Zc(e.slice()))}}function mh(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?uh(e)?4:10:xc()}function gh(e,t){const n=mh(e);if(n!==mh(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ch(e).isEqual(ch(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=sh(e.timestampValue),r=sh(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ah(e.bytesValue).isEqual(ah(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return oh(e.geoPointValue.latitude)===oh(t.geoPointValue.latitude)&&oh(e.geoPointValue.longitude)===oh(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return oh(e.integerValue)===oh(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=oh(e.doubleValue),r=oh(t.doubleValue);return n===r?dh(n)===dh(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Kc(e.arrayValue.values||[],t.arrayValue.values||[],gh);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Qc(n)!==Qc(r))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!gh(n[e],r[e])))return!1;return!0}(e,t);default:return xc()}}function yh(e,t){return void 0!==(e.values||[]).find((e=>gh(e,t)))}function vh(e,t){const n=mh(e),r=mh(t);if(n!==r)return $c(n,r);switch(n){case 0:return 0;case 1:return $c(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=oh(e.integerValue||e.doubleValue),r=oh(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return wh(e.timestampValue,t.timestampValue);case 4:return wh(ch(e),ch(t));case 5:return $c(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ah(e),r=ah(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){const t=$c(n[e],r[e]);if(0!==t)return t}return $c(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=$c(oh(e.latitude),oh(t.latitude));return 0!==n?n:$c(oh(e.longitude),oh(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){const t=vh(n[e],r[e]);if(t)return t}return $c(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let e=0;e<r.length&&e<s.length;++e){const t=$c(r[e],s[e]);if(0!==t)return t;const o=vh(n[r[e]],i[s[e]]);if(0!==o)return o}return $c(r.length,s.length)}(e.mapValue,t.mapValue);default:throw xc()}}function wh(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return $c(e,t);const n=sh(e),r=sh(t),i=$c(n.seconds,r.seconds);return 0!==i?i:$c(n.nanos,r.nanos)}function bh(e){return _h(e)}function _h(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=sh(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ah(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ph.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=_h(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${_h(e.fields[i])}`;return n+"}"}(e.mapValue):xc();var t,n}function Eh(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Ih(e){return!!e&&"integerValue"in e}function Th(e){return!!e&&"arrayValue"in e}function Sh(e){return!!e&&"nullValue"in e}function kh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Nh(e){return!!e&&"mapValue"in e}function Ch(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Jc(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Ch(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ch(e.arrayValue.values[n]);return t}return Object.assign({},e)}class xh{constructor(e){this.value=e}static empty(){return new xh({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Nh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ch(t)}setAll(e){let t=th.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Ch(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Nh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return gh(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Nh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Jc(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new xh(Ch(this.value))}}function Ah(e){const t=[];return Jc(e.fields,((e,n)=>{const r=new th([e]);if(Nh(n)){const e=Ah(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new nh(t)}class Oh{constructor(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}static newInvalidDocument(e){return new Oh(e,0,Gc.min(),xh.empty(),0)}static newFoundDocument(e,t,n){return new Oh(e,1,t,n,0)}static newNoDocument(e,t){return new Oh(e,2,t,xh.empty(),0)}static newUnknownDocument(e,t){return new Oh(e,3,t,xh.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xh.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xh.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Oh&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new Oh(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Rh{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.A=null}}function Ph(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Rh(e,t,n,r,i,s,o)}function Dh(e){const t=Oc(e);if(null===t.A){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>function(e){return e.field.canonicalString()+e.op.toString()+bh(e.value)}(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),hh(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=Hh(t.startAt)),t.endAt&&(e+="|ub:",e+=Hh(t.endAt)),t.A=e}return t.A}function Lh(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Qh(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if(n=e.filters[i],r=t.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!gh(n.value,r.value))return!1;var n,r;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Yh(e.startAt,t.startAt)&&Yh(e.endAt,t.endAt)}function Mh(e){return ph.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Fh extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.R(e,t,n):new Uh(e,t,n):"array-contains"===t?new Bh(e,n):"in"===t?new qh(e,n):"not-in"===t?new $h(e,n):"array-contains-any"===t?new Kh(e,n):new Fh(e,t,n)}static R(e,t,n){return"in"===t?new jh(e,n):new Vh(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.P(vh(t,this.value)):null!==t&&mh(this.value)===mh(t)&&this.P(vh(t,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return xc()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Uh extends Fh{constructor(e,t,n){super(e,t,n),this.key=ph.fromName(n.referenceValue)}matches(e){const t=ph.comparator(e.key,this.key);return this.P(t)}}class jh extends Fh{constructor(e,t){super(e,"in",t),this.keys=zh(0,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Vh extends Fh{constructor(e,t){super(e,"not-in",t),this.keys=zh(0,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function zh(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>ph.fromName(e.referenceValue)))}class Bh extends Fh{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Th(t)&&yh(t.arrayValue,this.value)}}class qh extends Fh{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&yh(this.value.arrayValue,t)}}class $h extends Fh{constructor(e,t){super(e,"not-in",t)}matches(e){if(yh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!yh(this.value.arrayValue,t)}}class Kh extends Fh{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Th(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>yh(this.value.arrayValue,e)))}}class Wh{constructor(e,t){this.position=e,this.before=t}}function Hh(e){return`${e.before?"b":"a"}:${e.position.map((e=>bh(e))).join(",")}`}class Gh{constructor(e,t="asc"){this.field=e,this.dir=t}}function Qh(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Jh(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?ph.comparator(ph.fromName(o.referenceValue),n.key):vh(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function Yh(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!gh(e.position[n],t.position[n]))return!1;return!0}class Xh{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.V=null,this.S=null,this.startAt,this.endAt}}function Zh(e,t,n,r,i,s,o,a){return new Xh(e,t,n,r,i,s,o,a)}function ed(e){return new Xh(e)}function td(e){return!hh(e.limit)&&"F"===e.limitType}function nd(e){return!hh(e.limit)&&"L"===e.limitType}function rd(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function id(e){for(const t of e.filters)if(t.v())return t.field;return null}function sd(e){return null!==e.collectionGroup}function od(e){const t=Oc(e);if(null===t.V){t.V=[];const e=id(t),n=rd(t);if(null!==e&&null===n)e.isKeyField()||t.V.push(new Gh(e)),t.V.push(new Gh(th.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.V.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.V.push(new Gh(th.keyField(),e))}}}return t.V}function ad(e){const t=Oc(e);if(!t.S)if("F"===t.limitType)t.S=Ph(t.path,t.collectionGroup,od(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const n of od(t)){const t="desc"===n.dir?"asc":"desc";e.push(new Gh(n.field,t))}const n=t.endAt?new Wh(t.endAt.position,!t.endAt.before):null,r=t.startAt?new Wh(t.startAt.position,!t.startAt.before):null;t.S=Ph(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t.S}function ud(e,t,n){return new Xh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ld(e,t){return Lh(ad(e),ad(t))&&e.limitType===t.limitType}function cd(e){return`${Dh(ad(e))}|lt:${e.limitType}`}function hd(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>{return`${(t=e).field.canonicalString()} ${t.op} ${bh(t.value)}`;var t})).join(", ")}]`),hh(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: "+Hh(e.startAt)),e.endAt&&(t+=", endAt: "+Hh(e.endAt)),`Target(${t})`}(ad(e))}; limitType=${e.limitType})`}function dd(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ph.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!Jh(e.startAt,od(e),t)||e.endAt&&Jh(e.endAt,od(e),t))}(e,t)}function fd(e){return(t,n)=>{let r=!1;for(const i of od(e)){const e=pd(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function pd(e,t,n){const r=e.field.isKeyField()?ph.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?vh(r,i):xc()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return xc()}}function md(e,t){if(e.D){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dh(t)?"-0":t}}function gd(e){return{integerValue:""+e}}function yd(e,t){return fh(t)?gd(t):md(e,t)}class vd{constructor(){this._=void 0}}function wd(e,t,n){return e instanceof Ed?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Id?Td(e,t):e instanceof Sd?kd(e,t):function(e,t){const n=_d(e,t),r=Cd(n)+Cd(e.C);return Ih(n)&&Ih(e.C)?gd(r):md(e.N,r)}(e,t)}function bd(e,t,n){return e instanceof Id?Td(e,t):e instanceof Sd?kd(e,t):n}function _d(e,t){return e instanceof Nd?Ih(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Ed extends vd{}class Id extends vd{constructor(e){super(),this.elements=e}}function Td(e,t){const n=xd(t);for(const t of e.elements)n.some((e=>gh(e,t)))||n.push(t);return{arrayValue:{values:n}}}class Sd extends vd{constructor(e){super(),this.elements=e}}function kd(e,t){let n=xd(t);for(const t of e.elements)n=n.filter((e=>!gh(e,t)));return{arrayValue:{values:n}}}class Nd extends vd{constructor(e,t){super(),this.N=e,this.C=t}}function Cd(e){return oh(e.integerValue||e.doubleValue)}function xd(e){return Th(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ad{constructor(e,t){this.field=e,this.transform=t}}class Od{constructor(e,t){this.version=e,this.transformResults=t}}class Rd{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Rd}static exists(e){return new Rd(void 0,e)}static updateTime(e){return new Rd(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Dd{}function Ld(e,t,n){e instanceof Vd?function(e,t,n){const r=e.value.clone(),i=qd(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof zd?function(e,t,n){if(!Pd(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=qd(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Bd(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Md(e,t,n){e instanceof Vd?function(e,t,n){if(!Pd(e.precondition,t))return;const r=e.value.clone(),i=$d(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(jd(t),r).setHasLocalMutations()}(e,t,n):e instanceof zd?function(e,t,n){if(!Pd(e.precondition,t))return;const r=$d(e.fieldTransforms,n,t),i=t.data;i.setAll(Bd(e)),i.setAll(r),t.convertToFoundDocument(jd(t),i).setHasLocalMutations()}(e,t,n):function(e,t){Pd(e.precondition,t)&&t.convertToNoDocument(Gc.min())}(e,t)}function Fd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=_d(r.transform,e||null);null!=i&&(null==n&&(n=xh.empty()),n.set(r.field,i))}return n||null}function Ud(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Kc(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Id&&t instanceof Id||e instanceof Sd&&t instanceof Sd?Kc(e.elements,t.elements,gh):e instanceof Nd&&t instanceof Nd?gh(e.C,t.C):e instanceof Ed&&t instanceof Ed}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function jd(e){return e.isFoundDocument()?e.version:Gc.min()}class Vd extends Dd{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}}class zd extends Dd{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}}function Bd(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function qd(e,t,n){const r=new Map;Ac(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,bd(o,a,n[i]))}return r}function $d(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,wd(e,s,t))}return r}class Kd extends Dd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Wd extends Dd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Hd{constructor(e){this.count=e}}var Gd,Qd;function Jd(e){switch(e){case Rc.OK:return xc();case Rc.CANCELLED:case Rc.UNKNOWN:case Rc.DEADLINE_EXCEEDED:case Rc.RESOURCE_EXHAUSTED:case Rc.INTERNAL:case Rc.UNAVAILABLE:case Rc.UNAUTHENTICATED:return!1;case Rc.INVALID_ARGUMENT:case Rc.NOT_FOUND:case Rc.ALREADY_EXISTS:case Rc.PERMISSION_DENIED:case Rc.FAILED_PRECONDITION:case Rc.ABORTED:case Rc.OUT_OF_RANGE:case Rc.UNIMPLEMENTED:case Rc.DATA_LOSS:return!0;default:return xc()}}function Yd(e){if(void 0===e)return kc("GRPC error has no .code"),Rc.UNKNOWN;switch(e){case Gd.OK:return Rc.OK;case Gd.CANCELLED:return Rc.CANCELLED;case Gd.UNKNOWN:return Rc.UNKNOWN;case Gd.DEADLINE_EXCEEDED:return Rc.DEADLINE_EXCEEDED;case Gd.RESOURCE_EXHAUSTED:return Rc.RESOURCE_EXHAUSTED;case Gd.INTERNAL:return Rc.INTERNAL;case Gd.UNAVAILABLE:return Rc.UNAVAILABLE;case Gd.UNAUTHENTICATED:return Rc.UNAUTHENTICATED;case Gd.INVALID_ARGUMENT:return Rc.INVALID_ARGUMENT;case Gd.NOT_FOUND:return Rc.NOT_FOUND;case Gd.ALREADY_EXISTS:return Rc.ALREADY_EXISTS;case Gd.PERMISSION_DENIED:return Rc.PERMISSION_DENIED;case Gd.FAILED_PRECONDITION:return Rc.FAILED_PRECONDITION;case Gd.ABORTED:return Rc.ABORTED;case Gd.OUT_OF_RANGE:return Rc.OUT_OF_RANGE;case Gd.UNIMPLEMENTED:return Rc.UNIMPLEMENTED;case Gd.DATA_LOSS:return Rc.DATA_LOSS;default:return xc()}}(Qd=Gd||(Gd={}))[Qd.OK=0]="OK",Qd[Qd.CANCELLED=1]="CANCELLED",Qd[Qd.UNKNOWN=2]="UNKNOWN",Qd[Qd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qd[Qd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qd[Qd.NOT_FOUND=5]="NOT_FOUND",Qd[Qd.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qd[Qd.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qd[Qd.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qd[Qd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qd[Qd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qd[Qd.ABORTED=10]="ABORTED",Qd[Qd.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qd[Qd.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qd[Qd.INTERNAL=13]="INTERNAL",Qd[Qd.UNAVAILABLE=14]="UNAVAILABLE",Qd[Qd.DATA_LOSS=15]="DATA_LOSS";class Xd{constructor(e,t){this.comparator=e,this.root=t||ef.EMPTY}insert(e,t){return new Xd(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ef.BLACK,null,null))}remove(e){return new Xd(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ef.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zd(this.root,e,this.comparator,!0)}}class Zd{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ef{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ef.RED,this.left=null!=r?r:ef.EMPTY,this.right=null!=i?i:ef.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ef(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ef.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ef.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ef.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ef.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xc();if(this.right.isRed())throw xc();const e=this.left.check();if(e!==this.right.check())throw xc();return e+(this.isRed()?0:1)}}ef.EMPTY=null,ef.RED=!0,ef.BLACK=!1,ef.EMPTY=new class{constructor(){this.size=0}get key(){throw xc()}get value(){throw xc()}get color(){throw xc()}get left(){throw xc()}get right(){throw xc()}copy(e,t,n,r,i){return this}insert(e,t,n){return new ef(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class tf{constructor(e){this.comparator=e,this.data=new Xd(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nf(this.data.getIterator())}getIteratorFrom(e){return new nf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof tf))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new tf(this.comparator);return t.data=e,t}}class nf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const rf=new Xd(ph.comparator);function sf(){return rf}const of=new Xd(ph.comparator);function af(){return of}const uf=new Xd(ph.comparator);function lf(){return uf}const cf=new tf(ph.comparator);function hf(...e){let t=cf;for(const n of e)t=t.add(n);return t}const df=new tf($c);function ff(){return df}class pf{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,mf.createSynthesizedTargetChangeForCurrentChange(e,t)),new pf(Gc.min(),n,ff(),sf(),hf())}}class mf{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t){return new mf(rh.EMPTY_BYTE_STRING,t,hf(),hf(),hf())}}class gf{constructor(e,t,n,r){this.k=e,this.removedTargetIds=t,this.key=n,this.$=r}}class yf{constructor(e,t){this.targetId=e,this.O=t}}class vf{constructor(e,t,n=rh.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class wf{constructor(){this.F=0,this.M=Ef(),this.L=rh.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=hf(),t=hf(),n=hf();return this.M.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:xc()}})),new mf(this.L,this.B,e,t,n)}G(){this.U=!1,this.M=Ef()}H(e,t){this.U=!0,this.M=this.M.insert(e,t)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class bf{constructor(e){this.tt=e,this.et=new Map,this.nt=sf(),this.st=_f(),this.it=new tf($c)}rt(e){for(const t of e.k)e.$&&e.$.isFoundDocument()?this.ot(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ct(e){this.forEachTarget(e,(t=>{const n=this.ut(t);switch(e.state){case 0:this.ht(t)&&n.j(e.resumeToken);break;case 1:n.X(),n.q||n.G(),n.j(e.resumeToken);break;case 2:n.X(),n.q||this.removeTarget(t);break;case 3:this.ht(t)&&(n.Z(),n.j(e.resumeToken));break;case 4:this.ht(t)&&(this.lt(t),n.j(e.resumeToken));break;default:xc()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.et.forEach(((e,n)=>{this.ht(n)&&t(n)}))}ft(e){const t=e.targetId,n=e.O.count,r=this.dt(t);if(r){const e=r.target;if(Mh(e))if(0===n){const n=new ph(e.path);this.at(t,n,Oh.newNoDocument(n,Gc.min()))}else Ac(1===n);else this.wt(t)!==n&&(this.lt(t),this.it=this.it.add(t))}}_t(e){const t=new Map;this.et.forEach(((n,r)=>{const i=this.dt(r);if(i){if(n.current&&Mh(i.target)){const t=new ph(i.target.path);null!==this.nt.get(t)||this.gt(r,t)||this.at(r,t,Oh.newNoDocument(t,e))}n.K&&(t.set(r,n.W()),n.G())}}));let n=hf();this.st.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.dt(e);return!t||2===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))}));const r=new pf(e,t,this.it,this.nt,n);return this.nt=sf(),this.st=_f(),this.it=new tf($c),r}ot(e,t){if(!this.ht(e))return;const n=this.gt(e,t.key)?2:0;this.ut(e).H(t.key,n),this.nt=this.nt.insert(t.key,t),this.st=this.st.insert(t.key,this.yt(t.key).add(e))}at(e,t,n){if(!this.ht(e))return;const r=this.ut(e);this.gt(e,t)?r.H(t,1):r.J(t),this.st=this.st.insert(t,this.yt(t).delete(e)),n&&(this.nt=this.nt.insert(t,n))}removeTarget(e){this.et.delete(e)}wt(e){const t=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let t=this.et.get(e);return t||(t=new wf,this.et.set(e,t)),t}yt(e){let t=this.st.get(e);return t||(t=new tf($c),this.st=this.st.insert(e,t)),t}ht(e){const t=null!==this.dt(e);return t||Sc("WatchChangeAggregator","Detected inactive target",e),t}dt(e){const t=this.et.get(e);return t&&t.q?null:this.tt.Et(e)}lt(e){this.et.set(e,new wf),this.tt.getRemoteKeysForTarget(e).forEach((t=>{this.at(e,t,null)}))}gt(e,t){return this.tt.getRemoteKeysForTarget(e).has(t)}}function _f(){return new Xd(ph.comparator)}function Ef(){return new Xd(ph.comparator)}const If={asc:"ASCENDING",desc:"DESCENDING"},Tf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Sf{constructor(e,t){this.databaseId=e,this.D=t}}function kf(e,t){return e.D?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Nf(e,t){return e.D?t.toBase64():t.toUint8Array()}function Cf(e,t){return kf(e,t.toTimestamp())}function xf(e){return Ac(!!e),Gc.fromTimestamp(function(e){const t=sh(e);return new Hc(t.seconds,t.nanos)}(e))}function Af(e,t){return function(e){return new Zc(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Of(e){const t=Zc.fromString(e);return Ac(tp(t)),t}function Rf(e,t){return Af(e.databaseId,t.path)}function Pf(e,t){const n=Of(t);if(n.get(1)!==e.databaseId.projectId)throw new Pc(Rc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Pc(Rc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ph(Ff(n))}function Df(e,t){return Af(e.databaseId,t)}function Lf(e){const t=Of(e);return 4===t.length?Zc.emptyPath():Ff(t)}function Mf(e){return new Zc(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ff(e){return Ac(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Uf(e,t,n){return{name:Rf(e,t),fields:n.value.mapValue.fields}}function jf(e,t,n){const r=Pf(e,t.name),i=xf(t.updateTime),s=new xh({mapValue:{fields:t.fields}}),o=Oh.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Vf(e,t){let n;if(t instanceof Vd)n={update:Uf(e,t.key,t.value)};else if(t instanceof Kd)n={delete:Rf(e,t.key)};else if(t instanceof zd)n={update:Uf(e,t.key,t.data),updateMask:ep(t.fieldMask)};else{if(!(t instanceof Wd))return xc();n={verify:Rf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Ed)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Id)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Sd)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Nd)return{fieldPath:t.field.canonicalString(),increment:n.C};throw xc()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Cf(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:xc()}(e,t.precondition)),n}function zf(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Rd.updateTime(xf(e.updateTime)):void 0!==e.exists?Rd.exists(e.exists):Rd.none()}(t.currentDocument):Rd.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Ac("REQUEST_TIME"===t.setToServerValue),n=new Ed;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Id(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Sd(e)}else"increment"in t?n=new Nd(e,t.increment):xc();const r=th.fromServerFormat(t.fieldPath);return new Ad(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Pf(e,t.update.name),s=new xh({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new nh(t.map((e=>th.fromServerFormat(e))))}(t.updateMask);return new zd(i,s,e,n,r)}return new Vd(i,s,n,r)}if(t.delete){const r=Pf(e,t.delete);return new Kd(r,n)}if(t.verify){const r=Pf(e,t.verify);return new Wd(r,n)}return xc()}function Bf(e,t){return{documents:[Df(e,t.path)]}}function qf(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Df(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Df(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0===e.length)return;const t=e.map((e=>function(e){if("=="===e.op){if(kh(e.value))return{unaryFilter:{field:Jf(e.field),op:"IS_NAN"}};if(Sh(e.value))return{unaryFilter:{field:Jf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(kh(e.value))return{unaryFilter:{field:Jf(e.field),op:"IS_NOT_NAN"}};if(Sh(e.value))return{unaryFilter:{field:Jf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jf(e.field),op:Qf(e.op),value:e.value}}}(e)));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Jf(e.field),direction:Gf(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(e,t){return e.D||hh(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=Wf(t.startAt)),t.endAt&&(n.structuredQuery.endAt=Wf(t.endAt)),n}function $f(e){let t=Lf(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ac(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=Kf(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>function(e){return new Gh(Yf(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,hh(t)?null:t}(n.limit));let u=null;n.startAt&&(u=Hf(n.startAt));let l=null;return n.endAt&&(l=Hf(n.endAt)),Zh(t,i,o,s,a,"F",u,l)}function Kf(e){return e?void 0!==e.unaryFilter?[Zf(e)]:void 0!==e.fieldFilter?[Xf(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((e=>Kf(e))).reduce(((e,t)=>e.concat(t))):xc():[]}function Wf(e){return{before:e.before,values:e.position}}function Hf(e){const t=!!e.before,n=e.values||[];return new Wh(n,t)}function Gf(e){return If[e]}function Qf(e){return Tf[e]}function Jf(e){return{fieldPath:e.canonicalString()}}function Yf(e){return th.fromServerFormat(e.fieldPath)}function Xf(e){return Fh.create(Yf(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return xc()}}(e.fieldFilter.op),e.fieldFilter.value)}function Zf(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Yf(e.unaryFilter.field);return Fh.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Yf(e.unaryFilter.field);return Fh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Yf(e.unaryFilter.field);return Fh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Yf(e.unaryFilter.field);return Fh.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return xc()}}function ep(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function tp(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function np(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ip(t)),t=rp(e.get(n),t);return ip(t)}function rp(e,t){let n=t;const r=e.length;for(let t=0;t<r;t++){const r=e.charAt(t);switch(r){case"\0":n+="";break;case"":n+="";break;default:n+=r}}return n}function ip(e){return e+""}function sp(e){const t=e.length;if(Ac(t>=2),2===t)return Ac(""===e.charAt(0)&&""===e.charAt(1)),Zc.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("",s);switch((t<0||t>n)&&xc(),e.charAt(t+1)){case"":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"":i+=e.substring(s,t),i+="\0";break;case"":i+=e.substring(s,t+1);break;default:xc()}s=t+2}return new Zc(r)}class op{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class ap{constructor(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}}ap.store="owner",ap.key="owner";class up{constructor(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}}up.store="mutationQueues",up.keyPath="userId";class lp{constructor(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}}lp.store="mutations",lp.keyPath="batchId",lp.userMutationsIndex="userMutationsIndex",lp.userMutationsKeyPath=["userId","batchId"];class cp{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,np(t)]}static key(e,t,n){return[e,np(t),n]}}cp.store="documentMutations",cp.PLACEHOLDER=new cp;class hp{constructor(e,t){this.path=e,this.readTime=t}}class dp{constructor(e,t){this.path=e,this.version=t}}class fp{constructor(e,t,n,r,i,s){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s}}fp.store="remoteDocuments",fp.readTimeIndex="readTimeIndex",fp.readTimeIndexPath="readTime",fp.collectionReadTimeIndex="collectionReadTimeIndex",fp.collectionReadTimeIndexPath=["parentPath","readTime"];class pp{constructor(e){this.byteSize=e}}pp.store="remoteDocumentGlobal",pp.key="remoteDocumentGlobalKey";class mp{constructor(e,t,n,r,i,s,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o}}mp.store="targets",mp.keyPath="targetId",mp.queryTargetsIndexName="queryTargetsIndex",mp.queryTargetsKeyPath=["canonicalId","targetId"];class gp{constructor(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n}}gp.store="targetDocuments",gp.keyPath=["targetId","path"],gp.documentTargetsIndex="documentTargetsIndex",gp.documentTargetsKeyPath=["path","targetId"];class yp{constructor(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}}yp.key="targetGlobalKey",yp.store="targetGlobal";class vp{constructor(e,t){this.collectionId=e,this.parent=t}}vp.store="collectionParents",vp.keyPath=["collectionId","parent"];class wp{constructor(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}}wp.store="clientMetadata",wp.keyPath="clientId";class bp{constructor(e,t,n){this.bundleId=e,this.createTime=t,this.version=n}}bp.store="bundles",bp.keyPath="bundleId";class _p{constructor(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n}}_p.store="namedQueries",_p.keyPath="name";const Ep=[up.store,lp.store,cp.store,fp.store,mp.store,ap.store,yp.store,gp.store,wp.store,pp.store,vp.store,bp.store,_p.store],Ip="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Tp{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}class Sp{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xc(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Sp(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Sp?t:Sp.resolve(t)}catch(e){return Sp.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Sp.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Sp.reject(t)}static resolve(e){return new Sp(((t,n)=>{t(e)}))}static reject(e){return new Sp(((t,n)=>{n(e)}))}static waitFor(e){return new Sp(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Sp.resolve(!1);for(const n of e)t=t.next((e=>e?Sp.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}}class kp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.Tt=new Dc,this.transaction.oncomplete=()=>{this.Tt.resolve()},this.transaction.onabort=()=>{t.error?this.Tt.reject(new xp(e,t.error)):this.Tt.resolve()},this.transaction.onerror=t=>{const n=Dp(t.target.error);this.Tt.reject(new xp(e,n))}}static open(e,t,n,r){try{return new kp(t,e.transaction(r,n))}catch(e){throw new xp(t,e)}}get It(){return this.Tt.promise}abort(e){e&&this.Tt.reject(e),this.aborted||(Sc("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new Op(t)}}class Np{constructor(e,t,n){this.name=e,this.version=t,this.At=n,12.2===Np.Rt(rt())&&kc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Sc("SimpleDb","Removing database:",e),Rp(window.indexedDB.deleteDatabase(e)).toPromise()}static Pt(){if("undefined"==typeof indexedDB)return!1;if(Np.bt())return!0;const e=rt(),t=Np.Rt(e),n=0<t&&t<10,r=Np.vt(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static bt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Vt)}static St(e,t){return e.store(t)}static Rt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static vt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async Dt(e){return this.db||(Sc("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new xp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Pc(Rc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):n(new xp(e,r))},r.onupgradeneeded=e=>{Sc("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.At.Ct(t,r.transaction,e.oldVersion,this.version).next((()=>{Sc("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.Nt&&(this.db.onversionchange=e=>this.Nt(e)),this.db}xt(e){this.Nt=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.Dt(e);const t=kp.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).catch((e=>(t.abort(e),Sp.reject(e)))).toPromise();return s.catch((()=>{})),await t.It,s}catch(e){const t="FirebaseError"!==e.name&&s<3;if(Sc("SimpleDb","Transaction failed with error:",e.message,"Retrying:",t),this.close(),!t)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Cp{constructor(e){this.kt=e,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(e){this.kt=e}done(){this.$t=!0}Mt(e){this.Ot=e}delete(){return Rp(this.kt.delete())}}class xp extends Pc{constructor(e,t){super(Rc.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ap(e){return"IndexedDbTransactionError"===e.name}class Op{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Sc("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Sc("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Rp(n)}add(e){return Sc("SimpleDb","ADD",this.store.name,e,e),Rp(this.store.add(e))}get(e){return Rp(this.store.get(e)).next((t=>(void 0===t&&(t=null),Sc("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Sc("SimpleDb","DELETE",this.store.name,e),Rp(this.store.delete(e))}count(){return Sc("SimpleDb","COUNT",this.store.name),Rp(this.store.count())}Lt(e,t){const n=this.cursor(this.options(e,t)),r=[];return this.Bt(n,((e,t)=>{r.push(t)})).next((()=>r))}Ut(e,t){Sc("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.qt=!1;const r=this.cursor(n);return this.Bt(r,((e,t,n)=>n.delete()))}Kt(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.Bt(r,t)}jt(e){const t=this.cursor({});return new Sp(((n,r)=>{t.onerror=e=>{const t=Dp(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}Bt(e,t){const n=[];return new Sp(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Cp(i),o=t(i.primaryKey,i.value,s);if(o instanceof Sp){const e=o.catch((e=>(s.done(),Sp.reject(e))));n.push(e)}s.isDone?r():null===s.Ft?i.continue():i.continue(s.Ft)}})).next((()=>Sp.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.qt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Rp(e){return new Sp(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Dp(e.target.error);n(t)}}))}let Pp=!1;function Dp(e){const t=Np.Rt(rt());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Pc("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Pp||(Pp=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Lp extends Tp{constructor(e,t){super(),this.Qt=e,this.currentSequenceNumber=t}}function Mp(e,t){const n=Oc(e);return Np.St(n.Qt,t)}class Fp{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const r=this.mutations[t];r.key.isEqual(e.key)&&Ld(r,e,n[t])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Md(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Md(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach((t=>{const n=e.get(t.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(Gc.min())}))}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),hf())}isEqual(e){return this.batchId===e.batchId&&Kc(this.mutations,e.mutations,((e,t)=>Ud(e,t)))&&Kc(this.baseMutations,e.baseMutations,((e,t)=>Ud(e,t)))}}class Up{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ac(e.mutations.length===n.length);let r=lf();const i=e.mutations;for(let e=0;e<i.length;e++)r=r.insert(i[e].key,n[e].version);return new Up(e,t,n,r)}}class jp{constructor(e,t,n,r,i=Gc.min(),s=Gc.min(),o=rh.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new jp(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new jp(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new jp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Vp{constructor(e){this.Wt=e}}function zp(e,t){if(t.document)return jf(e.Wt,t.document,!!t.hasCommittedMutations);if(t.noDocument){const e=ph.fromSegments(t.noDocument.path),n=Wp(t.noDocument.readTime),r=Oh.newNoDocument(e,n);return t.hasCommittedMutations?r.setHasCommittedMutations():r}if(t.unknownDocument){const e=ph.fromSegments(t.unknownDocument.path),n=Wp(t.unknownDocument.version);return Oh.newUnknownDocument(e,n)}return xc()}function Bp(e,t,n){const r=qp(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){const n=function(e,t){return{name:Rf(e,t.key),fields:t.data.value.mapValue.fields,updateTime:kf(e,t.version.toTimestamp())}}(e.Wt,t),s=t.hasCommittedMutations;return new fp(null,null,n,s,r,i)}if(t.isNoDocument()){const e=t.key.path.toArray(),n=Kp(t.version),s=t.hasCommittedMutations;return new fp(null,new hp(e,n),null,s,r,i)}if(t.isUnknownDocument()){const e=t.key.path.toArray(),n=Kp(t.version);return new fp(new dp(e,n),null,null,!0,r,i)}return xc()}function qp(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function $p(e){const t=new Hc(e[0],e[1]);return Gc.fromTimestamp(t)}function Kp(e){const t=e.toTimestamp();return new op(t.seconds,t.nanoseconds)}function Wp(e){const t=new Hc(e.seconds,e.nanoseconds);return Gc.fromTimestamp(t)}function Hp(e,t){const n=(t.baseMutations||[]).map((t=>zf(e.Wt,t)));for(let e=0;e<t.mutations.length-1;++e){const n=t.mutations[e];if(e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform){const r=t.mutations[e+1];n.updateTransforms=r.transform.fieldTransforms,t.mutations.splice(e+1,1),++e}}const r=t.mutations.map((t=>zf(e.Wt,t))),i=Hc.fromMillis(t.localWriteTimeMs);return new Fp(t.batchId,i,n,r)}function Gp(e){const t=Wp(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Wp(e.lastLimboFreeSnapshotVersion):Gc.min();let r;var i;return void 0!==e.query.documents?(Ac(1===(i=e.query).documents.length),r=ad(ed(Lf(i.documents[0])))):r=function(e){return ad($f(e))}(e.query),new jp(r,e.targetId,0,e.lastListenSequenceNumber,t,n,rh.fromBase64String(e.resumeToken))}function Qp(e,t){const n=Kp(t.snapshotVersion),r=Kp(t.lastLimboFreeSnapshotVersion);let i;i=Mh(t.target)?Bf(e.Wt,t.target):qf(e.Wt,t.target);const s=t.resumeToken.toBase64();return new mp(t.targetId,Dh(t.target),n,s,t.sequenceNumber,r,i)}function Jp(e){const t=$f({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ud(t,t.limit,"L"):t}class Yp{getBundleMetadata(e,t){return Xp(e).get(t).next((e=>{if(e)return{id:(t=e).bundleId,createTime:Wp(t.createTime),version:t.version};var t}))}saveBundleMetadata(e,t){return Xp(e).put({bundleId:(n=t).id,createTime:Kp(xf(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return Zp(e).get(t).next((e=>{if(e)return{name:(t=e).name,query:Jp(t.bundledQuery),readTime:Wp(t.readTime)};var t}))}saveNamedQuery(e,t){return Zp(e).put(function(e){return{name:e.name,readTime:Kp(xf(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Xp(e){return Mp(e,bp.store)}function Zp(e){return Mp(e,_p.store)}class em{constructor(){this.Gt=new tm}addToCollectionParentIndex(e,t){return this.Gt.add(t),Sp.resolve()}getCollectionParents(e,t){return Sp.resolve(this.Gt.getEntries(t))}}class tm{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new tf(Zc.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new tf(Zc.comparator)).toArray()}}class nm{constructor(){this.zt=new tm}addToCollectionParentIndex(e,t){if(!this.zt.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.zt.add(t)}));const i={collectionId:n,parent:np(r)};return rm(e).put(i)}return Sp.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Wc(t),""],!1,!0);return rm(e).Lt(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(sp(r.parent))}return n}))}}function rm(e){return Mp(e,vp.store)}const im={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class sm{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new sm(e,sm.DEFAULT_COLLECTION_PERCENTILE,sm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function om(e,t,n){const r=e.store(lp.store),i=e.store(cp.store),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.Kt({range:o},((e,t,n)=>(a++,n.delete())));s.push(u.next((()=>{Ac(1===a)})));const l=[];for(const e of n.mutations){const r=cp.key(t,e.key.path,n.batchId);s.push(i.delete(r)),l.push(e.key)}return Sp.waitFor(s).next((()=>l))}function am(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw xc();t=e.noDocument}return JSON.stringify(t).length}sm.DEFAULT_COLLECTION_PERCENTILE=10,sm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sm.DEFAULT=new sm(41943040,sm.DEFAULT_COLLECTION_PERCENTILE,sm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sm.DISABLED=new sm(-1,0,0);class um{constructor(e,t,n,r){this.userId=e,this.N=t,this.Ht=n,this.referenceDelegate=r,this.Jt={}}static Yt(e,t,n,r){Ac(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new um(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cm(e).Kt({index:lp.userMutationsIndex,range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=hm(e),s=cm(e);return s.add({}).next((o=>{Ac("number"==typeof o);const a=new Fp(o,t,n,r),u=function(e,t,n){const r=n.baseMutations.map((t=>Vf(e.Wt,t))),i=n.mutations.map((t=>Vf(e.Wt,t)));return new lp(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(this.N,this.userId,a),l=[];let c=new tf(((e,t)=>$c(e.canonicalString(),t.canonicalString())));for(const e of r){const t=cp.key(this.userId,e.key.path,o);c=c.add(e.key.path.popLast()),l.push(s.put(u)),l.push(i.put(t,cp.PLACEHOLDER))}return c.forEach((t=>{l.push(this.Ht.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Jt[o]=a.keys()})),Sp.waitFor(l).next((()=>a))}))}lookupMutationBatch(e,t){return cm(e).get(t).next((e=>e?(Ac(e.userId===this.userId),Hp(this.N,e)):null))}Xt(e,t){return this.Jt[t]?Sp.resolve(this.Jt[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Jt[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return cm(e).Kt({index:lp.userMutationsIndex,range:r},((e,t,r)=>{t.userId===this.userId&&(Ac(t.batchId>=n),i=Hp(this.N,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return cm(e).Kt({index:lp.userMutationsIndex,range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return cm(e).Lt(lp.userMutationsIndex,t).next((e=>e.map((e=>Hp(this.N,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=cp.prefixForPath(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return hm(e).Kt({range:r},((n,r,s)=>{const[o,a,u]=n,l=sp(a);if(o===this.userId&&t.path.isEqual(l))return cm(e).get(u).next((e=>{if(!e)throw xc();Ac(e.userId===this.userId),i.push(Hp(this.N,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new tf($c);const r=[];return t.forEach((t=>{const i=cp.prefixForPath(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=hm(e).Kt({range:s},((e,r,i)=>{const[s,o,a]=e,u=sp(o);s===this.userId&&t.path.isEqual(u)?n=n.add(a):i.done()}));r.push(o)})),Sp.waitFor(r).next((()=>this.Zt(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=cp.prefixForPath(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new tf($c);return hm(e).Kt({range:s},((e,t,i)=>{const[s,a,u]=e,l=sp(a);s===this.userId&&n.isPrefixOf(l)?l.length===r&&(o=o.add(u)):i.done()})).next((()=>this.Zt(e,o)))}Zt(e,t){const n=[],r=[];return t.forEach((t=>{r.push(cm(e).get(t).next((e=>{if(null===e)throw xc();Ac(e.userId===this.userId),n.push(Hp(this.N,e))})))})),Sp.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return om(e.Qt,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.te(t.batchId)})),Sp.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}te(e){delete this.Jt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Sp.resolve();const n=IDBKeyRange.lowerBound(cp.prefixForUser(this.userId)),r=[];return hm(e).Kt({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=sp(e[1]);r.push(t)}else n.done()})).next((()=>{Ac(0===r.length)}))}))}containsKey(e,t){return lm(e,this.userId,t)}ee(e){return dm(e).get(this.userId).next((e=>e||new up(this.userId,-1,"")))}}function lm(e,t,n){const r=cp.prefixForPath(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return hm(e).Kt({range:s,qt:!0},((e,n,r)=>{const[s,a,u]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function cm(e){return Mp(e,lp.store)}function hm(e){return Mp(e,cp.store)}function dm(e){return Mp(e,up.store)}class fm{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new fm(0)}static ie(){return new fm(-1)}}class pm{constructor(e,t){this.referenceDelegate=e,this.N=t}allocateTargetId(e){return this.re(e).next((t=>{const n=new fm(t.highestTargetId);return t.highestTargetId=n.next(),this.oe(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.re(e).next((e=>Gc.fromTimestamp(new Hc(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.re(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.re(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.oe(e,r))))}addTargetData(e,t){return this.ae(e,t).next((()=>this.re(e).next((n=>(n.targetCount+=1,this.ce(t,n),this.oe(e,n))))))}updateTargetData(e,t){return this.ae(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>mm(e).delete(t.targetId))).next((()=>this.re(e))).next((t=>(Ac(t.targetCount>0),t.targetCount-=1,this.oe(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return mm(e).Kt(((s,o)=>{const a=Gp(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Sp.waitFor(i))).next((()=>r))}forEachTarget(e,t){return mm(e).Kt(((e,n)=>{const r=Gp(n);t(r)}))}re(e){return gm(e).get(yp.key).next((e=>(Ac(null!==e),e)))}oe(e,t){return gm(e).put(yp.key,t)}ae(e,t){return mm(e).put(Qp(this.N,t))}ce(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.re(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Dh(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return mm(e).Kt({range:r,index:mp.queryTargetsIndexName},((e,n,r)=>{const s=Gp(n);Lh(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=ym(e);return t.forEach((t=>{const s=np(t.path);r.push(i.put(new gp(n,s))),r.push(this.referenceDelegate.addReference(e,n,t))})),Sp.waitFor(r)}removeMatchingKeys(e,t,n){const r=ym(e);return Sp.forEach(t,(t=>{const i=np(t.path);return Sp.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=ym(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=ym(e);let i=hf();return r.Kt({range:n,qt:!0},((e,t,n)=>{const r=sp(e[1]),s=new ph(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=np(t.path),r=IDBKeyRange.bound([n],[Wc(n)],!1,!0);let i=0;return ym(e).Kt({index:gp.documentTargetsIndex,qt:!0,range:r},(([e,t],n,r)=>{0!==e&&(i++,r.done())})).next((()=>i>0))}Et(e,t){return mm(e).get(t).next((e=>e?Gp(e):null))}}function mm(e){return Mp(e,mp.store)}function gm(e){return Mp(e,yp.store)}function ym(e){return Mp(e,gp.store)}async function vm(e){if(e.code!==Rc.FAILED_PRECONDITION||e.message!==Ip)throw e;Sc("LocalStore","Unexpectedly lost primary lease")}function wm([e,t],[n,r]){const i=$c(e,n);return 0===i?$c(t,r):i}class bm{constructor(e){this.ue=e,this.buffer=new tf(wm),this.he=0}le(){return++this.he}fe(e){const t=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();wm(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _m{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.de=!1,this.we=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(e){const t=this.de?3e5:6e4;Sc("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.we=null,this.de=!0;try{await e.collectGarbage(this.garbageCollector)}catch(e){Ap(e)?Sc("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await vm(e)}await this._e(e)}))}}class Em{constructor(e,t){this.me=e,this.params=t}calculateTargetCount(e,t){return this.me.ge(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Sp.resolve(zc.T);const n=new bm(t);return this.me.forEachTarget(e,(e=>n.fe(e.sequenceNumber))).next((()=>this.me.ye(e,(e=>n.fe(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.me.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.me.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Sc("LruGarbageCollector","Garbage collection skipped; disabled"),Sp.resolve(im)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Sc("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),im):this.pe(e,t)))}getCacheSize(e){return this.me.getCacheSize(e)}pe(e,t){let n,r,i,s,o,a,u;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Sc("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(u=Date.now(),Tc()<=At.DEBUG&&Sc("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-l}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(u-a)+"ms\n"+`Total Duration: ${u-l}ms`),Sp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}class Im{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new Em(e,t)}(this,t)}ge(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Ee(e){let t=0;return this.ye(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ye(e,t){return this.Te(e,((e,n)=>t(n)))}addReference(e,t,n){return Tm(e,n)}removeReference(e,t,n){return Tm(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Tm(e,t)}Ie(e,t){return function(e,t){let n=!1;return dm(e).jt((r=>lm(e,r,t).next((e=>(e&&(n=!0),Sp.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Te(e,((s,o)=>{if(o<=t){const t=this.Ie(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s),ym(e).delete([0,np(s.path)]))))}));r.push(t)}})).next((()=>Sp.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Tm(e,t)}Te(e,t){const n=ym(e);let r,i=zc.T;return n.Kt({index:gp.documentTargetsIndex},(([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==zc.T&&t(new ph(sp(r)),i),i=o,r=s):i=zc.T})).next((()=>{i!==zc.T&&t(new ph(sp(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Tm(e,t){return ym(e).put(function(e,t){return new gp(0,np(e.path),t)}(t,e.currentSequenceNumber))}class Sm{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,r]of n)if(this.equalsFn(t,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}forEach(e){Jc(this.inner,((t,n)=>{for(const[t,r]of n)e(t,r)}))}isEmpty(){return Yc(this.inner)}}class km{constructor(){this.changes=new Sm((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:Gc.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:Oh.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Sp.resolve(n.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Nm{constructor(e,t){this.N=e,this.Ht=t}addEntry(e,t,n){return Am(e).put(Om(t),n)}removeEntry(e,t){const n=Am(e),r=Om(t);return n.delete(r)}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Ae(e,n))))}getEntry(e,t){return Am(e).get(Om(t)).next((e=>this.Re(t,e)))}Pe(e,t){return Am(e).get(Om(t)).next((e=>({document:this.Re(t,e),size:am(e)})))}getEntries(e,t){let n=sf();return this.be(e,t,((e,t)=>{const r=this.Re(e,t);n=n.insert(e,r)})).next((()=>n))}ve(e,t){let n=sf(),r=new Xd(ph.comparator);return this.be(e,t,((e,t)=>{const i=this.Re(e,t);n=n.insert(e,i),r=r.insert(e,am(t))})).next((()=>({documents:n,Ve:r})))}be(e,t,n){if(t.isEmpty())return Sp.resolve();const r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator();let s=i.getNext();return Am(e).Kt({range:r},((e,t,r)=>{const o=ph.fromSegments(e);for(;s&&ph.comparator(s,o)<0;)n(s,null),s=i.getNext();s&&s.isEqual(o)&&(n(s,t),s=i.hasNext()?i.getNext():null),s?r.Mt(s.path.toArray()):r.done()})).next((()=>{for(;s;)n(s,null),s=i.hasNext()?i.getNext():null}))}getDocumentsMatchingQuery(e,t,n){let r=sf();const i=t.path.length+1,s={};if(n.isEqual(Gc.min())){const e=t.path.toArray();s.range=IDBKeyRange.lowerBound(e)}else{const e=t.path.toArray(),r=qp(n);s.range=IDBKeyRange.lowerBound([e,r],!0),s.index=fp.collectionReadTimeIndex}return Am(e).Kt(s,((e,n,s)=>{if(e.length!==i)return;const o=zp(this.N,n);t.path.isPrefixOf(o.key.path)?dd(t,o)&&(r=r.insert(o.key,o)):s.done()})).next((()=>r))}newChangeBuffer(e){return new Cm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return xm(e).get(pp.key).next((e=>(Ac(!!e),e)))}Ae(e,t){return xm(e).put(pp.key,t)}Re(e,t){if(t){const e=zp(this.N,t);if(!e.isNoDocument()||!e.version.isEqual(Gc.min()))return e}return Oh.newInvalidDocument(e)}}class Cm extends km{constructor(e,t){super(),this.Se=e,this.trackRemovals=t,this.De=new Sm((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new tf(((e,t)=>$c(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.De.get(i);if(s.document.isValidDocument()){const a=Bp(this.Se.N,s.document,this.getReadTime(i));r=r.add(i.path.popLast());const u=am(a);n+=u-o,t.push(this.Se.addEntry(e,i,a))}else if(n-=o,this.trackRemovals){const n=Bp(this.Se.N,Oh.newNoDocument(i,Gc.min()),this.getReadTime(i));t.push(this.Se.addEntry(e,i,n))}else t.push(this.Se.removeEntry(e,i))})),r.forEach((n=>{t.push(this.Se.Ht.addToCollectionParentIndex(e,n))})),t.push(this.Se.updateMetadata(e,n)),Sp.waitFor(t)}getFromCache(e,t){return this.Se.Pe(e,t).next((e=>(this.De.set(t,e.size),e.document)))}getAllFromCache(e,t){return this.Se.ve(e,t).next((({documents:e,Ve:t})=>(t.forEach(((e,t)=>{this.De.set(e,t)})),e)))}}function xm(e){return Mp(e,pp.store)}function Am(e){return Mp(e,fp.store)}function Om(e){return e.path.toArray()}class Rm{constructor(e){this.N=e}Ct(e,t,n,r){Ac(n<r&&n>=0&&r<=11);const i=new kp("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(ap.store)}(e),function(e){e.createObjectStore(up.store,{keyPath:up.keyPath}),e.createObjectStore(lp.store,{keyPath:lp.keyPath,autoIncrement:!0}).createIndex(lp.userMutationsIndex,lp.userMutationsKeyPath,{unique:!0}),e.createObjectStore(cp.store)}(e),Pm(e),function(e){e.createObjectStore(fp.store)}(e));let s=Sp.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(gp.store),e.deleteObjectStore(mp.store),e.deleteObjectStore(yp.store)}(e),Pm(e)),s=s.next((()=>function(e){const t=e.store(yp.store),n=new yp(0,0,Gc.min().toTimestamp(),0);return t.put(yp.key,n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store(lp.store).Lt().next((n=>{e.deleteObjectStore(lp.store),e.createObjectStore(lp.store,{keyPath:lp.keyPath,autoIncrement:!0}).createIndex(lp.userMutationsIndex,lp.userMutationsKeyPath,{unique:!0});const r=t.store(lp.store),i=n.map((e=>r.put(e)));return Sp.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore(wp.store,{keyPath:wp.keyPath})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Ce(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore(pp.store)}(e),this.Ne(i))))),n<7&&r>=7&&(s=s.next((()=>this.xe(i)))),n<8&&r>=8&&(s=s.next((()=>this.ke(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){const t=e.objectStore(fp.store);t.createIndex(fp.readTimeIndex,fp.readTimeIndexPath,{unique:!1}),t.createIndex(fp.collectionReadTimeIndex,fp.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(s=s.next((()=>this.$e(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore(bp.store,{keyPath:bp.keyPath})}(e),function(e){e.createObjectStore(_p.store,{keyPath:_p.keyPath})}(e)}))),s}Ne(e){let t=0;return e.store(fp.store).Kt(((e,n)=>{t+=am(n)})).next((()=>{const n=new pp(t);return e.store(pp.store).put(pp.key,n)}))}Ce(e){const t=e.store(up.store),n=e.store(lp.store);return t.Lt().next((t=>Sp.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.Lt(lp.userMutationsIndex,r).next((n=>Sp.forEach(n,(n=>{Ac(n.userId===t.userId);const r=Hp(this.N,n);return om(e,t.userId,r).next((()=>{}))}))))}))))}xe(e){const t=e.store(gp.store),n=e.store(fp.store);return e.store(yp.store).get(yp.key).next((e=>{const r=[];return n.Kt(((n,i)=>{const s=new Zc(n),o=function(e){return[0,np(e)]}(s);r.push(t.get(o).next((n=>n?Sp.resolve():(n=>t.put(new gp(0,np(n),e.highestListenSequenceNumber)))(s))))})).next((()=>Sp.waitFor(r)))}))}ke(e,t){e.createObjectStore(vp.store,{keyPath:vp.keyPath});const n=t.store(vp.store),r=new tm,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:np(r)})}};return t.store(fp.store).Kt({qt:!0},((e,t)=>{const n=new Zc(e);return i(n.popLast())})).next((()=>t.store(cp.store).Kt({qt:!0},(([e,t,n],r)=>{const s=sp(t);return i(s.popLast())}))))}$e(e){const t=e.store(mp.store);return t.Kt(((e,n)=>{const r=Gp(n),i=Qp(this.N,r);return t.put(i)}))}}function Pm(e){e.createObjectStore(gp.store,{keyPath:gp.keyPath}).createIndex(gp.documentTargetsIndex,gp.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(mp.store,{keyPath:mp.keyPath}).createIndex(mp.queryTargetsIndexName,mp.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(yp.store)}const Dm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Lm{constructor(e,t,n,r,i,s,o,a,u,l){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Oe=i,this.window=s,this.document=o,this.Fe=u,this.Me=l,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=e=>Promise.resolve(),!Lm.Pt())throw new Pc(Rc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Im(this,r),this.We=t+"main",this.N=new Vp(a),this.Ge=new Np(this.We,11,new Rm(this.N)),this.ze=new pm(this.referenceDelegate,this.N),this.Ht=new nm,this.He=function(e,t){return new Nm(e,t)}(this.N,this.Ht),this.Je=new Yp,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===l&&kc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pc(Rc.FAILED_PRECONDITION,Dm);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.ze.getHighestSequenceNumber(e)))})).then((e=>{this.Le=new zc(e,this.Fe)})).then((()=>{this.Be=!0})).catch((e=>(this.Ge&&this.Ge.close(),Promise.reject(e))))}nn(e){return this.Qe=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ge.xt((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((async()=>{this.started&&await this.Xe()})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Fm(e).put(new wp(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next((()=>{if(this.isPrimary)return this.sn(e).next((e=>{e||(this.isPrimary=!1,this.Oe.enqueueRetryable((()=>this.Qe(!1))))}))})).next((()=>this.rn(e))).next((t=>this.isPrimary&&!t?this.on(e).next((()=>!1)):!!t&&this.an(e).next((()=>!0)))))).catch((e=>{if(Ap(e))return Sc("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Sc("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable((()=>this.Qe(e))),this.isPrimary=e}))}sn(e){return Mm(e).get(ap.key).next((e=>Sp.resolve(this.cn(e))))}un(e){return Fm(e).delete(this.clientId)}async hn(){if(this.isPrimary&&!this.ln(this.je,18e5)){this.je=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Mp(e,wp.store);return t.Lt().next((e=>{const n=this.fn(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Sp.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Ye)for(const t of e)this.Ye.removeItem(this.dn(t.clientId))}}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Xe().then((()=>this.hn())).then((()=>this.en()))))}cn(e){return!!e&&e.ownerId===this.clientId}rn(e){return this.Me?Sp.resolve(!0):Mm(e).get(ap.key).next((t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)){if(this.cn(t)&&this.networkEnabled)return!0;if(!this.cn(t)){if(!t.allowTabSynchronization)throw new Pc(Rc.FAILED_PRECONDITION,Dm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Fm(e).Lt().next((e=>void 0===this.fn(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Sc("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.Be=!1,this._n(),this.Ke&&(this.Ke.cancel(),this.Ke=null),this.mn(),this.gn(),await this.Ge.runTransaction("shutdown","readwrite",[ap.store,wp.store],(e=>{const t=new Lp(e,zc.T);return this.on(t).next((()=>this.un(t)))})),this.Ge.close(),this.yn()}fn(e,t){return e.filter((e=>this.ln(e.updateTimeMs,t)&&!this.wn(e.clientId)))}pn(){return this.runTransaction("getActiveClients","readonly",(e=>Fm(e).Lt().next((e=>this.fn(e,18e5).map((e=>e.clientId))))))}get started(){return this.Be}getMutationQueue(e){return um.Yt(e,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(e,t,n){Sc("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite";let i;return this.Ge.runTransaction(e,r,Ep,(r=>(i=new Lp(r,this.Le?this.Le.next():zc.T),"readwrite-primary"===t?this.sn(i).next((e=>!!e||this.rn(i))).next((t=>{if(!t)throw kc(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable((()=>this.Qe(!1))),new Pc(Rc.FAILED_PRECONDITION,Ip);return n(i)})).next((e=>this.an(i).next((()=>e)))):this.En(i).next((()=>n(i)))))).then((e=>(i.raiseOnCommittedEvent(),e)))}En(e){return Mm(e).get(ap.key).next((e=>{if(null!==e&&this.ln(e.leaseTimestampMs,5e3)&&!this.wn(e.ownerId)&&!this.cn(e)&&!(this.Me||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Pc(Rc.FAILED_PRECONDITION,Dm)}))}an(e){const t=new ap(this.clientId,this.allowTabSynchronization,Date.now());return Mm(e).put(ap.key,t)}static Pt(){return Np.Pt()}on(e){const t=Mm(e);return t.get(ap.key).next((e=>this.cn(e)?(Sc("IndexedDbPersistence","Releasing primary lease."),t.delete(ap.key)):Sp.resolve()))}ln(e,t){const n=Date.now();return!(e<n-t||e>n&&(kc(`Detected an update time that is in the future: ${e} > ${n}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe())))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=()=>{this._n(),!st()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(e){var t;try{const n=null!==(null===(t=this.Ye)||void 0===t?void 0:t.getItem(this.dn(e)));return Sc("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return kc("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(e){kc("Failed to set zombie client id.",e)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(e){}}dn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Mm(e){return Mp(e,ap.store)}function Fm(e){return Mp(e,wp.store)}function Um(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class jm{constructor(e,t){this.progress=e,this.Tn=t}}class Vm{constructor(e,t,n){this.He=e,this.In=t,this.Ht=n}An(e,t){return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next((n=>this.Rn(e,t,n)))}Rn(e,t,n){return this.He.getEntry(e,t).next((e=>{for(const t of n)t.applyToLocalView(e);return e}))}Pn(e,t){e.forEach(((e,n)=>{for(const e of t)e.applyToLocalView(n)}))}bn(e,t){return this.He.getEntries(e,t).next((t=>this.vn(e,t).next((()=>t))))}vn(e,t){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>this.Pn(t,e)))}getDocumentsMatchingQuery(e,t,n){return function(e){return ph.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Vn(e,t.path):sd(t)?this.Sn(e,t,n):this.Dn(e,t,n)}Vn(e,t){return this.An(e,new ph(t)).next((e=>{let t=af();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}Sn(e,t,n){const r=t.collectionGroup;let i=af();return this.Ht.getCollectionParents(e,r).next((s=>Sp.forEach(s,(s=>{const o=function(e,t){return new Xh(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.Dn(e,o,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}Dn(e,t,n){let r,i;return this.He.getDocumentsMatchingQuery(e,t,n).next((n=>(r=n,this.In.getAllMutationBatchesAffectingQuery(e,t)))).next((t=>(i=t,this.Cn(e,i,r).next((e=>{r=e;for(const e of i)for(const t of e.mutations){const n=t.key;let i=r.get(n);null==i&&(i=Oh.newInvalidDocument(n),r=r.insert(n,i)),Md(t,i,e.localWriteTime),i.isFoundDocument()||(r=r.remove(n))}}))))).next((()=>(r.forEach(((e,n)=>{dd(t,n)||(r=r.remove(e))})),r)))}Cn(e,t,n){let r=hf();for(const e of t)for(const t of e.mutations)t instanceof zd&&null===n.get(t.key)&&(r=r.add(t.key));let i=n;return this.He.getEntries(e,r).next((e=>(e.forEach(((e,t)=>{t.isFoundDocument()&&(i=i.insert(e,t))})),i)))}}class zm{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Nn=n,this.xn=r}static kn(e,t){let n=hf(),r=hf();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new zm(e,t.fromCache,n,r)}}class Bm{$n(e){this.On=e}getDocumentsMatchingQuery(e,t,n,r){return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(Gc.min())?this.Fn(e,t):this.On.bn(e,r).next((i=>{const s=this.Mn(t,i);return(td(t)||nd(t))&&this.Ln(t.limitType,s,r,n)?this.Fn(e,t):(Tc()<=At.DEBUG&&Sc("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),hd(t)),this.On.getDocumentsMatchingQuery(e,t,n).next((e=>(s.forEach((t=>{e=e.insert(t.key,t)})),e))))}))}Mn(e,t){let n=new tf(fd(e));return t.forEach(((t,r)=>{dd(e,r)&&(n=n.add(r))})),n}Ln(e,t,n,r){if(n.size!==t.size)return!0;const i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Fn(e,t){return Tc()<=At.DEBUG&&Sc("QueryEngine","Using full collection scan to execute query:",hd(t)),this.On.getDocumentsMatchingQuery(e,t,Gc.min())}}class qm{constructor(e,t,n,r){this.persistence=e,this.Bn=t,this.N=r,this.Un=new Xd($c),this.qn=new Sm((e=>Dh(e)),Lh),this.Kn=Gc.min(),this.In=e.getMutationQueue(n),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new Vm(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Un)))}}function $m(e,t,n,r){return new qm(e,t,n,r)}async function Km(e,t){const n=Oc(e);let r=n.In,i=n.Qn;const s=await n.persistence.runTransaction("Handle user change","readonly",(e=>{let s;return n.In.getAllMutationBatches(e).next((o=>(s=o,r=n.persistence.getMutationQueue(t),i=new Vm(n.jn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e)))).next((t=>{const n=[],r=[];let o=hf();for(const e of s){n.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return i.bn(e,o).next((e=>({Wn:e,removedBatchIds:n,addedBatchIds:r})))}))}));return n.In=r,n.Qn=i,n.Bn.$n(n.Qn),s}function Wm(e){const t=Oc(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.ze.getLastRemoteSnapshotVersion(e)))}function Hm(e,t,n,r,i){let s=hf();return n.forEach((e=>s=s.add(e))),t.getEntries(e,s).next((e=>{let s=sf();return n.forEach(((n,o)=>{const a=e.get(n),u=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(Gc.min())?(t.removeEntry(n,u),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o,u),s=s.insert(n,o)):Sc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)})),s}))}function Gm(e,t){const n=Oc(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.In.getNextMutationBatchAfterBatchId(e,t))))}function Qm(e,t){const n=Oc(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.ze.getTargetData(e,t).next((i=>i?(r=i,Sp.resolve(r)):n.ze.allocateTargetId(e).next((i=>(r=new jp(t,i,0,e.currentSequenceNumber),n.ze.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Un.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Un=n.Un.insert(e.targetId,e),n.qn.set(t,e.targetId)),e}))}async function Jm(e,t,n){const r=Oc(e),i=r.Un.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Ap(e))throw e;Sc("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.Un=r.Un.remove(t),r.qn.delete(i.target)}function Ym(e,t,n){const r=Oc(e);let i=Gc.min(),s=hf();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=Oc(e),i=r.qn.get(n);return void 0!==i?Sp.resolve(r.Un.get(i)):r.ze.getTargetData(t,n)}(r,e,ad(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Bn.getDocumentsMatchingQuery(e,t,n?i:Gc.min(),n?s:hf()))).next((e=>({documents:e,Gn:s})))))}function Xm(e,t){const n=Oc(e),r=Oc(n.ze),i=n.Un.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.Et(e,t).next((e=>e?e.target:null))))}function Zm(e){const t=Oc(e);return t.persistence.runTransaction("Get new document changes","readonly",(e=>function(e,t,n){const r=Oc(e);let i=sf(),s=qp(n);const o=Am(t),a=IDBKeyRange.lowerBound(s,!0);return o.Kt({index:fp.readTimeIndex,range:a},((e,t)=>{const n=zp(r.N,t);i=i.insert(n.key,n),s=t.readTime})).next((()=>({Tn:i,readTime:$p(s)})))}(t.jn,e,t.Kn))).then((({Tn:e,readTime:n})=>(t.Kn=n,e)))}async function eg(e,t,n=hf()){const r=await Qm(e,ad(Jp(t.bundledQuery))),i=Oc(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=xf(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Je.saveNamedQuery(e,t);const o=r.withResumeToken(rh.EMPTY_BYTE_STRING,s);return i.Un=i.Un.insert(o.targetId,o),i.ze.updateTargetData(e,o).next((()=>i.ze.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.ze.addMatchingKeys(e,n,r.targetId))).next((()=>i.Je.saveNamedQuery(e,t)))}))}class tg{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return Sp.resolve(this.Yn.get(t))}saveBundleMetadata(e,t){var n;return this.Yn.set(t.id,{id:(n=t).id,version:n.version,createTime:xf(n.createTime)}),Sp.resolve()}getNamedQuery(e,t){return Sp.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,function(e){return{name:e.name,query:Jp(e.bundledQuery),readTime:xf(e.readTime)}}(t)),Sp.resolve()}}class ng{constructor(){this.Zn=new tf(rg.ts),this.es=new tf(rg.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const n=new rg(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}ss(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.rs(new rg(e,t))}os(e,t){e.forEach((e=>this.removeReference(e,t)))}cs(e){const t=new ph(new Zc([])),n=new rg(t,e),r=new rg(t,e+1),i=[];return this.es.forEachInRange([n,r],(e=>{this.rs(e),i.push(e.key)})),i}us(){this.Zn.forEach((e=>this.rs(e)))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new ph(new Zc([])),n=new rg(t,e),r=new rg(t,e+1);let i=hf();return this.es.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new rg(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class rg{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return ph.comparator(e.key,t.key)||$c(e.ls,t.ls)}static ns(e,t){return $c(e.ls,t.ls)||ph.comparator(e.key,t.key)}}class ig{constructor(e,t){this.Ht=e,this.referenceDelegate=t,this.In=[],this.fs=1,this.ds=new tf(rg.ts)}checkEmpty(e){return Sp.resolve(0===this.In.length)}addMutationBatch(e,t,n,r){const i=this.fs;this.fs++,this.In.length>0&&this.In[this.In.length-1];const s=new Fp(i,t,n,r);this.In.push(s);for(const t of r)this.ds=this.ds.add(new rg(t.key,i)),this.Ht.addToCollectionParentIndex(e,t.key.path.popLast());return Sp.resolve(s)}lookupMutationBatch(e,t){return Sp.resolve(this.ws(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this._s(n),i=r<0?0:r;return Sp.resolve(this.In.length>i?this.In[i]:null)}getHighestUnacknowledgedBatchId(){return Sp.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(e){return Sp.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new rg(t,0),r=new rg(t,Number.POSITIVE_INFINITY),i=[];return this.ds.forEachInRange([n,r],(e=>{const t=this.ws(e.ls);i.push(t)})),Sp.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new tf($c);return t.forEach((e=>{const t=new rg(e,0),r=new rg(e,Number.POSITIVE_INFINITY);this.ds.forEachInRange([t,r],(e=>{n=n.add(e.ls)}))})),Sp.resolve(this.gs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ph.isDocumentKey(i)||(i=i.child(""));const s=new rg(new ph(i),0);let o=new tf($c);return this.ds.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)}),s),Sp.resolve(this.gs(o))}gs(e){const t=[];return e.forEach((e=>{const n=this.ws(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Ac(0===this.ys(t.batchId,"removed")),this.In.shift();let n=this.ds;return Sp.forEach(t.mutations,(r=>{const i=new rg(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.ds=n}))}te(e){}containsKey(e,t){const n=new rg(t,0),r=this.ds.firstAfterOrEqual(n);return Sp.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.In.length,Sp.resolve()}ys(e,t){return this._s(e)}_s(e){return 0===this.In.length?0:e-this.In[0].batchId}ws(e){const t=this._s(e);return t<0||t>=this.In.length?null:this.In[t]}}class sg{constructor(e,t){this.Ht=e,this.ps=t,this.docs=new Xd(ph.comparator),this.size=0}addEntry(e,t,n){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ps(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-s,this.Ht.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Sp.resolve(n?n.document.clone():Oh.newInvalidDocument(t))}getEntries(e,t){let n=sf();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.clone():Oh.newInvalidDocument(e))})),Sp.resolve(n)}getDocumentsMatchingQuery(e,t,n){let r=sf();const i=new ph(t.path.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:e,value:{document:i,readTime:o}}=s.getNext();if(!t.path.isPrefixOf(e.path))break;o.compareTo(n)<=0||dd(t,i)&&(r=r.insert(i.key,i.clone()))}return Sp.resolve(r)}Es(e,t){return Sp.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new og(this)}getSize(e){return Sp.resolve(this.size)}}class og extends km{constructor(e){super(),this.Se=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.document.isValidDocument()?t.push(this.Se.addEntry(e,r.document,this.getReadTime(n))):this.Se.removeEntry(n)})),Sp.waitFor(t)}getFromCache(e,t){return this.Se.getEntry(e,t)}getAllFromCache(e,t){return this.Se.getEntries(e,t)}}class ag{constructor(e){this.persistence=e,this.Ts=new Sm((e=>Dh(e)),Lh),this.lastRemoteSnapshotVersion=Gc.min(),this.highestTargetId=0,this.Is=0,this.As=new ng,this.targetCount=0,this.Rs=fm.se()}forEachTarget(e,t){return this.Ts.forEach(((e,n)=>t(n))),Sp.resolve()}getLastRemoteSnapshotVersion(e){return Sp.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Sp.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),Sp.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Is&&(this.Is=t),Sp.resolve()}ae(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new fm(t),this.highestTargetId=t),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,t){return this.ae(t),this.targetCount+=1,Sp.resolve()}updateTargetData(e,t){return this.ae(t),Sp.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.cs(t.targetId),this.targetCount-=1,Sp.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Ts.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Ts.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Sp.waitFor(i).next((()=>r))}getTargetCount(e){return Sp.resolve(this.targetCount)}getTargetData(e,t){const n=this.Ts.get(t)||null;return Sp.resolve(n)}addMatchingKeys(e,t,n){return this.As.ss(t,n),Sp.resolve()}removeMatchingKeys(e,t,n){this.As.os(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Sp.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.As.cs(t),Sp.resolve()}getMatchingKeysForTargetId(e,t){const n=this.As.hs(t);return Sp.resolve(n)}containsKey(e,t){return Sp.resolve(this.As.containsKey(t))}}class ug{constructor(e,t){this.Ps={},this.Le=new zc(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new ag(this),this.Ht=new em,this.He=function(e,t){return new sg(e,t)}(this.Ht,(e=>this.referenceDelegate.bs(e))),this.N=new Vp(t),this.Je=new tg(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let t=this.Ps[e.toKey()];return t||(t=new ig(this.Ht,this.referenceDelegate),this.Ps[e.toKey()]=t),t}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,t,n){Sc("MemoryPersistence","Starting transaction:",e);const r=new lg(this.Le.next());return this.referenceDelegate.vs(),n(r).next((e=>this.referenceDelegate.Vs(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ss(e,t){return Sp.or(Object.values(this.Ps).map((n=>()=>n.containsKey(e,t))))}}class lg extends Tp{constructor(e){super(),this.currentSequenceNumber=e}}class cg{constructor(e){this.persistence=e,this.Ds=new ng,this.Cs=null}static Ns(e){return new cg(e)}get xs(){if(this.Cs)return this.Cs;throw xc()}addReference(e,t,n){return this.Ds.addReference(n,t),this.xs.delete(n.toString()),Sp.resolve()}removeReference(e,t,n){return this.Ds.removeReference(n,t),this.xs.add(n.toString()),Sp.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),Sp.resolve()}removeTarget(e,t){this.Ds.cs(t.targetId).forEach((e=>this.xs.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.xs.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}vs(){this.Cs=new Set}Vs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Sp.forEach(this.xs,(n=>{const r=ph.fromPath(n);return this.ks(e,r).next((e=>{e||t.removeEntry(r)}))})).next((()=>(this.Cs=null,t.apply(e))))}updateLimboDocument(e,t){return this.ks(e,t).next((e=>{e?this.xs.delete(t.toString()):this.xs.add(t.toString())}))}bs(e){return 0}ks(e,t){return Sp.or([()=>Sp.resolve(this.Ds.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ss(e,t)])}}function hg(e,t){return`firestore_clients_${e}_${t}`}function dg(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function fg(e,t){return`firestore_targets_${e}_${t}`}class pg{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static $s(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Pc(r.error.code,r.error.message))),s?new pg(e,t,r.state,i):(kc("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mg{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static $s(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Pc(n.error.code,n.error.message))),i?new mg(e,n.state,r):(kc("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=ff();for(let e=0;r&&e<n.activeTargetIds.length;++e)r=fh(n.activeTargetIds[e]),i=i.add(n.activeTargetIds[e]);return r?new gg(e,i):(kc("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class yg{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new yg(t.clientId,t.onlineState):(kc("SharedClientState",`Failed to parse online state: ${e}`),null)}}class vg{constructor(){this.activeTargetIds=ff()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wg{constructor(e,t,n,r,i){this.window=e,this.Oe=t,this.persistenceKey=n,this.Ls=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Xd($c),this.started=!1,this.Ks=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.js=hg(this.persistenceKey,this.Ls),this.Qs=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.qs=this.qs.insert(this.Ls,new vg),this.Ws=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Hs=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.Js=function(e){return`firestore_bundle_loaded_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static Pt(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.pn();for(const t of e){if(t===this.Ls)continue;const e=this.getItem(hg(this.persistenceKey,t));if(e){const n=gg.$s(t,e);n&&(this.qs=this.qs.insert(n.clientId,n))}}this.Ys();const t=this.storage.getItem(this.Hs);if(t){const e=this.Xs(t);e&&this.Zs(e)}for(const e of this.Ks)this.Us(e);this.Ks=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Qs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(e){let t=!1;return this.qs.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ei(e,"pending")}updateMutationState(e,t,n){this.ei(e,t,n),this.ni(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(fg(this.persistenceKey,e));if(n){const r=mg.$s(e,n);r&&(t=r.state)}}return this.si.Fs(e),this.Ys(),t}removeLocalQueryTarget(e){this.si.Ms(e),this.Ys()}isLocalQueryTarget(e){return this.si.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(fg(this.persistenceKey,e))}updateQueryState(e,t,n){this.ii(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.ni(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.ri(e)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Sc("SharedClientState","READ",e,t),t}setItem(e,t){Sc("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Sc("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Us(e){const t=e;if(t.storageArea===this.storage){if(Sc("SharedClientState","EVENT",t.key,t.newValue),t.key===this.js)return void kc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Ws.test(t.key)){if(null==t.newValue){const e=this.ai(t.key);return this.ci(e,null)}{const e=this.ui(t.key,t.newValue);if(e)return this.ci(e.clientId,e)}}else if(this.Gs.test(t.key)){if(null!==t.newValue){const e=this.hi(t.key,t.newValue);if(e)return this.li(e)}}else if(this.zs.test(t.key)){if(null!==t.newValue){const e=this.fi(t.key,t.newValue);if(e)return this.di(e)}}else if(t.key===this.Hs){if(null!==t.newValue){const e=this.Xs(t.newValue);if(e)return this.Zs(e)}}else if(t.key===this.Qs){const e=function(e){let t=zc.T;if(null!=e)try{const n=JSON.parse(e);Ac("number"==typeof n),t=n}catch(e){kc("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==zc.T&&this.sequenceNumberHandler(e)}else if(t.key===this.Js)return this.syncEngine.wi()}else this.Ks.push(t)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(e,t,n){const r=new pg(this.currentUser,e,t,n),i=dg(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Os())}ni(e){const t=dg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}ri(e){const t={clientId:this.Ls,onlineState:e};this.storage.setItem(this.Hs,JSON.stringify(t))}ii(e,t,n){const r=fg(this.persistenceKey,e),i=new mg(e,t,n);this.setItem(r,i.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(e){const t=this.Ws.exec(e);return t?t[1]:null}ui(e,t){const n=this.ai(e);return gg.$s(n,t)}hi(e,t){const n=this.Gs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return pg.$s(new _c(i),r,t)}fi(e,t){const n=this.zs.exec(e),r=Number(n[1]);return mg.$s(r,t)}Xs(e){return yg.$s(e)}async li(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine._i(e.batchId,e.state,e.error);Sc("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}di(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}ci(e,t){const n=t?this.qs.insert(e,t):this.qs.remove(e),r=this.ti(this.qs),i=this.ti(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.gi(s,o).then((()=>{this.qs=n}))}Zs(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ti(e){let t=ff();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class bg{constructor(){this.yi=new vg,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,t,n){this.pi[e]=t}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new vg,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class _g{Ei(e){}shutdown(){}}class Eg{constructor(){this.Ti=()=>this.Ii(),this.Ai=()=>this.Ri(),this.Pi=[],this.bi()}Ei(e){this.Pi.push(e)}shutdown(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}bi(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}Ii(){Sc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Pi)e(0)}Ri(){Sc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Pi)e(1)}static Pt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Ig={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Tg{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}class Sg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.Fi=t+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,t,n,r){const i=this.Bi(e,t);Sc("RestConnection","Sending: ",i,n);const s={};return this.Ui(s,r),this.qi(e,i,s,n).then((e=>(Sc("RestConnection","Received: ",e),e)),(t=>{throw Nc("RestConnection",`${e} failed with error: `,t,"url: ",i,"request:",n),t}))}Ki(e,t,n,r){return this.Li(e,t,n,r)}Ui(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+Ec,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(const n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])}Bi(e,t){const n=Ig[e];return`${this.Fi}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,t,n,r){return new Promise(((i,s)=>{const o=new bc;o.listenOnce(pc.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case fc.NO_ERROR:const t=o.getResponseJson();Sc("Connection","XHR received:",JSON.stringify(t)),i(t);break;case fc.TIMEOUT:Sc("Connection",'RPC "'+e+'" timed out'),s(new Pc(Rc.DEADLINE_EXCEEDED,"Request time out"));break;case fc.HTTP_ERROR:const n=o.getStatus();if(Sc("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Rc).indexOf(t)>=0?t:Rc.UNKNOWN}(e.status);s(new Pc(t,e.message))}else s(new Pc(Rc.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Pc(Rc.UNAVAILABLE,"Connection failed."));break;default:xc()}}finally{Sc("Connection",'RPC "'+e+'" completed.')}}));const a=JSON.stringify(r);o.send(t,"POST",a,n,15)}))}ji(e,t){const n=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=new uc,i=tu(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new vc({})),this.Ui(s.initMessageHeaders,t),it()||at()||rt().indexOf("Electron/")>=0||ut()||rt().indexOf("MSAppHost/")>=0||ot()||(s.httpHeadersOverwriteParam="$httpHeaders");const o=n.join("");Sc("Connection","Creating WebChannel: "+o,s);const a=r.createWebChannel(o,s);let u=!1,l=!1;const c=new Tg({vi:e=>{l?Sc("Connection","Not sending because WebChannel is closed:",e):(u||(Sc("Connection","Opening WebChannel transport."),a.open(),u=!0),Sc("Connection","WebChannel sending:",e),a.send(e))},Vi:()=>a.close()}),h=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return h(a,wc.EventType.OPEN,(()=>{l||Sc("Connection","WebChannel transport opened.")})),h(a,wc.EventType.CLOSE,(()=>{l||(l=!0,Sc("Connection","WebChannel transport closed"),c.$i())})),h(a,wc.EventType.ERROR,(e=>{l||(l=!0,Nc("Connection","WebChannel transport errored:",e),c.$i(new Pc(Rc.UNAVAILABLE,"The operation could not be completed")))})),h(a,wc.EventType.MESSAGE,(e=>{var t;if(!l){const n=e.data[0];Ac(!!n);const r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Sc("Connection","WebChannel received error:",i);const e=i.status;let t=function(e){const t=Gd[e];if(void 0!==t)return Yd(t)}(e),n=i.message;void 0===t&&(t=Rc.INTERNAL,n="Unknown error status: "+e+" with message "+i.message),l=!0,c.$i(new Pc(t,n)),a.close()}else Sc("Connection","WebChannel received:",n),c.Oi(n)}})),h(i,mc.STAT_EVENT,(e=>{e.stat===gc?Sc("Connection","Detected buffering proxy"):e.stat===yc&&Sc("Connection","Detected no buffering proxy")})),setTimeout((()=>{c.ki()}),0),c}}function kg(){return"undefined"!=typeof window?window:null}function Ng(){return"undefined"!=typeof document?document:null}function Cg(e){return new Sf(e,!0)}class xg{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Oe=e,this.timerId=t,this.Qi=n,this.Wi=r,this.Gi=i,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const t=Math.floor(this.zi+this.Zi()),n=Math.max(0,Date.now()-this.Ji),r=Math.max(0,t-n);r>0&&Sc("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.zi} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,r,(()=>(this.Ji=Date.now(),e()))),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class Ag{constructor(e,t,n,r,i,s){this.Oe=e,this.er=n,this.nr=r,this.credentialsProvider=i,this.listener=s,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new xg(e,t)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}async stop(){this.ar()&&await this.close(0)}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,(()=>this.dr())))}wr(e){this._r(),this.stream.send(e)}async dr(){if(this.cr())return this.close(0)}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}async close(e,t){this._r(),this.rr.cancel(),this.sr++,3!==e?this.rr.reset():t&&t.code===Rc.RESOURCE_EXHAUSTED?(kc(t.toString()),kc("Using maximum backoff delay to prevent overloading the backend."),this.rr.Yi()):t&&t.code===Rc.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.mr(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ci(t)}mr(){}auth(){this.state=1;const e=this.gr(this.sr),t=this.sr;this.credentialsProvider.getToken().then((e=>{this.sr===t&&this.yr(e)}),(t=>{e((()=>{const e=new Pc(Rc.UNKNOWN,"Fetching auth token failed: "+t.message);return this.pr(e)}))}))}yr(e){const t=this.gr(this.sr);this.stream=this.Er(e),this.stream.Si((()=>{t((()=>(this.state=2,this.listener.Si())))})),this.stream.Ci((e=>{t((()=>this.pr(e)))})),this.stream.onMessage((e=>{t((()=>this.onMessage(e)))}))}ur(){this.state=4,this.rr.Xi((async()=>{this.state=0,this.start()}))}pr(e){return Sc("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(3,e)}gr(e){return t=>{this.Oe.enqueueAndForget((()=>this.sr===e?t():(Sc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Og extends Ag{constructor(e,t,n,r,i){super(e,"listen_stream_connection_backoff","listen_stream_idle",t,n,i),this.N=r}Er(e){return this.nr.ji("Listen",e)}onMessage(e){this.rr.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:xc()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.D?(Ac(void 0===t||"string"==typeof t),rh.fromBase64String(t||"")):(Ac(void 0===t||t instanceof Uint8Array),rh.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Rc.UNKNOWN:Yd(e.code);return new Pc(t,e.message||"")}(o);n=new vf(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Pf(e,r.document.name),s=xf(r.document.updateTime),o=new xh({mapValue:{fields:r.document.fields}}),a=Oh.newFoundDocument(i,s,o),u=r.targetIds||[],l=r.removedTargetIds||[];n=new gf(u,l,a.key,a)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Pf(e,r.document),s=r.readTime?xf(r.readTime):Gc.min(),o=Oh.newNoDocument(i,s),a=r.removedTargetIds||[];n=new gf([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Pf(e,r.document),s=r.removedTargetIds||[];n=new gf([],s,i,null)}else{if(!("filter"in t))return xc();{t.filter;const e=t.filter;e.targetId;const r=e.count||0,i=new Hd(r),s=e.targetId;n=new yf(s,i)}}return n}(this.N,e),n=function(e){if(!("targetChange"in e))return Gc.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Gc.min():t.readTime?xf(t.readTime):Gc.min()}(e);return this.listener.Tr(t,n)}Ir(e){const t={};t.database=Mf(this.N),t.addTarget=function(e,t){let n;const r=t.target;return n=Mh(r)?{documents:Bf(e,r)}:{query:qf(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Nf(e,t.resumeToken):t.snapshotVersion.compareTo(Gc.min())>0&&(n.readTime=kf(e,t.snapshotVersion.toTimestamp())),n}(this.N,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return xc()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.N,e);n&&(t.labels=n),this.wr(t)}Ar(e){const t={};t.database=Mf(this.N),t.removeTarget=e,this.wr(t)}}class Rg extends Ag{constructor(e,t,n,r,i){super(e,"write_stream_connection_backoff","write_stream_idle",t,n,i),this.N=r,this.Rr=!1}get Pr(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.br([])}Er(e){return this.nr.ji("Write",e)}onMessage(e){if(Ac(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Rr){this.rr.reset();const t=function(e,t){return e&&e.length>0?(Ac(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?xf(e.updateTime):xf(t);return n.isEqual(Gc.min())&&(n=xf(t)),new Od(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=xf(e.commitTime);return this.listener.vr(n,t)}return Ac(!e.writeResults||0===e.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const e={};e.database=Mf(this.N),this.wr(e)}br(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Vf(this.N,e)))};this.wr(t)}}class Pg extends class{}{constructor(e,t,n){super(),this.credentials=e,this.nr=t,this.N=n,this.Dr=!1}Cr(){if(this.Dr)throw new Pc(Rc.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,t,n){return this.Cr(),this.credentials.getToken().then((r=>this.nr.Li(e,t,n,r))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Rc.UNAUTHENTICATED&&this.credentials.invalidateToken(),e):new Pc(Rc.UNKNOWN,e.toString())}))}Ki(e,t,n){return this.Cr(),this.credentials.getToken().then((r=>this.nr.Ki(e,t,n,r))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Rc.UNAUTHENTICATED&&this.credentials.invalidateToken(),e):new Pc(Rc.UNKNOWN,e.toString())}))}terminate(){this.Dr=!0}}class Dg{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve()))))}Lr(e){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Fr("Offline")))}set(e){this.Br(),this.Nr=0,"Online"===e&&(this.$r=!1),this.Fr(e)}Fr(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Mr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(kc(t),this.$r=!1):Sc("OnlineStateTracker",t)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class Lg{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=i,this.Qr.Ei((e=>{n.enqueueAndForget((async()=>{$g(this)&&(Sc("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Oc(e);t.Kr.add(4),await Fg(t),t.Wr.set("Unknown"),t.Kr.delete(4),await Mg(t)}(this))}))})),this.Wr=new Dg(n,r)}}async function Mg(e){if($g(e))for(const t of e.jr)await t(!0)}async function Fg(e){for(const t of e.jr)await t(!1)}function Ug(e,t){const n=Oc(e);n.qr.has(t.targetId)||(n.qr.set(t.targetId,t),qg(n)?Bg(n):ay(n).cr()&&Vg(n,t))}function jg(e,t){const n=Oc(e),r=ay(n);n.qr.delete(t),r.cr()&&zg(n,t),0===n.qr.size&&(r.cr()?r.lr():$g(n)&&n.Wr.set("Unknown"))}function Vg(e,t){e.Gr.Y(t.targetId),ay(e).Ir(t)}function zg(e,t){e.Gr.Y(t),ay(e).Ar(t)}function Bg(e){e.Gr=new bf({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.qr.get(t)||null}),ay(e).start(),e.Wr.Or()}function qg(e){return $g(e)&&!ay(e).ar()&&e.qr.size>0}function $g(e){return 0===Oc(e).Kr.size}function Kg(e){e.Gr=void 0}async function Wg(e){e.qr.forEach(((t,n)=>{Vg(e,t)}))}async function Hg(e,t){Kg(e),qg(e)?(e.Wr.Lr(t),Bg(e)):e.Wr.set("Unknown")}async function Gg(e,t,n){if(e.Wr.set("Online"),t instanceof vf&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.qr.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.qr.delete(r),e.Gr.removeTarget(r))}(e,t)}catch(n){Sc("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Qg(e,n)}else if(t instanceof gf?e.Gr.rt(t):t instanceof yf?e.Gr.ft(t):e.Gr.ct(t),!n.isEqual(Gc.min()))try{const t=await Wm(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Gr._t(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.qr.get(r);i&&e.qr.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((t=>{const n=e.qr.get(t);if(!n)return;e.qr.set(t,n.withResumeToken(rh.EMPTY_BYTE_STRING,n.snapshotVersion)),zg(e,t);const r=new jp(n.target,t,1,n.sequenceNumber);Vg(e,r)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Sc("RemoteStore","Failed to raise snapshot:",t),await Qg(e,t)}}async function Qg(e,t,n){if(!Ap(t))throw t;e.Kr.add(1),await Fg(e),e.Wr.set("Offline"),n||(n=()=>Wm(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Sc("RemoteStore","Retrying IndexedDB access"),await n(),e.Kr.delete(1),await Mg(e)}))}function Jg(e,t){return t().catch((n=>Qg(e,n,t)))}async function Yg(e){const t=Oc(e),n=uy(t);let r=t.Ur.length>0?t.Ur[t.Ur.length-1].batchId:-1;for(;Xg(t);)try{const e=await Gm(t.localStore,r);if(null===e){0===t.Ur.length&&n.lr();break}r=e.batchId,Zg(t,e)}catch(e){await Qg(t,e)}ey(t)&&ty(t)}function Xg(e){return $g(e)&&e.Ur.length<10}function Zg(e,t){e.Ur.push(t);const n=uy(e);n.cr()&&n.Pr&&n.br(t.mutations)}function ey(e){return $g(e)&&!uy(e).ar()&&e.Ur.length>0}function ty(e){uy(e).start()}async function ny(e){uy(e).Sr()}async function ry(e){const t=uy(e);for(const n of e.Ur)t.br(n.mutations)}async function iy(e,t,n){const r=e.Ur.shift(),i=Up.from(r,t,n);await Jg(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Yg(e)}async function sy(e,t){t&&uy(e).Pr&&await async function(e,t){if(Jd(n=t.code)&&n!==Rc.ABORTED){const n=e.Ur.shift();uy(e).hr(),await Jg(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Yg(e)}var n}(e,t),ey(e)&&ty(e)}async function oy(e,t){const n=Oc(e);t?(n.Kr.delete(2),await Mg(n)):t||(n.Kr.add(2),await Fg(n),n.Wr.set("Unknown"))}function ay(e){return e.zr||(e.zr=function(e,t,n){const r=Oc(e);return r.Cr(),new Og(t,r.nr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:Wg.bind(null,e),Ci:Hg.bind(null,e),Tr:Gg.bind(null,e)}),e.jr.push((async t=>{t?(e.zr.hr(),qg(e)?Bg(e):e.Wr.set("Unknown")):(await e.zr.stop(),Kg(e))}))),e.zr}function uy(e){return e.Hr||(e.Hr=function(e,t,n){const r=Oc(e);return r.Cr(),new Rg(t,r.nr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:ny.bind(null,e),Ci:sy.bind(null,e),Vr:ry.bind(null,e),vr:iy.bind(null,e)}),e.jr.push((async t=>{t?(e.Hr.hr(),await Yg(e)):(await e.Hr.stop(),e.Ur.length>0&&(Sc("RemoteStore",`Stopping write stream with ${e.Ur.length} pending writes`),e.Ur=[]))}))),e.Hr}class ly{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Dc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new ly(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pc(Rc.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cy(e,t){if(kc("AsyncQueue",`${t}: ${e}`),Ap(e))return new Pc(Rc.UNAVAILABLE,`${t}: ${e}`);throw e}class hy{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ph.comparator(t.key,n.key):(e,t)=>ph.comparator(e.key,t.key),this.keyedMap=af(),this.sortedSet=new Xd(this.comparator)}static emptySet(e){return new hy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof hy))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new hy;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class dy{constructor(){this.Jr=new Xd(ph.comparator)}track(e){const t=e.doc.key,n=this.Jr.get(t);n?0!==e.type&&3===n.type?this.Jr=this.Jr.insert(t,e):3===e.type&&1!==n.type?this.Jr=this.Jr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Jr=this.Jr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Jr=this.Jr.remove(t):1===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):xc():this.Jr=this.Jr.insert(t,e)}Yr(){const e=[];return this.Jr.inorderTraversal(((t,n)=>{e.push(n)})),e}}class fy{constructor(e,t,n,r,i,s,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,r){const i=[];return t.forEach((e=>{i.push({type:0,doc:e})})),new fy(e,t,hy.emptySet(t),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ld(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class py{constructor(){this.Xr=void 0,this.listeners=[]}}class my{constructor(){this.queries=new Sm((e=>cd(e)),ld),this.onlineState="Unknown",this.Zr=new Set}}async function gy(e,t){const n=Oc(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new py),i)try{s.Xr=await n.onListen(r)}catch(e){const n=cy(e,`Initialization of query '${hd(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.eo(n.onlineState),s.Xr&&t.no(s.Xr)&&by(n)}async function yy(e,t){const n=Oc(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function vy(e,t){const n=Oc(e);let r=!1;for(const e of t){const t=e.query,i=n.queries.get(t);if(i){for(const t of i.listeners)t.no(e)&&(r=!0);i.Xr=e}}r&&by(n)}function wy(e,t,n){const r=Oc(e),i=r.queries.get(t);if(i)for(const e of i.listeners)e.onError(n);r.queries.delete(t)}function by(e){e.Zr.forEach((e=>{e.next()}))}class _y{constructor(e,t,n){this.query=e,this.so=t,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}no(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new fy(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.io?this.oo(e)&&(this.so.next(e),t=!0):this.ao(e,this.onlineState)&&(this.co(e),t=!0),this.ro=e,t}onError(e){this.so.error(e)}eo(e){this.onlineState=e;let t=!1;return this.ro&&!this.io&&this.ao(this.ro,e)&&(this.co(this.ro),t=!0),t}ao(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return!(this.options.uo&&n||e.docs.isEmpty()&&"Offline"!==t)}oo(e){if(e.docChanges.length>0)return!0;const t=this.ro&&this.ro.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}co(e){e=fy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.io=!0,this.so.next(e)}}class Ey{constructor(e,t){this.payload=e,this.byteLength=t}ho(){return"metadata"in this.payload}}class Iy{constructor(e){this.N=e}zn(e){return Pf(this.N,e)}Hn(e){return e.metadata.exists?jf(this.N,e.document,!1):Oh.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}Jn(e){return xf(e)}}class Ty{constructor(e,t,n){this.lo=e,this.localStore=t,this.N=n,this.queries=[],this.documents=[],this.progress=Sy(e)}fo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}wo(e){const t=new Map,n=new Iy(this.N);for(const r of e)if(r.metadata.queries){const e=n.zn(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||hf()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Oc(e);let s=hf(),o=sf(),a=lf();for(const e of n){const n=t.zn(e.metadata.name);e.document&&(s=s.add(n)),o=o.insert(n,t.Hn(e)),a=a.insert(n,t.Jn(e.metadata.readTime))}const u=i.jn.newChangeBuffer({trackRemovals:!0}),l=await Qm(i,function(e){return ad(ed(Zc.fromString(`__bundle__/docs/${e}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Hm(e,u,o,Gc.min(),a).next((t=>(u.apply(e),t))).next((t=>i.ze.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.ze.addMatchingKeys(e,s,l.targetId))).next((()=>i.Qn.vn(e,t))).next((()=>t))))))}(this.localStore,new Iy(this.N),this.documents,this.lo.id),t=this.wo(this.documents);for(const e of this.queries)await eg(this.localStore,e,t.get(e.name));return this.progress.taskState="Success",new jm(Object.assign({},this.progress),e)}}function Sy(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class ky{constructor(e){this.key=e}}class Ny{constructor(e){this.key=e}}class Cy{constructor(e,t){this.query=e,this._o=t,this.mo=null,this.current=!1,this.yo=hf(),this.mutatedKeys=hf(),this.po=fd(e),this.Eo=new hy(this.po)}get To(){return this._o}Io(e,t){const n=t?t.Ao:new dy,r=t?t.Eo:this.Eo;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a=td(this.query)&&r.size===this.query.limit?r.last():null,u=nd(this.query)&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const l=r.get(e),c=dd(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;l&&c?l.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.Ro(l,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.po(c,a)>0||u&&this.po(c,u)<0)&&(o=!0)):!l&&c?(n.track({type:0,doc:c}),f=!0):l&&!c&&(n.track({type:1,doc:l}),f=!0,(a||u)&&(o=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),td(this.query)||nd(this.query))for(;s.size>this.query.limit;){const e=td(this.query)?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Eo:s,Ao:n,Ln:o,mutatedKeys:i}}Ro(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.Eo;this.Eo=e.Eo,this.mutatedKeys=e.mutatedKeys;const i=e.Ao.Yr();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xc()}};return n(e)-n(t)}(e.type,t.type)||this.po(e.doc,t.doc))),this.Po(n);const s=t?this.bo():[],o=0===this.yo.size&&this.current?1:0,a=o!==this.mo;return this.mo=o,0!==i.length||a?{snapshot:new fy(this.query,e.Eo,r,i,e.mutatedKeys,0===o,a,!1),vo:s}:{vo:s}}eo(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new dy,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(e){return!this._o.has(e)&&!!this.Eo.has(e)&&!this.Eo.get(e).hasLocalMutations}Po(e){e&&(e.addedDocuments.forEach((e=>this._o=this._o.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this._o=this._o.delete(e))),this.current=e.current)}bo(){if(!this.current)return[];const e=this.yo;this.yo=hf(),this.Eo.forEach((e=>{this.Vo(e.key)&&(this.yo=this.yo.add(e.key))}));const t=[];return e.forEach((e=>{this.yo.has(e)||t.push(new Ny(e))})),this.yo.forEach((n=>{e.has(n)||t.push(new ky(n))})),t}So(e){this._o=e.Gn,this.yo=hf();const t=this.Io(e.documents);return this.applyChanges(t,!0)}Do(){return fy.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}class xy{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Ay{constructor(e){this.key=e,this.Co=!1}}class Oy{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.No={},this.xo=new Sm((e=>cd(e)),ld),this.ko=new Map,this.$o=new Set,this.Oo=new Xd(ph.comparator),this.Fo=new Map,this.Mo=new ng,this.Lo={},this.Bo=new Map,this.Uo=fm.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}async function Ry(e,t){const n=iv(e);let r,i;const s=n.xo.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Do();else{const e=await Qm(n.localStore,ad(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Py(n,t,r,"current"===s),n.isPrimaryClient&&Ug(n.remoteStore,e)}return i}async function Py(e,t,n,r){e.Ko=(t,n,r)=>async function(e,t,n,r){let i=t.view.Io(n);i.Ln&&(i=await Ym(e.localStore,t.query,!1).then((({documents:e})=>t.view.Io(e,i))));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return $y(e,t.targetId,o.vo),o.snapshot}(e,t,n,r);const i=await Ym(e.localStore,t,!0),s=new Cy(t,i.Gn),o=s.Io(i.documents),a=mf.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),u=s.applyChanges(o,e.isPrimaryClient,a);$y(e,n,u.vo);const l=new xy(t,n,s);return e.xo.set(t,l),e.ko.has(n)?e.ko.get(n).push(t):e.ko.set(n,[t]),u.snapshot}async function Dy(e,t){const n=Oc(e),r=n.xo.get(t),i=n.ko.get(r.targetId);if(i.length>1)return n.ko.set(r.targetId,i.filter((e=>!ld(e,t)))),void n.xo.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Jm(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),jg(n.remoteStore,r.targetId),By(n,r.targetId)})).catch(vm)):(By(n,r.targetId),await Jm(n.localStore,r.targetId,!0))}async function Ly(e,t){const n=Oc(e);try{const e=await function(e,t){const n=Oc(e),r=t.snapshotVersion;let i=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.jn.newChangeBuffer({trackRemovals:!0});i=n.Un;const o=[];t.targetChanges.forEach(((t,s)=>{const a=i.get(s);if(!a)return;o.push(n.ze.removeMatchingKeys(e,t.removedDocuments,s).next((()=>n.ze.addMatchingKeys(e,t.addedDocuments,s))));const u=t.resumeToken;if(u.approximateByteSize()>0){const l=a.withResumeToken(u,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(s,l),function(e,t,n){return Ac(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,l,t)&&o.push(n.ze.updateTargetData(e,l))}}));let a=sf();if(t.documentUpdates.forEach(((r,i)=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Hm(e,s,t.documentUpdates,r,void 0).next((e=>{a=e}))),!r.isEqual(Gc.min())){const t=n.ze.getLastRemoteSnapshotVersion(e).next((t=>n.ze.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Sp.waitFor(o).next((()=>s.apply(e))).next((()=>n.Qn.vn(e,a))).next((()=>a))})).then((e=>(n.Un=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Fo.get(t);r&&(Ac(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Co=!0:e.modifiedDocuments.size>0?Ac(r.Co):e.removedDocuments.size>0&&(Ac(r.Co),r.Co=!1))})),await Hy(n,e,t)}catch(e){await vm(e)}}function My(e,t,n){const r=Oc(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.xo.forEach(((n,r)=>{const i=r.view.eo(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Oc(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const e of n.listeners)e.eo(t)&&(r=!0)})),r&&by(n)}(r.eventManager,t),e.length&&r.No.Tr(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Fy(e,t,n){const r=Oc(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fo.get(t),s=i&&i.key;if(s){let e=new Xd(ph.comparator);e=e.insert(s,Oh.newNoDocument(s,Gc.min()));const n=hf().add(s),i=new pf(Gc.min(),new Map,new tf($c),e,n);await Ly(r,i),r.Oo=r.Oo.remove(s),r.Fo.delete(t),Wy(r)}else await Jm(r.localStore,t,!1).then((()=>By(r,t,n))).catch(vm)}async function Uy(e,t){const n=Oc(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Oc(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.jn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Sp.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Ac(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))}))})),o.next((()=>e.In.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.In.performConsistencyCheck(e))).next((()=>n.Qn.bn(e,r)))}))}(n.localStore,t);zy(n,r,null),Vy(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Hy(n,e)}catch(e){await vm(e)}}async function jy(e,t,n){const r=Oc(e);try{const e=await function(e,t){const n=Oc(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.In.lookupMutationBatch(e,t).next((t=>(Ac(null!==t),r=t.keys(),n.In.removeMutationBatch(e,t)))).next((()=>n.In.performConsistencyCheck(e))).next((()=>n.Qn.bn(e,r)))}))}(r.localStore,t);zy(r,t,n),Vy(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Hy(r,e)}catch(n){await vm(n)}}function Vy(e,t){(e.Bo.get(t)||[]).forEach((e=>{e.resolve()})),e.Bo.delete(t)}function zy(e,t,n){const r=Oc(e);let i=r.Lo[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Lo[r.currentUser.toKey()]=i}}function By(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.ko.get(t))e.xo.delete(r),n&&e.No.jo(r,n);e.ko.delete(t),e.isPrimaryClient&&e.Mo.cs(t).forEach((t=>{e.Mo.containsKey(t)||qy(e,t)}))}function qy(e,t){e.$o.delete(t.path.canonicalString());const n=e.Oo.get(t);null!==n&&(jg(e.remoteStore,n),e.Oo=e.Oo.remove(t),e.Fo.delete(n),Wy(e))}function $y(e,t,n){for(const r of n)r instanceof ky?(e.Mo.addReference(r.key,t),Ky(e,r)):r instanceof Ny?(Sc("SyncEngine","Document no longer in limbo: "+r.key),e.Mo.removeReference(r.key,t),e.Mo.containsKey(r.key)||qy(e,r.key)):xc()}function Ky(e,t){const n=t.key,r=n.path.canonicalString();e.Oo.get(n)||e.$o.has(r)||(Sc("SyncEngine","New document in limbo: "+n),e.$o.add(r),Wy(e))}function Wy(e){for(;e.$o.size>0&&e.Oo.size<e.maxConcurrentLimboResolutions;){const t=e.$o.values().next().value;e.$o.delete(t);const n=new ph(Zc.fromString(t)),r=e.Uo.next();e.Fo.set(r,new Ay(n)),e.Oo=e.Oo.insert(n,r),Ug(e.remoteStore,new jp(ad(ed(n.path)),r,2,zc.T))}}async function Hy(e,t,n){const r=Oc(e),i=[],s=[],o=[];r.xo.isEmpty()||(r.xo.forEach(((e,a)=>{o.push(r.Ko(a,t,n).then((e=>{if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),i.push(e);const t=zm.kn(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.No.Tr(i),await async function(e,t){const n=Oc(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Sp.forEach(t,(t=>Sp.forEach(t.Nn,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Sp.forEach(t.xn,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Ap(e))throw e;Sc("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.Un.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.Un=n.Un.insert(t,i)}}}(r.localStore,s))}async function Gy(e,t){const n=Oc(e);if(!n.currentUser.isEqual(t)){Sc("SyncEngine","User change. New user:",t.toKey());const e=await Km(n.localStore,t);n.currentUser=t,function(e,t){e.Bo.forEach((e=>{e.forEach((e=>{e.reject(new Pc(Rc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Bo.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Hy(n,e.Wn)}}function Qy(e,t){const n=Oc(e),r=n.Fo.get(t);if(r&&r.Co)return hf().add(r.key);{let e=hf();const r=n.ko.get(t);if(!r)return e;for(const t of r){const r=n.xo.get(t);e=e.unionWith(r.view.To)}return e}}async function Jy(e,t){const n=Oc(e),r=await Ym(n.localStore,t.query,!0),i=t.view.So(r);return n.isPrimaryClient&&$y(n,t.targetId,i.vo),i}async function Yy(e){const t=Oc(e);return Zm(t.localStore).then((e=>Hy(t,e)))}async function Xy(e,t,n,r){const i=Oc(e),s=await function(e,t){const n=Oc(e),r=Oc(n.In);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Xt(e,t).next((t=>t?n.Qn.bn(e,t):Sp.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await Yg(i.remoteStore):"acknowledged"===n||"rejected"===n?(zy(i,t,r||null),Vy(i,t),function(e,t){Oc(Oc(e).In).te(t)}(i.localStore,t)):xc(),await Hy(i,s)):Sc("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Zy(e,t,n){const r=Oc(e),i=[],s=[];for(const e of t){let t;const n=r.ko.get(e);if(n&&0!==n.length){t=await Qm(r.localStore,ad(n[0]));for(const e of n){const t=r.xo.get(e),n=await Jy(r,t);n.snapshot&&s.push(n.snapshot)}}else{const n=await Xm(r.localStore,e);t=await Qm(r.localStore,n),await Py(r,ev(n),e,!1)}i.push(t)}return r.No.Tr(s),i}function ev(e){return Zh(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function tv(e){const t=Oc(e);return Oc(Oc(t.localStore).persistence).pn()}async function nv(e,t,n,r){const i=Oc(e);if(i.qo)Sc("SyncEngine","Ignoring unexpected query state notification.");else if(i.ko.has(t))switch(n){case"current":case"not-current":{const e=await Zm(i.localStore),r=pf.createSynthesizedRemoteEventForCurrentChange(t,"current"===n);await Hy(i,e,r);break}case"rejected":await Jm(i.localStore,t,!0),By(i,t,r);break;default:xc()}}async function rv(e,t,n){const r=iv(e);if(r.qo){for(const e of t){if(r.ko.has(e)){Sc("SyncEngine","Adding an already active target "+e);continue}const t=await Xm(r.localStore,e),n=await Qm(r.localStore,t);await Py(r,ev(t),n.targetId,!1),Ug(r.remoteStore,n)}for(const e of n)r.ko.has(e)&&await Jm(r.localStore,e,!1).then((()=>{jg(r.remoteStore,e),By(r,e)})).catch(vm)}}function iv(e){const t=Oc(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ly.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Qy.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Fy.bind(null,t),t.No.Tr=vy.bind(null,t.eventManager),t.No.jo=wy.bind(null,t.eventManager),t}function sv(e){const t=Oc(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Uy.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=jy.bind(null,t),t}class ov{constructor(){this.synchronizeTabs=!1}async initialize(e){this.N=Cg(e.databaseInfo.databaseId),this.sharedClientState=this.Wo(e),this.persistence=this.Go(e),await this.persistence.start(),this.gcScheduler=this.zo(e),this.localStore=this.Ho(e)}zo(e){return null}Ho(e){return $m(this.persistence,new Bm,e.initialUser,this.N)}Go(e){return new ug(cg.Ns,this.N)}Wo(e){return new bg}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class av extends ov{constructor(e,t,n){super(),this.Jo=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await async function(e){const t=Oc(e);return t.persistence.runTransaction("Synchronize last document change read time","readonly",(e=>function(e){const t=Am(e);let n=Gc.min();return t.Kt({index:fp.readTimeIndex,reverse:!0},((e,t,r)=>{t.readTime&&(n=$p(t.readTime)),r.done()})).next((()=>n))}(e))).then((e=>{t.Kn=e}))}(this.localStore),await this.Jo.initialize(this,e),await sv(this.Jo.syncEngine),await Yg(this.Jo.remoteStore),await this.persistence.nn((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(this.localStore),Promise.resolve())))}Ho(e){return $m(this.persistence,new Bm,e.initialUser,this.N)}zo(e){const t=this.persistence.referenceDelegate.garbageCollector;return new _m(t,e.asyncQueue)}Go(e){const t=Um(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?sm.withCacheSize(this.cacheSizeBytes):sm.DEFAULT;return new Lm(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,kg(),Ng(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(e){return new bg}}class uv extends av{constructor(e,t){super(e,t,!1),this.Jo=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Jo.syncEngine;this.sharedClientState instanceof wg&&(this.sharedClientState.syncEngine={_i:Xy.bind(null,t),mi:nv.bind(null,t),gi:rv.bind(null,t),pn:tv.bind(null,t),wi:Yy.bind(null,t)},await this.sharedClientState.start()),await this.persistence.nn((async e=>{await async function(e,t){const n=Oc(e);if(iv(n),sv(n),!0===t&&!0!==n.qo){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Zy(n,e.toArray());n.qo=!0,await oy(n.remoteStore,!0);for(const e of t)Ug(n.remoteStore,e)}else if(!1===t&&!1!==n.qo){const e=[];let t=Promise.resolve();n.ko.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(By(n,i),Jm(n.localStore,i,!0)))),jg(n.remoteStore,i)})),await t,await Zy(n,e),function(e){const t=Oc(e);t.Fo.forEach(((e,n)=>{jg(t.remoteStore,n)})),t.Mo.us(),t.Fo=new Map,t.Oo=new Xd(ph.comparator)}(n),n.qo=!1,await oy(n.remoteStore,!1)}}(this.Jo.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop())}))}Wo(e){const t=kg();if(!wg.Pt(t))throw new Pc(Rc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Um(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wg(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class lv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>My(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Gy.bind(null,this.syncEngine),await oy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new my}createDatastore(e){const t=Cg(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new Sg(r));var r;return function(e,t,n){return new Pg(e,t,n)}(e.credentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>My(this.syncEngine,e,0),s=Eg.Pt()?new Eg:new _g,new Lg(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Oy(e,t,n,r,i,s);return o&&(a.qo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Oc(e);Sc("RemoteStore","RemoteStore shutting down."),t.Kr.add(5),await Fg(t),t.Qr.shutdown(),t.Wr.set("Unknown")}(this.remoteStore)}}function cv(e,t=10240){let n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}class hv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Yo(this.observer.next,e)}error(e){this.observer.error?this.Yo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Xo(){this.muted=!0}Yo(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class dv{constructor(e,t){this.Zo=e,this.N=t,this.metadata=new Dc,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then((e=>{e&&e.ho()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.payload)}`))}),(e=>this.metadata.reject(e)))}close(){return this.Zo.cancel()}async getMetadata(){return this.metadata.promise}async Qo(){return await this.getMetadata(),this.ea()}async ea(){const e=await this.na();if(null===e)return null;const t=this.ta.decode(e),n=Number(t);isNaN(n)&&this.sa(`length string (${t}) is not valid number`);const r=await this.ia(n);return new Ey(JSON.parse(r),e.length+n)}ra(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async na(){for(;this.ra()<0&&!await this.oa(););if(0===this.buffer.length)return null;const e=this.ra();e<0&&this.sa("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async ia(e){for(;this.buffer.length<e;)await this.oa()&&this.sa("Reached the end of bundle when more is expected.");const t=this.ta.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}sa(e){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${e}`)}async oa(){const e=await this.Zo.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class fv{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Pc(Rc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=Oc(e),r=Mf(n.N)+"/documents",i={documents:t.map((e=>Rf(n.N,e)))},s=await n.Ki("BatchGetDocuments",r,i),o=new Map;s.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Ac(!!t.found),t.found.name,t.found.updateTime;const n=Pf(e,t.found.name),r=xf(t.found.updateTime),i=new xh({mapValue:{fields:t.found.fields}});return Oh.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Ac(!!t.missing),Ac(!!t.readTime);const n=Pf(e,t.missing),r=xf(t.readTime);return Oh.newNoDocument(n,r)}(e,t):xc()}(n.N,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=o.get(e.toString());Ac(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Kd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=ph.fromPath(t);this.mutations.push(new Wd(n,this.precondition(n)))})),await async function(e,t){const n=Oc(e),r=Mf(n.N)+"/documents",i={writes:t.map((e=>Vf(n.N,e)))};await n.Li("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw xc();t=Gc.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Pc(Rc.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Rd.updateTime(t):Rd.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Gc.min()))throw new Pc(Rc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rd.updateTime(t)}return Rd.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class pv{constructor(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.aa=5,this.rr=new xg(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){this.rr.Xi((async()=>{const e=new fv(this.datastore),t=this.ua(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.ha(e)}))))})).catch((e=>{this.ha(e)}))}))}ua(e){try{const t=this.updateFunction(e);return!hh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}ha(e){this.aa>0&&this.la(e)?(this.aa-=1,this.asyncQueue.enqueueAndForget((()=>(this.ca(),Promise.resolve())))):this.deferred.reject(e)}la(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Jd(t)}return!1}}class mv{constructor(e,t,n){this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=_c.UNAUTHENTICATED,this.clientId=qc.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(t,(async e=>{Sc("FirestoreClient","Received user=",e.uid),await this.credentialListener(e),this.user=e}))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pc(Rc.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Dc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.credentials.shutdown(),e.resolve()}catch(t){const n=cy(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function gv(e,t){e.asyncQueue.verifyOperationInProgress(),Sc("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Km(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e.offlineComponents=t}async function yv(e,t){e.asyncQueue.verifyOperationInProgress();const n=await vv(e);Sc("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>async function(e,t){const n=Oc(e);n.asyncQueue.verifyOperationInProgress(),Sc("RemoteStore","RemoteStore received new credentials");const r=$g(n);n.Kr.add(3),await Fg(n),r&&n.Wr.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Kr.delete(3),await Mg(n)}(t.remoteStore,e))),e.onlineComponents=t}async function vv(e){return e.offlineComponents||(Sc("FirestoreClient","Using default OfflineComponentProvider"),await gv(e,new ov)),e.offlineComponents}async function wv(e){return e.onlineComponents||(Sc("FirestoreClient","Using default OnlineComponentProvider"),await yv(e,new lv)),e.onlineComponents}function bv(e){return vv(e).then((e=>e.persistence))}function _v(e){return vv(e).then((e=>e.localStore))}function Ev(e){return wv(e).then((e=>e.remoteStore))}function Iv(e){return wv(e).then((e=>e.syncEngine))}async function Tv(e){const t=await wv(e),n=t.eventManager;return n.onListen=Ry.bind(null,t.syncEngine),n.onUnlisten=Dy.bind(null,t.syncEngine),n}function Sv(e,t,n={}){const r=new Dc;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new hv({next:s=>{t.enqueueAndForget((()=>yy(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Pc(Rc.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Pc(Rc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new _y(ed(n.path),s,{includeMetadataChanges:!0,uo:!0});return gy(e,o)}(await Tv(e),e.asyncQueue,t,n,r))),r.promise}function kv(e,t,n={}){const r=new Dc;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new hv({next:n=>{t.enqueueAndForget((()=>yy(e,o))),n.fromCache&&"server"===r.source?i.reject(new Pc(Rc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new _y(n,s,{includeMetadataChanges:!0,uo:!0});return gy(e,o)}(await Tv(e),e.asyncQueue,t,n,r))),r.promise}class Nv{constructor(e,t,n,r,i,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class Cv{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Cv&&e.projectId===this.projectId&&e.database===this.database}}const xv=new Map;function Av(e,t,n){if(!n)throw new Pc(Rc.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Ov(e,t,n,r){if(!0===t&&!0===r)throw new Pc(Rc.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Rv(e){if(!ph.isDocumentKey(e))throw new Pc(Rc.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Pv(e){if(ph.isDocumentKey(e))throw new Pc(Rc.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Dv(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){if(e.constructor){const t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":xc()}function Lv(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Pc(Rc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Dv(e);throw new Pc(Rc.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Mv(e,t){if(t<=0)throw new Pc(Rc.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class Fv{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Pc(Rc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pc(Rc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Ov("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uv{constructor(e,t){this._credentials=t,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fv({}),this._settingsFrozen=!1,e instanceof Cv?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Pc(Rc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cv(e.options.projectId)}(e))}get app(){if(!this._app)throw new Pc(Rc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pc(Rc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fv(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new Mc;switch(e.type){case"gapi":const t=e.client;return Ac(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Vc(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Pc(Rc.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=xv.get(e);t&&(Sc("ComponentProvider","Removing Datastore"),xv.delete(e),t.terminate())}(this),Promise.resolve()}}class jv{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zv(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jv(this.firestore,e,this._key)}}class Vv{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Vv(this.firestore,e,this._query)}}class zv extends Vv{constructor(e,t,n){super(e,t,ed(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jv(this.firestore,null,new ph(e))}withConverter(e){return new zv(this.firestore,e,this._path)}}function Bv(e,t,...n){if(e=It(e),Av("collection","path",t),e instanceof Uv){const r=Zc.fromString(t,...n);return Pv(r),new zv(e,null,r)}{if(!(e instanceof jv||e instanceof zv))throw new Pc(Rc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=Zc.fromString(e.path,...n).child(Zc.fromString(t));return Pv(r),new zv(e.firestore,null,r)}}function qv(e,t,...n){if(e=It(e),1===arguments.length&&(t=qc.I()),Av("doc","path",t),e instanceof Uv){const r=Zc.fromString(t,...n);return Rv(r),new jv(e,null,new ph(r))}{if(!(e instanceof jv||e instanceof zv))throw new Pc(Rc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Zc.fromString(t,...n));return Rv(r),new jv(e.firestore,e instanceof zv?e.converter:null,new ph(r))}}function $v(e,t){return e=It(e),t=It(t),(e instanceof jv||e instanceof zv)&&(t instanceof jv||t instanceof zv)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Kv(e,t){return e=It(e),t=It(t),e instanceof Vv&&t instanceof Vv&&e.firestore===t.firestore&&ld(e._query,t._query)&&e.converter===t.converter}class Wv{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new xg(this,"async_queue_retry"),this.Ea=()=>{const e=Ng();e&&Sc("AsyncQueue","Visibility state changed to "+e.visibilityState),this.rr.tr()};const e=Ng();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ea)}get isShuttingDown(){return this.wa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ta(),this.Ia(e)}enterRestrictedMode(e){if(!this.wa){this.wa=!0,this.ya=e||!1;const t=Ng();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ea)}}enqueue(e){if(this.Ta(),this.wa)return new Promise((()=>{}));const t=new Dc;return this.Ia((()=>this.wa&&this.ya?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.da.push(e),this.Aa())))}async Aa(){if(0!==this.da.length){try{await this.da[0](),this.da.shift(),this.rr.reset()}catch(e){if(!Ap(e))throw e;Sc("AsyncQueue","Operation failed with retryable error: "+e)}this.da.length>0&&this.rr.Xi((()=>this.Aa()))}}Ia(e){const t=this.fa.then((()=>(this.ga=!0,e().catch((e=>{throw this.ma=e,this.ga=!1,kc("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e})).then((e=>(this.ga=!1,e))))));return this.fa=t,t}enqueueAfterDelay(e,t,n){this.Ta(),this.pa.indexOf(e)>-1&&(t=0);const r=ly.createAndSchedule(this,e,t,n,(e=>this.Ra(e)));return this._a.push(r),r}Ta(){this.ma&&xc()}verifyOperationInProgress(){}async Pa(){let e;do{e=this.fa,await e}while(e!==this.fa)}ba(e){for(const t of this._a)if(t.timerId===e)return!0;return!1}va(e){return this.Pa().then((()=>{this._a.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this._a)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Pa()}))}Va(e){this.pa.push(e)}Ra(e){const t=this._a.indexOf(e);this._a.splice(t,1)}}function Hv(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const e of["next","error","complete"])if(e in n&&"function"==typeof n[e])return!0;return!1}(e)}class Gv{constructor(){this._progressObserver={},this._taskCompletionResolver=new Dc,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Qv extends Uv{constructor(e,t){super(e,t),this.type="firestore",this._queue=new Wv,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Yv(this),this._firestoreClient.terminate()}}function Jv(e){return e._firestoreClient||Yv(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Yv(e){var t;const n=e._freezeSettings(),r=function(e,t,n,r){return new Nv(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new mv(e._credentials,e._queue,r)}function Xv(e,t,n){const r=new Dc;return e.asyncQueue.enqueue((async()=>{try{await gv(e,n),await yv(e,t),r.resolve()}catch(e){if(!function(e){return"FirebaseError"===e.name?e.code===Rc.FAILED_PRECONDITION||e.code===Rc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(e))throw e;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.reject(e)}})).then((()=>r.promise))}function Zv(e){if(e._initialized||e._terminated)throw new Pc(Rc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ew{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pc(Rc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new th(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class tw{constructor(e){this._byteString=e}static fromBase64String(e){try{return new tw(rh.fromBase64String(e))}catch(e){throw new Pc(Rc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new tw(rh.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class nw{constructor(e){this._methodName=e}}class rw{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pc(Rc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pc(Rc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $c(this._lat,e._lat)||$c(this._long,e._long)}}const iw=/^__.*__$/;class sw{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new zd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vd(e,this.data,t,this.fieldTransforms)}}class ow{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new zd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function aw(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xc()}}class uw{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.N=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sa(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(e){return new uw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Ca({path:n,xa:!1});return r.ka(e),r}$a(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Ca({path:n,xa:!1});return r.Sa(),r}Oa(e){return this.Ca({path:void 0,xa:!0})}Fa(e){return Cw(e,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Sa(){if(this.path)for(let e=0;e<this.path.length;e++)this.ka(this.path.get(e))}ka(e){if(0===e.length)throw this.Fa("Document fields must not be empty");if(aw(this.Da)&&iw.test(e))throw this.Fa('Document fields cannot begin and end with "__"')}}class lw{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.N=n||Cg(e)}Ba(e,t,n,r=!1){return new uw({Da:e,methodName:t,La:n,path:th.emptyPath(),xa:!1,Ma:r},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function cw(e){const t=e._freezeSettings(),n=Cg(e._databaseId);return new lw(e._databaseId,!!t.ignoreUndefinedProperties,n)}function hw(e,t,n,r,i,s={}){const o=e.Ba(s.merge||s.mergeFields?2:0,t,n,i);Tw("Data must be an object, but it was:",o,r);const a=Ew(r,o);let u,l;if(s.merge)u=new nh(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Sw(t,r,n);if(!o.contains(i))throw new Pc(Rc.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);xw(e,i)||e.push(i)}u=new nh(e),l=o.fieldTransforms.filter((e=>u.covers(e.field)))}else u=null,l=o.fieldTransforms;return new sw(new xh(a),u,l)}class dw extends nw{_toFieldTransform(e){if(2!==e.Da)throw 1===e.Da?e.Fa(`${this._methodName}() can only appear at the top level of your update data`):e.Fa(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dw}}function fw(e,t,n){return new uw({Da:3,La:t.settings.La,methodName:e._methodName,xa:n},t.databaseId,t.N,t.ignoreUndefinedProperties)}class pw extends nw{_toFieldTransform(e){return new Ad(e.path,new Ed)}isEqual(e){return e instanceof pw}}class mw extends nw{constructor(e,t){super(e),this.Ua=t}_toFieldTransform(e){const t=fw(this,e,!0),n=this.Ua.map((e=>_w(e,t))),r=new Id(n);return new Ad(e.path,r)}isEqual(e){return this===e}}class gw extends nw{constructor(e,t){super(e),this.Ua=t}_toFieldTransform(e){const t=fw(this,e,!0),n=this.Ua.map((e=>_w(e,t))),r=new Sd(n);return new Ad(e.path,r)}isEqual(e){return this===e}}class yw extends nw{constructor(e,t){super(e),this.qa=t}_toFieldTransform(e){const t=new Nd(e.N,yd(e.N,this.qa));return new Ad(e.path,t)}isEqual(e){return this===e}}function vw(e,t,n,r){const i=e.Ba(1,t,n);Tw("Data must be an object, but it was:",i,r);const s=[],o=xh.empty();Jc(r,((e,r)=>{const a=Nw(t,e,n);r=It(r);const u=i.$a(a);if(r instanceof dw)s.push(a);else{const e=_w(r,u);null!=e&&(s.push(a),o.set(a,e))}}));const a=new nh(s);return new ow(o,a,i.fieldTransforms)}function ww(e,t,n,r,i,s){const o=e.Ba(1,t,n),a=[Sw(t,r,n)],u=[i];if(s.length%2!=0)throw new Pc(Rc.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<s.length;e+=2)a.push(Sw(t,s[e])),u.push(s[e+1]);const l=[],c=xh.empty();for(let e=a.length-1;e>=0;--e)if(!xw(l,a[e])){const t=a[e];let n=u[e];n=It(n);const r=o.$a(t);if(n instanceof dw)l.push(t);else{const e=_w(n,r);null!=e&&(l.push(t),c.set(t,e))}}const h=new nh(l);return new ow(c,h,o.fieldTransforms)}function bw(e,t,n,r=!1){return _w(n,e.Ba(r?4:3,t))}function _w(e,t){if(Iw(e=It(e)))return Tw("Unsupported field value:",t,e),Ew(e,t);if(e instanceof nw)return function(e,t){if(!aw(t.Da))throw t.Fa(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Fa(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xa&&4!==t.Da)throw t.Fa("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=_w(i,t.Oa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=It(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return yd(t.N,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Hc.fromDate(e);return{timestampValue:kf(t.N,n)}}if(e instanceof Hc){const n=new Hc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:kf(t.N,n)}}if(e instanceof rw)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof tw)return{bytesValue:Nf(t.N,e._byteString)};if(e instanceof jv){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Fa(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Af(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Fa(`Unsupported field value: ${Dv(e)}`)}(e,t)}function Ew(e,t){const n={};return Yc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Jc(e,((e,r)=>{const i=_w(r,t.Na(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Iw(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Hc||e instanceof rw||e instanceof tw||e instanceof jv||e instanceof nw)}function Tw(e,t,n){if(!Iw(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Dv(n);throw"an object"===r?t.Fa(e+" a custom object"):t.Fa(e+" "+r)}}function Sw(e,t,n){if((t=It(t))instanceof ew)return t._internalPath;if("string"==typeof t)return Nw(e,t);throw Cw("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}const kw=new RegExp("[~\\*/\\[\\]]");function Nw(e,t,n){if(t.search(kw)>=0)throw Cw(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ew(...t.split("."))._internalPath}catch(r){throw Cw(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Cw(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Pc(Rc.INVALID_ARGUMENT,a+e+u)}function xw(e,t){return e.some((e=>e.isEqual(t)))}class Aw{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new jv(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ow(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Rw("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ow extends Aw{data(){return super.data()}}function Rw(e,t){return"string"==typeof t?Nw(e,t):t instanceof ew?t._internalPath:t._delegate._internalPath}class Pw{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dw extends Aw{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Lw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Rw("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Lw extends Dw{data(e={}){return super.data(e)}}class Mw{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Pw(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Lw(this._firestore,this._userDataWriter,n.key,n,new Pw(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pc(Rc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>({type:"added",doc:new Lw(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Pw(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++})))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Lw(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Pw(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Fw(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Fw(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xc()}}function Uw(e,t){return e instanceof Dw&&t instanceof Dw?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Mw&&t instanceof Mw&&e._firestore===t._firestore&&Kv(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function jw(e){if(nd(e)&&0===e.explicitOrderBy.length)throw new Pc(Rc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vw{}function zw(e,...t){for(const n of t)e=n._apply(e);return e}class Bw extends Vw{constructor(e,t,n){super(),this.Ka=e,this.ja=t,this.Qa=n,this.type="where"}_apply(e){const t=cw(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Pc(Rc.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on FieldPath.documentId().`);if("in"===s||"not-in"===s){Qw(o,s);const t=[];for(const n of o)t.push(Gw(r,e,n));a={arrayValue:{values:t}}}else a=Gw(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Qw(o,s),a=bw(n,"where",o,"in"===s||"not-in"===s);const u=Fh.create(i,s,a);return function(e,t){if(t.v()){const n=id(e);if(null!==n&&!n.isEqual(t.field))throw new Pc(Rc.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${t.field.toString()}'`);const r=rd(e);null!==r&&Jw(0,t.field,r)}const n=function(e,t){for(const n of e.filters)if(t.indexOf(n.op)>=0)return n.op;return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Pc(Rc.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Pc(Rc.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}(e,u),u}(e._query,0,t,e.firestore._databaseId,this.Ka,this.ja,this.Qa);return new Vv(e.firestore,e.converter,function(e,t){const n=e.filters.concat([t]);return new Xh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}class qw extends Vw{constructor(e,t){super(),this.Ka=e,this.Wa=t,this.type="orderBy"}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Pc(Rc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Pc(Rc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new Gh(t,n);return function(e,t){if(null===rd(e)){const n=id(e);null!==n&&Jw(0,n,t.field)}}(e,r),r}(e._query,this.Ka,this.Wa);return new Vv(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Xh(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class $w extends Vw{constructor(e,t,n){super(),this.type=e,this.Ga=t,this.za=n}_apply(e){return new Vv(e.firestore,e.converter,ud(e._query,this.Ga,this.za))}}class Kw extends Vw{constructor(e,t,n){super(),this.type=e,this.Ha=t,this.Ja=n}_apply(e){const t=Hw(e,this.type,this.Ha,this.Ja);return new Vv(e.firestore,e.converter,function(e,t){return new Xh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class Ww extends Vw{constructor(e,t,n){super(),this.type=e,this.Ha=t,this.Ja=n}_apply(e){const t=Hw(e,this.type,this.Ha,this.Ja);return new Vv(e.firestore,e.converter,function(e,t){return new Xh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Hw(e,t,n,r){if(n[0]=It(n[0]),n[0]instanceof Aw)return function(e,t,n,r,i){if(!r)throw new Pc(Rc.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const n of od(e))if(n.field.isKeyField())s.push(Eh(t,r.key));else{const e=r.data.field(n.field);if(uh(e))throw new Pc(Rc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+n.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=n.field.canonicalString();throw new Pc(Rc.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new Wh(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=cw(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Pc(Rc.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let s=0;s<i.length;s++){const u=i[s];if(o[s].field.isKeyField()){if("string"!=typeof u)throw new Pc(Rc.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof u}`);if(!sd(e)&&-1!==u.indexOf("/"))throw new Pc(Rc.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${r}() must be a plain document ID, but '${u}' contains a slash.`);const n=e.path.child(Zc.fromString(u));if(!ph.isDocumentKey(n))throw new Pc(Rc.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new ph(n);a.push(Eh(t,i))}else{const e=bw(n,r,u);a.push(e)}}return new Wh(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function Gw(e,t,n){if("string"==typeof(n=It(n))){if(""===n)throw new Pc(Rc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!sd(t)&&-1!==n.indexOf("/"))throw new Pc(Rc.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Zc.fromString(n));if(!ph.isDocumentKey(r))throw new Pc(Rc.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Eh(e,new ph(r))}if(n instanceof jv)return Eh(e,n._key);throw new Pc(Rc.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dv(n)}.`)}function Qw(e,t){if(!Array.isArray(e)||0===e.length)throw new Pc(Rc.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new Pc(Rc.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function Jw(e,t,n){if(!n.isEqual(t))throw new Pc(Rc.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Yw{convertValue(e,t="none"){switch(mh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return oh(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ah(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw xc()}}convertObject(e,t){const n={};return Jc(e.fields,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new rw(oh(e.latitude),oh(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=lh(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ch(e));default:return null}}convertTimestamp(e){const t=sh(e);return new Hc(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Zc.fromString(e);Ac(tp(n));const r=new Cv(n.get(1),n.get(3)),i=new ph(n.popFirst(5));return r.isEqual(t)||kc(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function Xw(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Zw extends Yw{constructor(e){super(),this.firestore=e}convertBytes(e){return new tw(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jv(this.firestore,null,t)}}class eb{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=cw(e)}set(e,t,n){this._verifyNotCommitted();const r=tb(e,this._firestore),i=Xw(r.converter,t,n),s=hw(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Rd.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=tb(e,this._firestore);let s;return s="string"==typeof(t=It(t))||t instanceof ew?ww(this._dataReader,"WriteBatch.update",i._key,t,n,r):vw(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,Rd.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=tb(e,this._firestore);return this._mutations=this._mutations.concat(new Kd(t._key,Rd.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pc(Rc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function tb(e,t){if((e=It(e)).firestore!==t)throw new Pc(Rc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class nb extends Yw{constructor(e){super(),this.firestore=e}convertBytes(e){return new tw(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jv(this.firestore,null,t)}}function rb(e,t,n){e=Lv(e,jv);const r=Lv(e.firestore,Qv),i=Xw(e.converter,t,n);return ob(r,[hw(cw(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Rd.none())])}function ib(e,t,n,...r){e=Lv(e,jv);const i=Lv(e.firestore,Qv),s=cw(i);let o;return o="string"==typeof(t=It(t))||t instanceof ew?ww(s,"updateDoc",e._key,t,n,r):vw(s,"updateDoc",e._key,t),ob(i,[o.toMutation(e._key,Rd.exists(!0))])}function sb(e,...t){var n,r,i;e=It(e);let s={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||Hv(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(Hv(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let u,l,c;if(e instanceof jv)l=Lv(e.firestore,Qv),c=ed(e._key.path),u={next:n=>{t[o]&&t[o](ab(l,e,n))},error:t[o+1],complete:t[o+2]};else{const n=Lv(e,Vv);l=Lv(n.firestore,Qv),c=n._query;const r=new nb(l);u={next:e=>{t[o]&&t[o](new Mw(l,r,n,e))},error:t[o+1],complete:t[o+2]},jw(e._query)}return function(e,t,n,r){const i=new hv(r),s=new _y(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>gy(await Tv(e),s))),()=>{i.Xo(),e.asyncQueue.enqueueAndForget((async()=>yy(await Tv(e),s)))}}(Jv(l),c,a,u)}function ob(e,t){return function(e,t){const n=new Dc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=sv(e);try{const e=await function(e,t){const n=Oc(e),r=Hc.now(),i=t.reduce(((e,t)=>e.add(t.key)),hf());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>n.Qn.bn(e,i).next((i=>{s=i;const o=[];for(const e of t){const t=Fd(e,s.get(e.key));null!=t&&o.push(new zd(e.key,t,Ah(t.value.mapValue),Rd.exists(!0)))}return n.In.addMutationBatch(e,r,o,t)})))).then((e=>(e.applyToLocalDocumentSet(s),{batchId:e.batchId,changes:s})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Lo[e.currentUser.toKey()];r||(r=new Xd($c)),r=r.insert(t,n),e.Lo[e.currentUser.toKey()]=r}(r,e.batchId,n),await Hy(r,e.changes),await Yg(r.remoteStore)}catch(e){const t=cy(e,"Failed to persist write");n.reject(t)}}(await Iv(e),t,n))),n.promise}(Jv(e),t)}function ab(e,t,n){const r=n.docs.get(t._key),i=new nb(e);return new Dw(e,i,t._key,r,new Pw(n.hasPendingWrites,n.fromCache),t.converter)}class ub extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=cw(e)}get(e){const t=tb(e,this._firestore),n=new Zw(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return xc();const r=e[0];if(r.isFoundDocument())return new Aw(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Aw(this._firestore,n,t._key,null,t.converter);throw xc()}))}set(e,t,n){const r=tb(e,this._firestore),i=Xw(r.converter,t,n),s=hw(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n,...r){const i=tb(e,this._firestore);let s;return s="string"==typeof(t=It(t))||t instanceof ew?ww(this._dataReader,"Transaction.update",i._key,t,n,r):vw(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,s),this}delete(e){const t=tb(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=tb(e,this._firestore),n=new nb(this._firestore);return super.get(e).then((e=>new Dw(this._firestore,n,t._key,e._document,new Pw(!1,!1),t.converter)))}}function lb(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Pc("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function cb(){if("undefined"==typeof Uint8Array)throw new Pc("unimplemented","Uint8Arrays are not available in this environment.")}function hb(){if("undefined"==typeof atob)throw new Pc("unimplemented","Blobs are unavailable in Firestore in this environment.")}Ec=Xt,Wt(new St("firestore",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=new Qv(n,new Uc(e.getProvider("auth-internal")));return t=Object.assign({useFetchStreams:!0},t),r._setSettings(t),r}),"PUBLIC")),rn("@firebase/firestore","3.0.1",void 0);class db{constructor(e){this._delegate=e}static fromBase64String(e){return hb(),new db(tw.fromBase64String(e))}static fromUint8Array(e){return cb(),new db(tw.fromUint8Array(e))}toBase64(){return hb(),this._delegate.toBase64()}toUint8Array(){return cb(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function fb(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const e of["next","error","complete"])if(e in n&&"function"==typeof n[e])return!0;return!1}(e)}class pb{enableIndexedDbPersistence(e,t){return function(e,t){Zv(e=Lv(e,Qv));const n=Jv(e),r=e._freezeSettings(),i=new lv;return Xv(n,i,new av(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){Zv(e=Lv(e,Qv));const t=Jv(e),n=e._freezeSettings(),r=new lv;return Xv(t,r,new uv(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Pc(Rc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Dc;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Np.Pt())return Promise.resolve();const t=e+"main";await Np.delete(t)}(Um(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class mb{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Cv||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Nc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){!function(e,t,n,r={}){var i;const s=(e=Lv(e,Uv))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&Nc("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${n}`,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=_c.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=He({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[et(JSON.stringify({alg:"none",type:"JWT"})),et(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Pc(Rc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new _c(s)}e._credentials=new Fc(new Lc(t,n))}}(this._delegate,e,t,n)}enableNetwork(){return function(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await bv(e),n=await Ev(e);return t.setNetworkEnabled(!0),function(e){const t=Oc(e);return t.Kr.delete(0),Mg(t)}(n)}))}(Jv(e=Lv(e,Qv)))}(this._delegate)}disableNetwork(){return function(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await bv(e),n=await Ev(e);return t.setNetworkEnabled(!1),async function(e){const t=Oc(e);t.Kr.add(0),await Fg(t),t.Wr.set("Offline")}(n)}))}(Jv(e=Lv(e,Qv)))}(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Ov("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(e){return function(e){const t=new Dc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Oc(e);$g(n.remoteStore)||Sc("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Oc(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.In.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Bo.get(e)||[];r.push(t),n.Bo.set(e,r)}catch(e){const n=cy(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Iv(e),t))),t.promise}(Jv(e=Lv(e,Qv)))}(this._delegate)}onSnapshotsInSync(e){return function(e,t){return function(e,t){const n=new hv(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Oc(e).Zr.add(t),t.next()}(await Tv(e),n))),()=>{n.Xo(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Oc(e).Zr.delete(t)}(await Tv(e),n)))}}(Jv(e=Lv(e,Qv)),Hv(t)?t:{next:t})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pc("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new xb(this,Bv(this._delegate,e))}catch(e){throw _b(e,"collection()","Firestore.collection()")}}doc(e){try{return new bb(this,qv(this._delegate,e))}catch(e){throw _b(e,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new kb(this,function(e,t){if(e=Lv(e,Uv),Av("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Pc(Rc.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Vv(e,null,function(e){return new Xh(Zc.emptyPath(),e)}(t))}(this._delegate,e))}catch(e){throw _b(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t){return function(e,t){const n=new Dc;return e.asyncQueue.enqueueAndForget((async()=>{const r=await function(e){return wv(e).then((e=>e.datastore))}(e);new pv(e.asyncQueue,r,t,n).run()})),n.promise}(Jv(e),(n=>t(new ub(e,n))))}(this._delegate,(t=>e(new yb(this,t))))}batch(){return Jv(this._delegate),new vb(new eb(this._delegate,(e=>ob(this._delegate,e))))}loadBundle(e){return function(e,t){const n=Jv(e=Lv(e,Qv)),r=new Gv;return function(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?(new TextEncoder).encode(e):e,function(e,t){return new dv(e,t)}(function(e,t){if(e instanceof Uint8Array)return cv(e,t);if(e instanceof ArrayBuffer)return cv(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Cg(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Oc(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Oc(e),r=xf(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Je.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),void n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r));n._updateProgress(Sy(r));const i=new Ty(r,e.localStore,t.N);let s=await t.Qo();for(;s;){const e=await i.fo(s);e&&n._updateProgress(e),s=await t.Qo()}const o=await i.complete();await Hy(e,o.Tn,void 0),await function(e,t){const n=Oc(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Je.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress)}catch(e){Nc("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e)}})(r,t,n).then((()=>{r.sharedClientState.notifyBundleLoaded()}))}(await Iv(e),i,r)}))}(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return function(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Oc(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Je.getNamedQuery(e,t)))}(await _v(e),t)))}(Jv(e=Lv(e,Qv)),t).then((t=>t?new Vv(e,null,t.query):null))}(this._delegate,e).then((e=>e?new kb(this,e):null))}}class gb extends Yw{constructor(e){super(),this.firestore=e}convertBytes(e){return new db(new tw(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return bb.forKey(t,this.firestore,null)}}class yb{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new gb(e)}get(e){const t=Ab(e);return this._delegate.get(t).then((e=>new Tb(this._firestore,new Dw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=Ab(e);return n?(lb("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=Ab(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=Ab(e);return this._delegate.delete(t),this}}class vb{constructor(e){this._delegate=e}set(e,t,n){const r=Ab(e);return n?(lb("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=Ab(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=Ab(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class wb{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Lw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Sb(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=wb.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new wb(e,new gb(e),t),r.set(t,i)),i}}wb.INSTANCES=new WeakMap;class bb{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gb(e)}static forPath(e,t,n){if(e.length%2!=0)throw new Pc("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new bb(t,new jv(t._delegate,n,new ph(e)))}static forKey(e,t,n){return new bb(t,new jv(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new xb(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new xb(this.firestore,Bv(this._delegate,e))}catch(e){throw _b(e,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=It(e))instanceof jv&&$v(this._delegate,e)}set(e,t){t=lb("DocumentReference.set",t);try{return t?rb(this._delegate,e,t):rb(this._delegate,e)}catch(e){throw _b(e,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?ib(this._delegate,e):ib(this._delegate,e,t,...n)}catch(e){throw _b(e,"updateDoc()","DocumentReference.update()")}}delete(){return function(e){return ob(Lv(e.firestore,Qv),[new Kd(e._key,Rd.none())])}(this._delegate)}onSnapshot(...e){const t=Eb(e),n=Ib(e,(e=>new Tb(this.firestore,new Dw(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return sb(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=Lv(e,jv);const t=Lv(e.firestore,Qv),n=Jv(t),r=new nb(t);return function(e,t){const n=new Dc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Oc(e);return n.persistence.runTransaction("read document","readonly",(e=>n.Qn.An(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Pc(Rc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=cy(e,`Failed to get document '${t} from cache`);n.reject(r)}}(await _v(e),t,n))),n.promise}(n,e._key).then((n=>new Dw(t,r,e._key,n,new Pw(null!==n&&n.hasLocalMutations,!0),e.converter)))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Lv(e,jv);const t=Lv(e.firestore,Qv);return Sv(Jv(t),e._key,{source:"server"}).then((n=>ab(t,e,n)))}(this._delegate):function(e){e=Lv(e,jv);const t=Lv(e.firestore,Qv);return Sv(Jv(t),e._key).then((n=>ab(t,e,n)))}(this._delegate),t.then((e=>new Tb(this.firestore,new Dw(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new bb(this.firestore,e?this._delegate.withConverter(wb.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function _b(e,t,n){return e.message=e.message.replace(t,n),e}function Eb(e){for(const t of e)if("object"==typeof t&&!fb(t))return t;return{}}function Ib(e,t){var n,r;let i;return i=fb(e[0])?e[0]:fb(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Tb{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new bb(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Uw(this._delegate,e._delegate)}}class Sb extends Tb{data(e){const t=this._delegate.data(e);return function(e,t){e||xc()}(void 0!==t),t}}class kb{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gb(e)}where(e,t,n){try{return new kb(this.firestore,zw(this._delegate,function(e,t,n){const r=t,i=Rw("where",e);return new Bw(i,r,n)}(e,t,n)))}catch(e){throw _b(e,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new kb(this.firestore,zw(this._delegate,function(e,t="asc"){const n=t,r=Rw("orderBy",e);return new qw(r,n)}(e,t)))}catch(e){throw _b(e,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new kb(this.firestore,zw(this._delegate,function(e){return Mv("limit",e),new $w("limit",e,"F")}(e)))}catch(e){throw _b(e,"limit()","Query.limit()")}}limitToLast(e){try{return new kb(this.firestore,zw(this._delegate,function(e){return Mv("limitToLast",e),new $w("limitToLast",e,"L")}(e)))}catch(e){throw _b(e,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new kb(this.firestore,zw(this._delegate,function(...e){return new Kw("startAt",e,!0)}(...e)))}catch(e){throw _b(e,"startAt()","Query.startAt()")}}startAfter(...e){try{return new kb(this.firestore,zw(this._delegate,function(...e){return new Kw("startAfter",e,!1)}(...e)))}catch(e){throw _b(e,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new kb(this.firestore,zw(this._delegate,function(...e){return new Ww("endBefore",e,!0)}(...e)))}catch(e){throw _b(e,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new kb(this.firestore,zw(this._delegate,function(...e){return new Ww("endAt",e,!1)}(...e)))}catch(e){throw _b(e,"endAt()","Query.endAt()")}}isEqual(e){return Kv(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=Lv(e,Vv);const t=Lv(e.firestore,Qv),n=Jv(t),r=new nb(t);return function(e,t){const n=new Dc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Ym(e,t,!0),i=new Cy(t,r.Gn),s=i.Io(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=cy(e,`Failed to execute query '${t} against cache`);n.reject(r)}}(await _v(e),t,n))),n.promise}(n,e._query).then((n=>new Mw(t,r,e,n)))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Lv(e,Vv);const t=Lv(e.firestore,Qv),n=Jv(t),r=new nb(t);return kv(n,e._query,{source:"server"}).then((n=>new Mw(t,r,e,n)))}(this._delegate):function(e){e=Lv(e,Vv);const t=Lv(e.firestore,Qv),n=Jv(t),r=new nb(t);return jw(e._query),kv(n,e._query).then((n=>new Mw(t,r,e,n)))}(this._delegate),t.then((e=>new Cb(this.firestore,new Mw(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(...e){const t=Eb(e),n=Ib(e,(e=>new Cb(this.firestore,new Mw(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return sb(this._delegate,t,n)}withConverter(e){return new kb(this.firestore,e?this._delegate.withConverter(wb.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Nb{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Sb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Cb{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new kb(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new Sb(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new Nb(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new Sb(this._firestore,n))}))}isEqual(e){return Uw(this._delegate,e._delegate)}}class xb extends kb{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new bb(this.firestore,e):null}doc(e){try{return new bb(this.firestore,void 0===e?qv(this._delegate):qv(this._delegate,e))}catch(e){throw _b(e,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Lv(e.firestore,Qv),r=qv(e),i=Xw(e.converter,t);return ob(n,[hw(cw(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Rd.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new bb(this.firestore,e)))}isEqual(e){return $v(this._delegate,e._delegate)}withConverter(e){return new xb(this.firestore,e?this._delegate.withConverter(wb.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ab(e){return Lv(e,jv)}class Ob{constructor(...e){this._delegate=new ew(...e)}static documentId(){return new Ob(th.keyField().canonicalString())}isEqual(e){return(e=It(e))instanceof ew&&this._delegate._internalPath.isEqual(e._internalPath)}}class Rb{constructor(e){this._delegate=e}static serverTimestamp(){const e=new pw("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Rb(e)}static delete(){const e=new dw("deleteField");return e._methodName="FieldValue.delete",new Rb(e)}static arrayUnion(...e){const t=function(...e){return new mw("arrayUnion",e)}(...e);return t._methodName="FieldValue.arrayUnion",new Rb(t)}static arrayRemove(...e){const t=function(...e){return new gw("arrayRemove",e)}(...e);return t._methodName="FieldValue.arrayRemove",new Rb(t)}static increment(e){const t=function(e){return new yw("increment",e)}(e);return t._methodName="FieldValue.increment",new Rb(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Pb={Firestore:mb,GeoPoint:rw,Timestamp:Hc,Blob:db,Transaction:yb,WriteBatch:vb,DocumentReference:bb,DocumentSnapshot:Tb,Query:kb,QueryDocumentSnapshot:Sb,QuerySnapshot:Cb,CollectionReference:xb,FieldPath:Ob,FieldValue:Rb,setLogLevel:function(e){!function(e){Ic.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};function Db(e,t,n,r,i,s,o){try{var a=e[s](o),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,i)}!function(e){e.INTERNAL.registerComponent(new St("firestore-compat",(e=>((e,t)=>new mb(e,t,new pb))(e.getProvider("app-compat").getImmediate(),e.getProvider("firestore").getImmediate())),"PUBLIC").setServiceProps(Object.assign({},Pb))),e.registerVersion("@firebase/firestore-compat","0.1.1")}(dn),dn.initializeApp({apiKey:"AIzaSyCv5EiRyE15HVfcfH9EV0_Y_2mfu34jGUY",authDomain:"crwn-grooming.firebaseapp.com",projectId:"crwn-grooming",storageBucket:"crwn-grooming.appspot.com",messagingSenderId:"361126739192",appId:"1:361126739192:web:8c33df93f0521360f90f0d",measurementId:"G-MZ0YNT277X"});var Lb=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){Db(s,r,i,o,a,"next",e)}function a(e){Db(s,r,i,o,a,"throw",e)}o(void 0)}))}}(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:console.log(firestore.doc("users/rfburf4u"));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Mb=dn.auth(),Fb=(dn.firestore(),new dn.auth.GoogleAuthProvider);Fb.setCustomParameters({prompt:"select_account"});var Ub=function(){return Mb.signInWithPopup(Fb)};const jb=function(e){var n=e.currentUser;return t.createElement("header",null,t.createElement(ze,{to:"/",className:"logo-container"},t.createElement("img",{src:Ke(),alt:""})),t.createElement("div",{className:"nav"},t.createElement(ze,{className:"nav-item",to:"/shop"},"Shop"),t.createElement(ze,{className:"nav-item",to:"/contact"},"Contact"),n?t.createElement("div",{className:"nav-item",onClick:function(){Mb.signOut()},style:{cursor:"pointer"}}," Sign-out"):t.createElement(ze,{className:"nav-item",to:"/signin"},"Sign-in")))};var Vb=n(499),zb={};zb.styleTagTransform=m(),zb.setAttributes=h(),zb.insert=l().bind(null,"head"),zb.domAPI=a(),zb.insertStyleElement=f(),s()(Vb.Z,zb),Vb.Z&&Vb.Z.locals&&Vb.Z.locals;var Bb=n(394),qb={};qb.styleTagTransform=m(),qb.setAttributes=h(),qb.insert=l().bind(null,"head"),qb.domAPI=a(),qb.insertStyleElement=f(),s()(Bb.Z,qb),Bb.Z&&Bb.Z.locals&&Bb.Z.locals;var $b=n(31),Kb={};Kb.styleTagTransform=m(),Kb.setAttributes=h(),Kb.insert=l().bind(null,"head"),Kb.domAPI=a(),Kb.insertStyleElement=f(),s()($b.Z,Kb),$b.Z&&$b.Z.locals&&$b.Z.locals;var Wb=["handleChange","label"];function Hb(){return(Hb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const Gb=function(e){var n=e.handleChange,r=e.label,i=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,Wb);return t.createElement("div",{className:"group"},t.createElement("input",Hb({className:"form-input",onChange:n},i)),r?t.createElement("label",{className:"".concat(i.value.length?"shrink":""," form-input-label")},r):null)};var Qb=n(364),Jb={};Jb.styleTagTransform=m(),Jb.setAttributes=h(),Jb.insert=l().bind(null,"head"),Jb.domAPI=a(),Jb.insertStyleElement=f(),s()(Qb.Z,Jb),Qb.Z&&Qb.Z.locals&&Qb.Z.locals;var Yb=["child","isGoogleIn"];function Xb(){return(Xb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Zb=function(e){var n=e.child,r=e.isGoogleIn,i=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,Yb);return t.createElement("button",Xb({className:"".concat(r?"google-sign-in":""," custom-btn")},i),n)};function e_(e){return(e_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n_(e,t){return(n_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r_(e,t){if(t&&("object"===e_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i_(e)}function i_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s_(e){return(s_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const a_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n_(e,t)}(a,e);var n,r,i,s,o=(i=a,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=s_(i);if(s){var n=s_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return r_(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o_(i_(t=o.call(this,e)),"handleSubmit",(function(e){e.preventDefault(),t.setState({email:"",password:""})})),o_(i_(t),"handleChange",(function(e){var n=e.target,r=n.value,i=n.name;t.setState(o_({},i,r))})),t.state={email:"",password:""},t}return n=a,(r=[{key:"render",value:function(){return console.log(this.state),t.createElement("div",{className:"sign-in"},t.createElement("h2",null,"I Already have an Account"),t.createElement("span",null,"Sign In with your Email and Password"),t.createElement("form",{id:"sign-in-form",onSubmit:this.handleSubmit},t.createElement(Gb,{type:"email",name:"email",value:this.state.email,required:!0,handleChange:this.handleChange,label:"email"}),t.createElement(Gb,{type:"password",name:"password",value:this.state.password,required:!0,handleChange:this.handleChange,label:"password"}),t.createElement("div",{className:"btns"},t.createElement(Zb,{type:"submit",value:"submit form",child:"Sign-in"}),t.createElement(Zb,{onClick:Ub,child:"Sign-in with google",isGoogleIn:!0}))))}}])&&t_(n.prototype,r),a}(t.Component),u_=function(){return t.createElement("div",{className:"sign-in-sign-up"},t.createElement(a_,null))};function l_(e){return(l_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c_(e,t,n,r,i,s,o){try{var a=e[s](o),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,i)}function h_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d_(e,t){return(d_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f_(e,t){if(t&&("object"===l_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p_(e)}function p_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m_(e){return(m_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const g_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d_(e,t)}(a,e);var n,r,i,s,o=(i=a,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m_(i);if(s){var n=m_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return f_(this,e)});function a(){var e,t,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=p_(e=o.call(this)),(n="unsubscribeFromAuth")in t?Object.defineProperty(t,n,{value:null,enumerable:!0,configurable:!0,writable:!0}):t[n]=null,e.state={currentUser:null},e}return n=a,(r=[{key:"componentDidMount",value:function(){var e=this;this.unsubscribeFromAuth=Mb.onAuthStateChanged(function(){var t=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){c_(s,r,i,o,a,"next",e)}function a(e){c_(s,r,i,o,a,"throw",e)}o(void 0)}))}}(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Lb(n),e.setState({currentUser:n}),console.log(n);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromAuth()}},{key:"render",value:function(){return t.createElement("div",null,t.createElement(jb,{currentUser:this.state.currentUser}),t.createElement(se,null,t.createElement(ie,{exact:!0,path:"/",component:me}),t.createElement(ie,{path:"/shop",component:Re}),t.createElement(ie,{path:"/signin",component:u_})))}}])&&h_(n.prototype,r),a}(t.Component);var y_=n(847),v_={};v_.styleTagTransform=m(),v_.setAttributes=h(),v_.insert=l().bind(null,"head"),v_.domAPI=a(),v_.insertStyleElement=f(),s()(y_.Z,v_),y_.Z&&y_.Z.locals&&y_.Z.locals,r.render(t.createElement(Le,null,t.createElement(g_,null)),document.getElementById("app"))})()})();